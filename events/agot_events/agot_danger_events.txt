namespace = agot_danger

####################
# Wildling Raiders #
####################
agot_danger.0001 = {
	type = character_event
	title = agot_danger.0001.title
	theme = travel_danger

	left_portrait = {
		character = root
		animation = fear
	}
	right_portrait = {
		character = scope:btw_raider
		animation = anger
	}

	desc = agot_danger.0001.desc

	trigger = {
		is_location_valid_for_travel_event_on_land = yes
		is_available_travelling_adult = yes
		root.location = {
			geographical_region = danger_wildling_raid
		}
	}

	immediate = {
		location = {
			save_scope_as = location
		}
		random_list = {
			30 = {
				create_character = {
					template = btw_raider_character
					culture = culture:frozen_shoreman
					faith = faith:old_gods_btw_sni
					dynasty = none
					location = root.location
					gender_female_chance = 20
					save_scope_as = btw_raider
				}
			}

			30 = {
				create_character = {
					template = btw_raider_character
					culture = culture:forestman
					faith = faith:old_gods_btw_fnf
					dynasty = none
					location = root.location
					gender_female_chance = 20
					save_scope_as = btw_raider
				}
			}

			20 = {
				create_character = {
					template = btw_raider_character
					culture = culture:fangman
					faith = faith:old_gods_btw_fnf
					dynasty = none
					location = root.location
					gender_female_chance = 20
					save_scope_as = btw_raider
				}
			}

			10 = {
				create_character = {
					template = btw_raider_character
					culture = culture:nightrunner
					faith = faith:old_gods_btw_sas
					dynasty = none
					location = root.location
					gender_female_chance = 20
					save_scope_as = btw_raider
				}
			}

			10 = {
				create_character = {
					template = btw_raider_character
					culture = culture:hornfoot
					faith = faith:old_gods_btw_fnf
					dynasty = none
					location = root.location
					gender_female_chance = 20
					save_scope_as = btw_raider
				}
			}
		}
		current_travel_plan = {
			random_entourage_character = {
				limit = {
					NOT = {
						this = root
					}
					is_ai = yes
				}
				save_scope_as = sacrificed_entourage
			}
		}
	}

	option = { #Run
		name = agot_danger.0001.a
		custom_tooltip = agot_danger.0001.a.tt
		hidden_effect = {
			random_list = {
				# Everyone makes it no delay no loss
				15 = {
					send_interface_toast = {
						title = agot_danger.0001.a.toast
						custom_tooltip = agot_danger.0001.a.fleeing
						left_icon = root
						add_prestige = minor_prestige_gain
					}
				}
				#Delay because you need to lose him
				15 = {
					current_travel_plan = {
						delay_travel_plan = { days = 10 }
					}
					send_interface_toast = {
						title = agot_danger.0001.a.toast
						custom_tooltip = agot_danger.0001.a.minordelay
						left_icon = root
					}
				}
				# Even more delay
				15 = {
					current_travel_plan = {
						delay_travel_plan = { days = 30 }
					}
					send_interface_toast = {
						title = agot_danger.0001.a.toast
						custom_tooltip = agot_danger.0001.a.majordelay
						left_icon = root
					}
				}
				# Haha get robbed idiot
				15 = {
					pay_short_term_gold = {
						target = scope:btw_raider
						gold = minor_gold_value
					}
					send_interface_toast = {
						title = agot_danger.0001.a.toast
						custom_tooltip = agot_danger.0001.a.minortheft
						left_icon = root
					}
				}
				#Damn you lost some nice things huh
				15 = {
					pay_short_term_gold = {
						target = scope:btw_raider
						gold = medium_gold_value
					}
					send_interface_toast = {
						title = agot_danger.0001.a.toast
						custom_tooltip = agot_danger.0001.a.majortheft
						left_icon = root
					}
				}
				#Because nice things can't happen
				15 = {
					current_travel_plan = {
						delay_travel_plan = { days = 10 }
					}
					pay_short_term_gold = {
						target = scope:btw_raider
						gold = minor_gold_value
					}
					send_interface_toast = {
						title = agot_danger.0001.a.toast
						custom_tooltip = agot_danger.0001.a.minorcombo
						left_icon = root
					}
				}
				#Entering the danger zone
				7 = {
					current_travel_plan = {
						delay_travel_plan = { days = 50 }
					}
					pay_short_term_gold = {
						target = scope:btw_raider
						gold = major_gold_value
					}
					send_interface_toast = {
						title = agot_danger.0001.a.toast
						custom_tooltip = agot_danger.0001.a.majorcombo
						left_icon = root
					}
				}
				#Everybody run 8)
				2 = {
					current_travel_plan= {
						every_entourage_character = {
							duel = {
								skill = prowess
								target = scope:btw_raider
								50 = {
									compare_modifier = {
										value = scope:duel_value
										multiplier = 3.5
										min = -49
									}
								}
								50 = {
									compare_modifier = {
										value = scope:duel_value
										multiplier = -3.5
										min = -49
									}
									death = {
										death_reason = death_wildlings
									}
								}
							}
						}
					}
					send_interface_toast = {
						title = agot_danger.0001.a.toast
						custom_tooltip = agot_danger.0001.a.scattered
						left_icon = root
					}
				}
				#Get sniped idiot
				1 = {
					root = {
						death = {
							death_reason = death_shot_arrow_murder
							killer = scope:btw_raider
						}
					}
				}

			}
			scope:btw_raider = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				add = 20
				has_trait = craven
			}
			modifier = {
				add = -20
				has_trait = brave
			}
		}
		stress_impact = {
			brave = major_stress_gain
			craven = major_stress_loss
			knight = medium_stress_gain
		}
	}

	option = { #Fight
		name = agot_danger.0001.b
		custom_tooltip = agot_danger.0001.b.tt
		root = {
			duel = {
				skill = prowess
				target = scope:btw_raider
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 3.5
						min = -49
					}
					custom_tooltip = agot_danger.0001.b.winning
					hidden_effect = {
						random_list = {
							45 = {
								scope:btw_raider = {
									death = {
										death_reason = death_duel
										killer = root
									}
								}
								send_interface_toast = {
									title = agot_danger.0001.b.win
									custom_tooltip = agot_danger.0001.b.killed
									left_icon = root
								}
							}
							35 = {
								root ={
									imprison = {
										target = scope:btw_raider
										type = dungeon
									}
								}
								send_interface_toast = {
									title = agot_danger.0001.b.win
									custom_tooltip = agot_danger.0001.b.imprisoned
									left_icon = root
								}
							}
							20 = {
								scope:btw_raider = {
									death = {
										death_reason = death_vanished
									}
								}
								send_interface_toast = {
									title = agot_danger.0001.b.win
									custom_tooltip = agot_danger.0001.b.fleeing
									left_icon = root
								}
							}
						}
					}

				}
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
						min = -49
					}
					custom_tooltip = agot_danger.0001.b.losing
					hidden_effect = {
						if = { #If you get knocked out alone, that's a game over mate
							limit = {
								current_travel_plan = {
									any_entourage_character = {
										NOT = {
											this = root
										}
										is_ai = yes
										count < 1
									}
								}
							}
							root = {
								death = {
									death_reason = death_wildlings
								}
							}
						}
						else = {

							random_list = {

								# We doing a little robbing
								50 = {
									pay_short_term_gold = {
										target = scope:btw_raider
										gold = minor_gold_value
									}
									send_interface_toast = {
										title = agot_danger.0001.b.loss
										custom_tooltip = agot_danger.0001.b.robbed
										left_icon = root
									}
								}
								# We do a little kidnapping
								30 = {
									current_travel_plan = {
										delay_travel_plan = { days = 30 } # You get kidnapped
										random_entourage_character = { # They grab someone
											limit = {
												NOT = {
													this = root
												}
												is_ai = yes
											}
											save_scope_as = kidnapped_entourage
										}
										scope:kidnapped_entourage = {
											death = {
												death_reason = death_wildlings
											}
										}
									}
									send_interface_toast = {
										title = agot_danger.0001.b.loss
										custom_tooltip = agot_danger.0001.b.kidnapping
										left_icon = root
									}

								}
								# They killed you in the duel
								20 = {
									root = {
										death = {
											death_reason = death_duel
											killer = scope:btw_raider
										}
									}
								}

							}

						}
						scope:btw_raider = {
							death = {
								death_reason = death_vanished
							}
						}
					}

				}
			}
		}
		ai_chance = {
			base = 20
			modifier = {
				add = 20
				has_trait = brave
			}
			modifier = {
				add = 10
				OR = {
					has_trait = squire
					has_trait = knight
				}
			}
		}
		stress_impact = {
			brave = medium_stress_loss
			craven = major_stress_gain
			knight = minor_stress_loss
		}
	}

	option = { #Bribe
		name = agot_danger.0001.c
		custom_tooltip = agot_danger.0001.c.tt
		pay_short_term_gold = {
			target = scope:btw_raider
			gold = medium_gold_value
		}
		# Does the raider just runs with money
		root = {
			duel = {
				skill = diplomacy
				target = scope:btw_raider
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 3.5
						min = -49
					}
					add_courtier = scope:btw_raider
					send_interface_toast = {
						title = agot_danger.0001.c.joined
						left_icon = root
						right_icon = scope:btw_raider
					}
				}
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
						min = -49
					}
					custom_tooltip = agot_danger.0001.c.else
					hidden_effect = {
						scope:btw_raider = {
							death = {
								death_reason = death_vanished
							}
						}
					}
					send_interface_toast = {
						title = agot_danger.0001.c.ranwithmoney
						left_icon = root
					}
				}
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				short_term_gold < medium_gold_value
				factor = 0
			}
			modifier = {
				add = 20
				has_trait = gregarious
			}
			modifier = {
				add = -20
				has_trait = greedy
			}
		}
		stress_impact = {
			greedy = major_stress_gain
			knight = minor_stress_gain
		}
	}

	option = { #Give Someone
		name = agot_danger.0001.d
		custom_tooltip = agot_danger.0001.d.tt
		trigger = {
			OR = {
				has_trait = callous
				has_trait = sadistic
				has_trait = craven
			}
			exists = scope:sacrificed_entourage
		}
		scope:sacrificed_entourage = {
			death = {
				death_reason = death_wildlings
			}
		}
		hidden_effect = {
			scope:btw_raider = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		add_prestige = minor_prestige_loss
		stress_impact = {
			sadistic = minor_stress_loss
			craven = major_stress_gain
		}
		send_interface_toast = {
			title = agot_danger.0001.d.sacrifice
			left_icon = root
			right_icon = scope:sacrificed_entourage
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 20
				has_trait = sadistic
			}
			modifier = {
				add = 5
				has_trait = craven
			}
		}
	}
}

####################
# Moon Clans Raiders #
####################

agot_danger.0002 = {
	type = character_event
	title = agot_danger.0002.title
	theme = travel_danger

	left_portrait = {
		character = root
		animation = fear
	}
	right_portrait = {
		character = scope:moon_raider
		animation = anger
	}

	desc = agot_danger.0002.desc

	trigger = {
		is_location_valid_for_travel_event_on_land = yes
		is_available_travelling_adult = yes
		root.location = {
			geographical_region = danger_moonclan_raid
		}
	}

	immediate = {
		location = {
			save_scope_as = location
		}
		create_character = {
			template = new_raider_character
			culture = culture:mountain_clansman
			faith = faith:old_gods_btw_mns
			dynasty = none
			location = root.location
			gender_female_chance = 20
			save_scope_as = moon_raider
		}
		current_travel_plan = {
			random_entourage_character = {
				limit = {
					NOT = {
						this = root
					}
					is_ai = yes
				}
				save_scope_as = sacrificed_entourage
			}
		}
	}

	option = { #Run
		name = agot_danger.0002.a
		custom_tooltip = agot_danger.0002.a.tt
		hidden_effect = {
			random_list = {
				# Everyone makes it no delay no loss
				15 = {
					send_interface_toast = {
						title = agot_danger.0002.a.toast
						custom_tooltip = agot_danger.0002.a.fleeing
						left_icon = root
						add_prestige = minor_prestige_gain
					}
				}
				#Delay because you need to lose him
				15 = {
					current_travel_plan = {
						delay_travel_plan = { days = 10 }
					}
					send_interface_toast = {
						title = agot_danger.0002.a.toast
						custom_tooltip = agot_danger.0002.a.minordelay
						left_icon = root
					}
				}
				# Even more delay
				15 = {
					current_travel_plan = {
						delay_travel_plan = { days = 30 }
					}
					send_interface_toast = {
						title = agot_danger.0002.a.toast
						custom_tooltip = agot_danger.0002.a.majordelay
						left_icon = root
					}
				}
				# Haha get robbed idiot
				15 = {
					pay_short_term_gold = {
						target = scope:moon_raider
						gold = minor_gold_value
					}
					send_interface_toast = {
						title = agot_danger.0002.a.toast
						custom_tooltip = agot_danger.0002.a.minortheft
						left_icon = root
					}
				}
				#Damn you lost some nice things huh
				15 = {
					pay_short_term_gold = {
						target = scope:moon_raider
						gold = medium_gold_value
					}
					send_interface_toast = {
						title = agot_danger.0002.a.toast
						custom_tooltip = agot_danger.0002.a.majortheft
						left_icon = root
					}
				}
				#Because nice things can't happen
				15 = {
					current_travel_plan = {
						delay_travel_plan = { days = 10 }
					}
					pay_short_term_gold = {
						target = scope:moon_raider
						gold = minor_gold_value
					}
					send_interface_toast = {
						title = agot_danger.0002.a.toast
						custom_tooltip = agot_danger.0002.a.minorcombo
						left_icon = root
					}
				}
				#Entering the danger zone
				7 = {
					current_travel_plan = {
						delay_travel_plan = { days = 50 }
					}
					pay_short_term_gold = {
						target = scope:moon_raider
						gold = major_gold_value
					}
					send_interface_toast = {
						title = agot_danger.0002.a.toast
						custom_tooltip = agot_danger.0002.a.majorcombo
						left_icon = root
					}
				}
				#Everybody run 8)
				2 = {
					current_travel_plan= {
						every_entourage_character = {
							duel = {
								skill = prowess
								target = scope:moon_raider
								50 = {
									compare_modifier = {
										value = scope:duel_value
										multiplier = 3.5
										min = -49
								}
								}
								50 = {
									compare_modifier = {
										value = scope:duel_value
										multiplier = -3.5
										min = -49
									}
									death = {
										death_reason = death_moonclans
									}
								}
							}
						}
					}
					send_interface_toast = {
						title = agot_danger.0002.a.toast
						custom_tooltip = agot_danger.0002.a.scattered
						left_icon = root
					}
				}
				#Get sniped idiot
				1 = {
					root = {
						death = {
							death_reason = death_shot_arrow_murder
							killer = scope:moon_raider
						}
					}
				}

			}
			scope:moon_raider = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				add = 20
				has_trait = craven
			}
			modifier = {
				add = -20
				has_trait = brave
			}
		}
		stress_impact = {
			brave = major_stress_gain
			craven = major_stress_loss
			knight = medium_stress_gain
		}
	}

	option = { #Fight
		name = agot_danger.0002.b
		custom_tooltip = agot_danger.0002.b.tt
		root = {
			duel = {
				skill = prowess
				target = scope:moon_raider
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 3.5
						min = -49
					}
					custom_tooltip = agot_danger.0002.b.winning
					hidden_effect = {
						random_list = {
							45 = {
								scope:moon_raider = {
									death = {
										death_reason = death_duel
										killer = root
									}
								}
								send_interface_toast = {
									title = agot_danger.0002.b.win
									custom_tooltip = agot_danger.0002.b.killed
									left_icon = root
								}
							}
							35 = {
								root ={
									imprison = {
										target = scope:moon_raider
										type = dungeon
									}
								}
								send_interface_toast = {
									title = agot_danger.0002.b.win
									custom_tooltip = agot_danger.0002.b.imprisoned
									left_icon = root
								}
							}
							20 = {
								scope:moon_raider = {
									death = {
										death_reason = death_vanished
									}
								}
								send_interface_toast = {
									title = agot_danger.0002.b.win
									custom_tooltip = agot_danger.0002.b.fleeing
									left_icon = root
								}
							}
						}
					}

				}
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
						min = -49
					}
					custom_tooltip = agot_danger.0002.b.losing
					hidden_effect = {
						if = { #If you get knocked out alone, that's a game over mate
							limit = {
								current_travel_plan = {
									any_entourage_character = {
										NOT = {
											this = root
										}
										is_ai = yes
										count < 1
									}
								}
							}
							root = {
								death = {
									death_reason = death_moonclans
								}
							}
						}
						else = {

							random_list = {

								# We doing a little robbing
								50 = {
									pay_short_term_gold = {
										target = scope:moon_raider
										gold = minor_gold_value
									}
									send_interface_toast = {
										title = agot_danger.0002.b.loss
										custom_tooltip = agot_danger.0002.b.robbed
										left_icon = root
									}
								}
								# We do a little kidnapping
								30 = {
									current_travel_plan = {
										delay_travel_plan = { days = 30 } # You get kidnapped
										random_entourage_character = { # They grab someone
											limit = {
												NOT = {
													this = root
												}
												is_ai = yes
											}
											save_scope_as = kidnapped_entourage
										}
										scope:kidnapped_entourage = {
											death = {
												death_reason = death_moonclans
											}
										}
									}
									send_interface_toast = {
										title = agot_danger.0002.b.loss
										custom_tooltip = agot_danger.0002.b.kidnapping
										left_icon = root
									}

								}
								# They killed you in the duel
								20 = {
									root = {
										death = {
											death_reason = death_duel
											killer = scope:moon_raider
										}
									}
								}

							}

						}
						scope:moon_raider = {
							death = {
								death_reason = death_vanished
							}
						}
					}

				}
			}
		}
		ai_chance = {
			base = 20
			modifier = {
				add = 20
				has_trait = brave
			}
			modifier = {
				add = 10
				OR = {
					has_trait = squire
					has_trait = knight
				}
			}
		}
		stress_impact = {
			brave = medium_stress_loss
			craven = major_stress_gain
			knight = minor_stress_loss
		}
	}

	option = { #Bribe
		name = agot_danger.0002.c
		custom_tooltip = agot_danger.0002.c.tt
		pay_short_term_gold = {
			target = scope:moon_raider
			gold = medium_gold_value
		}
		# Does the raider just runs with money
		root = {
			duel = {
				skill = diplomacy
				target = scope:moon_raider
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 3.5
						min = -49
					}
					add_courtier = scope:moon_raider
					send_interface_toast = {
						title = agot_danger.0002.c.joined
						left_icon = root
						right_icon = scope:moon_raider
					}
				}
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
						min = -49
					}
					custom_tooltip = agot_danger.0002.c.else
					hidden_effect = {
						scope:moon_raider = {
							death = {
								death_reason = death_vanished
							}
						}
					}
					send_interface_toast = {
						title = agot_danger.0002.c.ranwithmoney
						left_icon = root
					}
				}
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				short_term_gold < medium_gold_value
				factor = 0
			}
			modifier = {
				add = 20
				has_trait = gregarious
			}
			modifier = {
				add = -20
				has_trait = greedy
			}
		}
		stress_impact = {
			greedy = major_stress_gain
			knight = minor_stress_gain
		}
	}

	option = { #Give Someone
		name = agot_danger.0002.d
		custom_tooltip = agot_danger.0002.d.tt
		trigger = {
			OR = {
				has_trait = callous
				has_trait = sadistic
				has_trait = craven
			}
			exists = scope:sacrificed_entourage
		}
		scope:sacrificed_entourage = {
			death = {
				death_reason = death_moonclans
			}
		}
		hidden_effect = {
			scope:moon_raider = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		add_prestige = minor_prestige_loss
		stress_impact = {
			sadistic = minor_stress_loss
			craven = major_stress_gain
		}
		send_interface_toast = {
			title = agot_danger.0002.d.sacrifice
			left_icon = root
			right_icon = scope:sacrificed_entourage
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 20
				has_trait = sadistic
			}
			modifier = {
				add = 5
				has_trait = craven
			}
		}
	}
}

####################
# The Icy Crevasse #
####################

agot_danger.0003 = {
	type = character_event
	title = agot_danger.0003.title
	desc = agot_danger.0003.desc
	theme = travel_danger

	left_portrait = {
		character = root
		animation = disbelief
		triggered_animation = {
			trigger = {
				AND = {
					OR = {
						has_trait = sadistic
						has_trait = callous
					}
					opinion = {
						target = scope:crevasse_fallerinto
						value < 0
					}
				}
			}
			animation = war_defender
		}
	}

	right_portrait = {
		character = scope:crevasse_fallerinto
		animation = paranoia
	}

	trigger = {
		is_available_travelling_adult = yes
		is_location_valid_for_travel_event_on_land = yes
		current_travel_plan = {
			any_entourage_character = {
				OR = {
					health < fine_health
					has_trait = impatient
					has_trait = half_blind
					has_trait = blind
					has_trait = drunkard
					has_trait = hashishiyah
				}
				is_available_travelling_adult = yes
				is_ai = yes
			}
		}
		root.location = {
			OR = {
				travel_danger_type = {
					travel_plan = root.current_travel_plan
					terrain = glacier
				}
				travel_danger_type = {
					travel_plan = root.current_travel_plan
					terrain = frozen_flats
				}
			}
		}
	}

	cooldown = { months = 12 }

	immediate = {
		mp_delay_travel_plan = { DAYS = 90 }
		current_travel_plan = {
			random_entourage_character = {
				limit = {
					OR = {
						health < fine_health
						has_trait = impatient
						has_trait = half_blind
						has_trait = blind
						has_trait = drunkard
						has_trait = hashishiyah
					}
					is_available_travelling_adult = yes
					is_ai = yes
				}
				save_scope_as = crevasse_fallerinto
			}
		}
		traveler_danger_xp_effect = {
			MIN = 3
			MAX = 6
		}
	}

	option = {
		name = agot_danger.0003.a
		trigger = {
			has_trait = lifestyle_traveler
			OR = {
				AND = {
					has_trait_xp = {
						trait = lifestyle_traveler
						track = danger
						value > 49
					}
					root.culture = {
						agot_is_wildling_culture = yes
					}
				}
				has_trait_xp = {
					trait = lifestyle_traveler
					track = danger
					value = 100
				}
			}
		}
		custom_tooltip = agot_danger.0003.a.tt
		add_prestige = medium_prestige_gain
		scope:crevasse_fallerinto = {
			add_opinion = {
				modifier = feast_saved_my_life_opinion
				target = root
			}
		}
		stress_impact = {
			base = minor_stress_impact_loss
			sadistic = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
		}
	}

	option = {
		name = agot_danger.0003.b
		duel = {
			skill = prowess
			value = very_high_skill_rating
			30 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				modifier = {
					factor = 1.25
					has_trait = athletic
				}
				modifier = {
					factor = 1.5
					has_trait = strong
				}
				modifier = {
					factor = 1.25
					has_trait = physique_good_1
				}
				modifier = {
					factor = 1.5
					has_trait = physique_good_2
				}
				modifier = {
					factor = 1.75
					has_trait = physique_good_3
				}

				send_interface_toast = {
					title = agot_danger.0003.b.toast.success.t
					right_icon = scope:crevasse_fallerinto
					add_prestige = medium_prestige_gain
					scope:crevasse_fallerinto = {
						add_opinion = {
							modifier = feast_saved_my_life_opinion
							target = root
						}
					}
				}
			}
			70 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
					title = agot_danger.0003.b.toast.failure.t
					right_icon = scope:crevasse_fallerinto
					add_prestige = medium_prestige_loss
					scope:crevasse_fallerinto = {
						death = {
							death_reason = death_fell_into_crevasse
						}
					}
				}
			}
		}
		stress_impact = {
			brave = minor_stress_impact_loss
			craven = minor_stress_impact_gain
		}

		ai_chance = {
			base = 0
			modifier = {
				add = 15
				has_trait = strong
			}
			modifier = {
				add = 15
				has_trait = athletic
			}
			modifier = {
				add = 5
				has_trait = physique_good_1
			}
			modifier = {
				add = 10
				has_trait = physique_good_2
			}
			modifier = {
				add = 15
				has_trait = physique_good_3
			}
			modifier = {
				factor = 20
				has_trait = brave
			}
			modifier = {
				factor = 20
				has_trait = impatient
			}
		}
	}

	option = {
		name = agot_danger.0003.c
		custom_tooltip = agot_danger.0003.c.tt
		add_character_modifier = {
			modifier = malnourished_modifier
			years = 2
		}
		current_travel_plan = {
			every_entourage_character = {
				custom = every_entourage_tt
				add_character_modifier = {
					modifier = malnourished_modifier
					years = 2
				}
				if = {
					limit = {
						NOT = {
							this = scope:crevasse_fallerinto
						}
					}
					add_opinion = {
						modifier = angry_opinion
						opinion = -30
						target = scope:crevasse_fallerinto
					}
				}
			}
		}
		stress_impact = {
			compassionate = medium_stress_impact_loss
			gluttonous = major_stress_impact_gain
			callous = medium_stress_impact_gain
			greedy = medium_stress_impact_gain
		}

		ai_chance = {
			base = 50
			modifier = {
				add = 50
				has_trait = compassionate
			}
			modifier = {
				add = 25
				has_trait = temperate
			}
			modifier = {
				add = 25
				has_trait = generous
			}
			modifier = {
				add = -25
				has_trait = callous
			}
			modifier = {
				add = -50
				has_trait = gluttonous
			}
			modifier = {
				add = -25
				has_trait = greedy
			}
		}
	}
	option = {
		name = agot_danger.0003.d
		custom_tooltip = agot_danger.0003.d.tt
		scope:crevasse_fallerinto = {
			death = {
				death_reason = death_fell_into_crevasse
			}
		}
		current_travel_plan = {
			every_entourage_character = {
				custom = every_entourage_tt
				limit = {
					NOR = {
						has_trait = callous
						has_trait = sadistic
					}
				}
				add_opinion = {
					target = root
					modifier = hate_opinion
					opinion = -20
				}
			}
		}
		add_dread = medium_dread_gain
		stress_impact = {
			compassionate = massive_stress_impact_gain
			sadistic = major_stress_impact_loss
		}
		ai_chance = {
			base = 0
			modifier = {
				add = -200
				has_trait = compassionate
			}
			modifier = {
				add = 50
				has_trait = sadistic
			}
			modifier = {
				add = 50
				root.culture = {
					has_cultural_tradition = tradition_only_the_strong
				}
			}
			modifier = {
				add = 25
				has_trait = callous
			}
			modifier = {
				factor = 0.25
				opinion = {
					target = scope:crevasse_fallerinto
					value > 0
				}
			}
			modifier = {
				factor = 0
				opinion = {
					target = scope:crevasse_fallerinto
					value > 50
				}
			}
		}
	}
	after = {
		mp_resume_travel_plan = yes
	}
}

######################
# Flesh-Stripping Wind #
######################

agot_danger.0004 = {
	type = character_event
	title = agot_danger.0004.title
	desc = agot_danger.0004.desc
	theme = travel_danger

	left_portrait = {
		character = root
		animation = sick
	}
	right_portrait = {
		character = scope:frostbite_victim
		animation = sick
	}

	trigger = {
		is_location_valid_for_travel_event_on_land = yes
		is_available_travelling_adult = yes
		root.location = {
			geographical_region = world_westeros_beyond_the_wall
		}
		current_travel_plan = {
			any_entourage_character = {
				exists = this
			}
		}
	}

	immediate = {
		mp_delay_travel_plan = { DAYS = 90 }
		current_travel_plan = {
			random_entourage_character = {
				save_scope_as = frostbite_victim
			}
		}
		traveler_danger_xp_effect = {
			MIN = 6
			MAX = 9
		}
	}

	cooldown = { months = 72 }

	option = { #go to a known cave
		name = agot_danger.0004.a
		custom_tooltip = agot_danger.0004.a.tt
		trigger = {
			OR = {
				has_trait = scholar
				has_trait = lifestyle_traveler
				has_trait = lifestyle_hunter
			}
		}
		trigger_event = {
			id = agot_danger.0005
		}
		stress_impact = {
			base = minor_stress_impact_loss
			impatient = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
		}
	}

	option = { #search for a cave
		name = agot_danger.0004.b
		custom_tooltip = agot_danger.0004.b.tt
		trigger = {
			NOR = {
				has_trait = scholar
				has_trait = lifestyle_traveler
				has_trait = lifestyle_hunter
			}
		}
		current_travel_plan = {
			every_entourage_character = {
				hidden_effect = {
					random_list = {
						25 = {
							agot_is_tough_traveller_modifier = yes
						}
						25 = {
							add_character_modifier = travel_mild_frostbite_modifier
						}
					}
				}
			}
		}
		scope:frostbite_victim = {
			hidden_effect = {
				random_list = {
					25 = {
						agot_is_tough_traveller_modifier = yes
						add_character_modifier = travel_mild_frostbite_modifier
					}
					25 = {
						add_character_modifier = travel_severe_frostbite_modifier
					}
				}
			}
		}

		trigger_event = {
			id = agot_danger.0005
			days = { 4 7 }
		}
		ai_chance = {
			base = 100
		}
	}

	option = { #carry on through the blizzard
		name = agot_danger.0004.c
		custom_tooltip = agot_danger.0004.c.tt
		current_travel_plan = {
			every_entourage_character = {
				custom = every_entourage_tt
				add_opinion = {
					target = root
					modifier = hate_opinion
					opinion = -20
				}
				hidden_effect = {
					random_list = {
						25 = {
							agot_is_tough_traveller_modifier = yes
							if = {
								limit = {
									NOT = { has_character_modifier = travel_severe_frostbite_modifier }
								}
							add_character_modifier = travel_mild_frostbite_modifier
							}
						}
						25 = {
							if = {
								limit = { has_character_modifier = travel_mild_frostbite_modifier }
								remove_character_modifier = travel_mild_frostbite_modifier
								add_character_modifier = travel_severe_frostbite_modifier
							}
							else = {
								add_character_modifier = travel_severe_frostbite_modifier
							}
						}
					}
				}
			}
		}
		scope:frostbite_victim = {
			hidden_effect = {
				random_list = {
					10 = {
						agot_is_tough_traveller_modifier = yes
						if = {
							limit = { has_character_modifier = travel_mild_frostbite_modifier }
							remove_character_modifier = travel_mild_frostbite_modifier
							add_character_modifier = travel_severe_frostbite_modifier
						}
						else = {
							add_character_modifier = travel_severe_frostbite_modifier
						}
					}
					30 = {
						random_list = {
							50 = {
								scope:frostbite_victim = {
									random_list = {
										1 = {
											add_trait = one_handed
										}
										1 = {
											add_trait = one_legged
										}
										1 = {
											add_trait = disfigured
										}
									}
									root = {
										send_interface_toast = {
											title = agot_danger.0004.b.toast.lostlimb.t
											right_icon = scope:frostbite_victim
										}
									}
								}
							}
							50 = {
								root = {
									send_interface_toast = {
										title = agot_danger.0004.c.toast.death.t
										right_icon = scope:frostbite_victim
										scope:frostbite_victim = {
											death = {
												death_reason = death_hypothermia
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
		add_dread = medium_dread_gain
		stress_impact = {
			base = medium_stress_impact_gain
			compassionate = massive_stress_impact_gain
		}
		ai_chance = {
			base = 0
			modifier = {
				add = -100
				has_trait = compassionate
			}
			modifier = {
				add = 100
				AND = {
					has_trait = impatient
					has_trait = callous
				}
			}
		}
	}
	after = {
		mp_resume_travel_plan = yes
	}
}

agot_danger.0005 = { #made it to cave
	type = character_event
	title = agot_danger.0005.title
	desc = agot_danger.0005.desc
	theme = travel_danger

	left_portrait = {
		character = root
	}
	right_portrait = {
		character = scope:cave_companion
		animation = admiration
	}
	override_background = { reference = fp3_cave }

	immediate = {
		current_travel_plan = {
			delay_travel_plan = {
				days = 21
			}
		}
		if = {
			limit = {
				current_travel_plan = {
					any_entourage_character = {
						OR = {
							has_relation_lover = root
							has_relation_soulmate = root
							is_consort_of = root
						}
					}
				}
			}
			current_travel_plan = {
				random_entourage_character = {
					limit = {
						OR = {
							has_relation_lover = root
							has_relation_soulmate = root
							is_consort_of = root
						}
					}
				save_scope_as = cave_companion
				}
			}
		}
		else_if = {
			limit = {
				current_travel_plan = {
					any_entourage_character = {
						is_adult = yes
						NOR = {
							has_sexuality = asexual
							has_trait = celibate
						}
						might_cheat_on_every_partner_trigger = yes
						save_temporary_scope_as = companion_candidate
						matching_gender_and_sexuality_trigger = {
							CHARACTER_1 = scope:companion_candidate
							CHARACTER_2 = root
						}
					}
				}
			}
			scope:companion_candidate = {
				save_scope_as = cave_companion
			}
		}
	}

	option = { #cave paintings
		name = agot_danger.0005.a
		custom_tooltip = agot_danger.0005.a.tt
		current_travel_plan = {
			delay_travel_plan = { days = 5 }
		}
		duel = {
			skill = learning
			value = medium_skill_rating
			50 = {
				desc = agot_danger.0005.a.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				trigger_event = {
					id = agot_danger.0006
				}
				add_learning_lifestyle_xp = medium_lifestyle_experience
			}
			50 = {
				desc = agot_danger.0005.a.failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				stress_impact = {
					base = minor_stress_impact_gain
					diligent = minor_stress_impact_gain
					fickle = minor_stress_impact_loss
				}
				send_interface_toast = {
					title = agot_danger.0005.a.toast.failure.t
					left_icon = root
				}
			}
		}
		stress_impact = {
			lazy = minor_stress_impact_gain
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 50
				has_trait = scholar
			}
			modifier = {
				add = 50
				has_trait = poet
			}
			modifier = {
				add = 50
				has_trait = education_learning
			}
		}
	}

	option = { #cave love
		name = agot_danger.0005.b
		trigger = {
			exists = scope:cave_companion
		}

		had_sex_with_effect = { CHARACTER = scope:cave_companion PREGNANCY_CHANCE = seduce_pregnancy_chance }
		progress_towards_lover_effect = {
			CHARACTER = scope:cave_companion
			REASON = lover_feast_boink
			OPINION = 0
		}
		ai_chance = {
			base = 25
			modifier = {
				add = 50
				has_trait = lustful
			}
			modifier = {
				add = -50
				has_trait = chaste
			}
			modifier = {
				add = -500
				might_cheat_on_every_partner_trigger = no
			}
		}
	}

	option = { #explore cave
		name = agot_danger.0005.c
		custom_tooltip = agot_danger.0005.c.tt
		current_travel_plan = {
			delay_travel_plan = { days = 5 }
		}
		random_list = {
			25 = {
				desc = agot_danger.0005.c.mushrooms
				send_interface_toast = {
					title = agot_danger.0005.c.mushrooms.toast
					left_icon = root
					add_character_modifier = {
						modifier = feast_good_food_modifier
						years = 5
					}
				}
			}
			25 = {
				desc = agot_danger.0005.c.tiny_gold
				send_interface_toast = {
					title = agot_danger.0005.c.tiny_gold.toast
					left_icon = root
					add_gold = tiny_gold_value
				}
			}
			25 = {
				desc = agot_danger.0005.c.minor_gold
				send_interface_toast = {
					title = agot_danger.0005.c.minor_gold.toast
					left_icon = root
					add_gold = minor_gold_value
				}
			}
			25 = {
				custom_tooltip = agot_danger.0005.c.bear.tt
				trigger_event = agot_danger.0007
			}
		}
		stress_impact = {
			lazy = medium_stress_impact_gain
			craven = medium_stress_impact_gain
			greedy = medium_stress_impact_loss
			inquisitive = medium_stress_impact_loss
		}
		ai_chance = {
			base = 25
			modifier = {
				add = 50
				has_trait = greedy
			}
			modifier = {
				add = 50
				has_trait = inquisitive
			}
			modifier = {
				add = -50
				has_trait = craven
			}
			modifier = {
				add = -50
				has_trait = lazy
			}
		}
	}

	option = { #just chill
		name = agot_danger.0005.d
		custom_tooltip = agot_danger.0005.d.tt
		stress_impact = {
			base = major_stress_impact_loss
		}
		ai_chance = {
			base = 25
			modifier = {
				add = 25
				has_trait = lazy
			}
			modifier = {
				add = 25
				has_trait = content
			}
			modifier = {
				add = 25
				has_trait = gregarious
			}
		}
	}

	after = {
		mp_resume_travel_plan = yes
	}
}

agot_danger.0006 = { #interpreting cave paintings
	type = character_event
	title = agot_danger.0006.title
	desc = agot_danger.0006.desc
	theme = travel_danger

	left_portrait = {
		character = root
		animation = personality_rational
	}

	override_background = { reference = fp3_cave }

	option = {
		name = agot_danger.0006.a
		custom_tooltip = agot_danger.0006.a.tt
		if = {
			limit = {
				NOT = { has_trait = poet }
			}
			add_trait = poet
		}
		else = {
			add_learning_lifestyle_xp = medium_lifestyle_experience
			add_diplomacy_lifestyle_xp = medium_lifestyle_experience
		}
		ai_chance = {
			base = 10
			modifier = {
				add = 60
				has_trait = education_diplomacy
			}
			modifier = {
				add = 30
				has_trait = inquisitive
			}
		}
	}

	option = {
		trigger = {
			root.culture = {
				agot_is_wildling_culture = yes
			}
		}
		name = agot_danger.0006.b
		custom_tooltip = agot_danger.0006.b.tt
		dynasty = {
			add_dynasty_prestige = minor_dynasty_prestige_gain
		}
		ai_chance = {
			base = 10
			modifier = {
				add = 60
				has_trait = arrogant
			}
			modifier = {
				add = 30
				has_trait = ambitious
			}
		}
	}

	option = {
		name = agot_danger.0006.c
		custom_tooltip = agot_danger.0006.c.tt
		add_prestige = medium_prestige_gain
		add_character_modifier = {
			modifier = agot_reclaimed_knowledge_modifier
			years = 25
		}
		ai_chance = {
			base = 10
			modifier = {
				add = 60
				root.culture.culture_head = root
			}
			modifier = {
				add = 30
				has_trait = education_learning
			}
		}
	}
	after = {
		mp_resume_travel_plan = yes
	}
}

agot_danger.0007 = { #bear encounter | These are basically guts of the hunt event/effect at the success stage of hunting a bear
	type = character_event
	title = agot_danger.0007.title
	desc = agot_danger.0007.desc
	theme = travel_danger

	override_background = { reference = fp3_cave }

	left_portrait = {
		character = root
		triggered_animation = {
			trigger = {
				is_alive = yes
				is_adult = yes
				NOR = {
					has_trait = incapable
					has_trait = infirm
				}
			}
			animation = throne_room_two_handed_passive_1
		}
		triggered_animation = {
			trigger = {
				NAND = {
					is_alive = yes
					is_adult = yes
					NOR = {
					has_trait = incapable
					has_trait = infirm
					}
				}
			}
			animation = shock
		}
	}

	right_portrait = {
		character = scope:injury_target
		animation = throne_room_two_handed_passive_1
	}

	immediate = {
		play_sound_effect = "event:/DLC/EP2/SFX/Events/Grand_Activities/Hunts/ConstructionKits/ep2_event_grand_hunt_ck_beast_roar"
		current_travel_plan = {
			every_entourage_character = {
				limit = {
					is_alive = yes
					is_adult = yes
					NOR = {
						has_trait = incapable
						has_trait = infirm
					}
				}
				add_to_list = animal_slayers
			}
		}
		random_in_list = {
			list = animal_slayers
			weight = {
				base = 20
				hunt_likely_injured_modifiers = yes
			}
			save_scope_as = injury_target
		}
	}

	option = {
		name = agot_danger.0007.a
		duel = {
			skill = prowess
			value = 19
			50 = {
				desc = hunt_kill_success_melee
				hunt_kill_melee_modifiers = yes # SPEAR
				hunt_kill_hunter_modifiers = yes # HUNTER
				add_prestige = medium_prestige_gain
				hunt_animal_slayer_memory_effect = yes
				trigger_event = {
					id = agot_danger.0008
				}
			}
			1 = { # Injury
				desc = hunt_kill_failure_melee
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = 5
				}
				modifier = { add = 20 }
				add_prestige = minor_prestige_gain
				hunt_animal_slayer_memory_effect = yes
				hunt_wound_select_effect = yes
				hunt_wound_apply_effect = { SEVERE = yes }
				trigger_event = {
					id = agot_danger.0008
				}
			}
			1 = { # Death
				desc = hunt_kill_critical_failure_melee
				compare_modifier = {
				value = scope:duel_value
				multiplier = -3.5
				min = 5
				}
				modifier = { add = 19 }
				death = { death_reason = death_bear }
			}
		}
		if = {
			limit = { is_alive = yes }
			stress_impact = {
				craven = minor_stress_impact_gain
				arrogant = minor_stress_impact_loss
				ambitious = minor_stress_impact_loss
			}
		}
		ai_chance = {
			base = 50
			ai_value_modifier = {
				ai_boldness = 0.5
				ai_energy = 0.5
				ai_greed = 0.5
			}
		}
	}

	option = { #Group kill
		name = agot_danger.0007.b
		random_list = {
			50 = { # Animal is slain
				custom_tooltip = agot_danger.0007.b.cleankill.tt
				every_in_list = {
					list = animal_slayers
					custom = hunt_every_hunter_tt
					add_prestige = minor_prestige_gain
					hidden_effect = {
					hunter_progress_point_gain_effect = { CHANGE = 1 RANDOM_CHANGE = 1 } #Gives Hunter Lifestyle XP
					}
				}
				send_interface_toast = {
					title = agot_danger.0007.b.toast.cleankill.t
				}
				trigger_event = {
					id = agot_danger.0008
				}
			}

			25 = { # ...but someone is injured
				custom_tooltip = hunt_random_attendee_injured_tt
				modifier = { add = 19 } #for bear
				modifier = { add = 20 }
				every_in_list = {
					list = animal_slayers
					custom = hunt_every_hunter_tt
					add_prestige = minor_prestige_gain
					hidden_effect = {
					hunter_progress_point_gain_effect = { CHANGE = 1 RANDOM_CHANGE = 1 } #Gives Hunter Lifestyle XP
					}
				}
				hidden_effect = {
					scope:injury_target = {
						hunt_wound_select_effect = yes
						hunt_wound_apply_effect = { SEVERE = yes }
					}
				}
				send_interface_toast = {
					title = agot_danger.0007.b.toast.bearwound.t
					right_icon = scope:injury_target
				}
				trigger_event = {
					id = agot_danger.0008
				}
			}

			10 = { # ...but someone is killed
				modifier = { add = 19 }
				custom_tooltip = hunt_random_attendee_killed_tt
				hidden_effect = {
					send_interface_toast = {
						title = agot_danger.0007.b.toast.bearkill.t
						right_icon = scope:injury_target
						scope:injury_target = {
							death = { death_reason = death_bear }
						}
					}
					every_in_list = {
						list = animal_slayers
						custom = hunt_every_hunter_tt
						add_prestige = minor_prestige_gain
						hidden_effect = {
						hunter_progress_point_gain_effect = { CHANGE = 1 RANDOM_CHANGE = 1 } #Gives Hunter Lifestyle XP
						}
					}
				}
				trigger_event = {
					id = agot_danger.0008
				}
			}
		}

		stress_impact = {
			ambitious = miniscule_stress_impact_gain
			arrogant = miniscule_stress_impact_gain
			greedy = miniscule_stress_impact_gain
		}
		ai_chance = {
			base = 25
			ai_value_modifier = {
				ai_boldness = -1
				ai_energy = -1
				ai_greed = -1
				ai_compassion = 0.5
				ai_rationality = 0.5
			}
		}
	}

	after = {
		mp_resume_travel_plan = yes
	}
}

agot_danger.0008 = {
type = character_event
	title = agot_danger.0008.title
	desc = agot_danger.0008.desc

	theme = travel_danger

	override_background = { reference = fp3_cave }

	left_portrait = {
		character = root
		animation = throne_room_two_handed_passive_1
	}

	#Get Hide
	option = {
		trigger = {
			has_royal_court = yes
		}
		name = agot_danger.0008.a
		custom_tooltip = agot_danger.0008.a.tt
		hidden_effect = {
			create_artifact_animal_hide_effect = {
				OWNER = root
				HUNTER = root
				LEGENDARY = no
				ANIMAL = flag:bear
			}
		}
	}

	#Get Skull
	option = {
		trigger = {
			has_royal_court = yes
		}
		name = agot_danger.0008.b
		custom_tooltip = agot_danger.0008.b.tt
		hidden_effect = {
			create_artifact_wall_skull_effect = {
				OWNER = root
				HUNTER = root
				LEGENDARY = no
				ANIMAL = flag:bear
			}
		}
	}

	#Get Trinket
	option = {
		name = agot_danger.0008.c
		custom_tooltip = agot_danger.0008.c.tt
		hidden_effect = {
			create_artifact_animal_trinket_effect = {
				OWNER = root
				HUNTER = root
				LEGENDARY = no
				ANIMAL = flag:bear
			}
		}
	}

	after = {
		if = {
			limit = { exists = scope:newly_created_artifact }
			scope:newly_created_artifact = { save_scope_as = this_artifact }
			send_interface_toast = {
				title = artifact.0012.t
				right_icon = scope:newly_created_artifact
				show_as_tooltip = {
					scope:newly_created_artifact = { set_owner = root }
				}
			}
		}
		mp_resume_travel_plan = yes
	}
}

###############
# On Thin Ice # LOCA
###############

agot_danger.0009 = {
	type = character_event
	title = agot_danger.0009.title
	desc = agot_danger.0009.desc
	theme = travel_danger

	left_portrait = {
		character = root
		animation = personality_rational
	}

	right_portrait = {
		character = scope:travel_leader
		animation = personality_bold
	}

	override_background = { reference = agot_taiga_bog }

	trigger = {
		is_available_travelling_adult = yes
		is_location_valid_for_travel_event_on_land = yes
		location = {
			NOT = {
				has_province_modifier = winter_harsh_modifier
			}
		}
		OR = { #BTW counties with rivers
			location.kingdom = title:k_the_ice_lakes
			location.duchy = title:d_uchveseck
			location.duchy = title:d_pale_mountains
			location.duchy = title:d_great_ice_river
			location.duchy = title:d_antler_river
			location.duchy = title:d_keening_ridges
			location.duchy = title:d_auld_groves
			location.duchy = title:d_haunted_forest
			location.duchy = title:d_bleakwater
			location.county = title:c_bone_hummock
			location.county = title:c_riverpelt
			location.county = title:c_still_flow
			location.county = title:c_frozen_gulch
			location.county = title:c_brokenwood
			location.county = title:c_yeager_nest
			location.county = title:c_maulnock_gap
			location.county = title:c_pack_land
		}
		current_travel_plan = {
			exists = travel_leader
		}
	}

	cooldown = { months = 12 }

	immediate = {
		mp_delay_travel_plan = { DAYS = 90 }
		current_travel_plan = {
			travel_leader = { save_scope_as = travel_leader }
		}
		traveler_danger_xp_effect = {
			MIN = 3
			MAX = 6
		}
	}

	option = { #I walk first
		name = agot_danger.0009.a
		custom_tooltip = agot_danger.0009.a.tt
		random_list = {
			50 = {
			custom_tooltip = agot_danger.0009.a.icegood.tt
				send_interface_toast = {
					title = agot_danger.0009.a.icegood.toast
					left_icon = root
				}
			}
			50 = {
				modifier = {
					location = {
						NOT = {
							has_province_modifier = winter_normal_modifier
						}
					}
					add = 20
				}
				random_list = {
					10 = {
						custom_tooltip = agot_danger.0009.a.icebadnope.tt
						agot_is_wintersavvy_traveller_modifier = yes
						send_interface_toast = {
							title = agot_danger.0009.a.icebadnope.toast
							left_icon = root
							current_travel_plan = {
								delay_travel_plan = {
									days = 10
								}
							}
						}
					}
					30 = {
						custom_tooltip = agot_danger.0009.a.icebadfall.tt
						trigger_event = {
							id = agot_danger.0010
						}
					}
				}
			}
		}
		stress_impact = {
			brave = medium_stress_impact_loss
			craven = massive_stress_impact_gain
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 25
				has_trait = arrogant
			}
			modifier = {
				add = 25
				has_trait = brave
			}
			modifier = {
				add = 25
				has_trait = impatient
			}
			modifier = {
				factor = 0
				has_trait = craven
			}
		}
	}

	option = { #Travel leader walks first
		name = agot_danger.0009.b
		custom_tooltip = agot_danger.0009.b.tt
		random_list = {
			50 = {
			custom_tooltip = agot_danger.0009.a.icegood.tt
				send_interface_toast = {
					title = agot_danger.0009.a.icegood.toast
					right_icon = scope:travel_leader
				}
			}
			50 = {
				modifier = {
					location = {
						NOT = {
							has_province_modifier = winter_normal_modifier
						}
					}
					add = 20
				}
				random_list = {
					10 = {
						custom_tooltip = agot_danger.0009.b.icebadnope.tt
						agot_is_wintersavvy_traveller_modifier = yes
						send_interface_toast = {
							title = agot_danger.0009.b.icebadnope.toast
							left_icon = scope:travel_leader
							current_travel_plan = {
								delay_travel_plan = {
									days = 10
								}
							}
						}
					}
					30 = {
						custom_tooltip = agot_danger.0009.b.icebadfall.tt
						trigger_event = {
							id = agot_danger.0011
						}
					}
				}
			}
		}
		stress_impact = {
			brave = medium_stress_impact_gain
			compassionate = medium_stress_impact_gain
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 50
				has_trait = impatient
			}
			modifier = {
				add = 50
				has_trait = callous
			}
			modifier = {
				add = 50
				has_trait = sadistic
			}
			modifier = {
				add = -50
				has_trait = compassionate
			}
		}
	}

	option = { #We pass on the river
		name = agot_danger.0009.c
		custom_tooltip = agot_danger.0009.c.tt
		current_travel_plan = {
			delay_travel_plan = { days = 10 }
			every_entourage_character = {
				limit = {
					OR = {
						has_trait = impatient
						has_trait = arrogant
						has_trait = brave
					}
				}
				add_opinion = {
					target = root
					modifier = angry_opinion
					opinion = -20
				}
			}
		}
		stress_impact = {
			impatient = medium_stress_impact_gain
			brave = medium_stress_impact_gain
		}
		ai_chance = {
			base = 50
			modifier = {
				add = 50
				has_trait = craven
			}
			modifier = {
				add = 50
				has_trait = patient
			}
			modifier = {
				add = -25
				has_trait = brave
			}
			modifier = {
				add = -25
				has_trait = impatient
			}
			modifier = {
				add = -50
				OR = {
					has_trait = callous
					has_trait = sadistic
				}
			}
		}
	}
	after = {
		mp_resume_travel_plan = yes
	}
}

agot_danger.0010 = { #I fall in
	type = character_event
	title = agot_danger.0010.title
	desc = agot_danger.0010.desc
	theme = travel_danger

	left_portrait = {
		character = scope:travel_leader
		animation = shock
	}

	right_portrait = {
		character = root
		animation = throne_room_kneel_1
	}

	override_background = { reference = agot_taiga_bog }

	option = {
		name = agot_danger.0010.a #I save myself
		custom_tooltip = agot_danger.0010.a.tt
		random_list = {
			10 = {
				custom_tooltip = agot_danger.0010.a.swim.tt
				agot_is_tough_traveller_modifier = yes
				send_interface_toast = {
					title = agot_danger.0010.a.toast
					left_icon = root
					add_character_modifier = travel_mild_frostbite_modifier
					current_travel_plan = {
						delay_travel_plan = {
							days = 10
						}
					}
				}
			}
			10 = {
				custom_tooltip = agot_danger.0010.a.sink.tt
				death = {
					death_reason = death_drowned
				}
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 50
				prowess > scope:travel_leader.prowess
			}
			modifier = {
				add = 25
				has_trait = arrogant
			}
			modifier = {
				add = 25
				has_trait = brave
			}
		}
	}

	option = { #help me travel leader
		name = agot_danger.0010.b
		custom_tooltip = agot_danger.0010.b.tt
		scope:travel_leader = {
			random_list = {
				10 = {
					custom_tooltip = agot_danger.0010.b.swim.tt
					agot_is_tough_traveller_modifier = yes
					root = {
						send_interface_toast = {
							title = agot_danger.0010.b.toast
							left_icon = root
							current_travel_plan = {
								delay_travel_plan = {
									days = 10
								}
							}
							add_prestige = medium_prestige_loss
							add_character_modifier = travel_mild_frostbite_modifier
							scope:travel_leader = {
								add_character_modifier = travel_mild_frostbite_modifier
							}
						}
					}
				}
				10 = {
					custom_tooltip = agot_danger.0010.b.sink.tt
					root = {
						death = {
							death_reason = death_drowned
						}
					}
				}
				10 = {
					custom_tooltip = agot_danger.0010.b.bothsink.tt
					root = {
						death = {
							death_reason = death_drowned
						}
					}
					death = {
						death_reason = death_drowned
					}
				}
			}
		}
		stress_impact = {
			stubborn = medium_stress_impact_gain
			arrogant = medium_stress_impact_gain
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 75
				prowess < scope:travel_leader.prowess
			}
			modifier = {
				add = 25
				has_trait = humble
			}
			modifier = {
				add = -25
				has_trait = arrogant
			}
			modifier = {
				add = -25
				has_trait = stubborn
			}
		}
	}
	after = {
		mp_resume_travel_plan = yes
	}
}

agot_danger.0011 = {
	type = character_event
	title = agot_danger.0011.title
	desc = agot_danger.0011.desc
	theme = travel_danger

	left_portrait = {
		character = root
		animation = shock
		triggered_animation = {
			trigger = {
				AND = {
					OR = {
						has_trait = sadistic
						has_trait = callous
					}
					opinion = {
						target = scope:travel_leader
						value < 0
					}
				}
			}
			animation = war_defender
		}
	}

	right_portrait = {
		character = scope:travel_leader
		animation = throne_room_kneel_1
	}

	override_background = { reference = agot_taiga_bog }

	option = { #travel leader helps themselves
		name = agot_danger.0011.a
		custom_tooltip = agot_danger.0011.a.tt
		scope:travel_leader = {
			random_list = {
				10 = {
					custom_tooltip = agot_danger.0011.a.swim.tt
					agot_is_tough_traveller_modifier = yes
					root = {
						send_interface_toast = {
							title = agot_danger.0011.a.swim.toast
							left_icon = scope:travel_leader
							scope:travel_leader = {
								add_character_modifier = travel_mild_frostbite_modifier
							}
							current_travel_plan = {
								delay_travel_plan = {
									days = 10
								}
							}
						}
					}
				}
				10 = {
					custom_tooltip = agot_danger.0011.a.sink.tt
					root = {
						send_interface_toast = {
							title = agot_danger.0011.a.sink.toast
							left_icon = scope:travel_leader
							current_travel_plan = {
								delay_travel_plan = {
									days = 10
								}
							}
							scope:travel_leader = {
								death = {
									death_reason = death_drowned
								}
							}
							every_entourage_character = {
								custom = every_entourage_tt
								limit = {
									NOR = {
										has_trait = callous
										has_trait = sadistic
									}
								}
								add_opinion = {
									target = root
									modifier = hate_opinion
									opinion = -20
								}
							}
						}
					}
				}
			}
		}
		stress_impact = {
			callous = medium_stress_impact_loss
			lazy = medium_stress_impact_loss
			compassionate = major_stress_impact_gain
			brave = major_stress_impact_gain
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 75
				prowess < scope:travel_leader.prowess
			}
			modifier = {
				add = 25
				has_trait = craven
			}
		}
	}

	option = { #I help travel leader
		name = agot_danger.0011.b
		custom_tooltip = agot_danger.0011.b.tt
		random_list = {
			10 = {
				custom_tooltip = agot_danger.0011.b.swim.tt
				agot_is_tough_traveller_modifier = yes
				send_interface_toast = {
					title = agot_danger.0011.b.swim.toast
					left_icon = scope:travel_leader
					scope:travel_leader = {
						add_character_modifier = travel_mild_frostbite_modifier
					}
					current_travel_plan = {
						delay_travel_plan = {
							days = 10
						}
					}
					add_prestige = medium_prestige_gain
				}
			}
			10 = {
				custom_tooltip = agot_danger.0011.b.sink.tt
				send_interface_toast = {
					title = agot_danger.0011.b.sink.toast
					left_icon = scope:travel_leader
					current_travel_plan = {
						delay_travel_plan = {
							days = 10
						}
					}
					scope:travel_leader = {
						death = {
							death_reason = death_drowned
						}
					}
					add_character_modifier = travel_mild_frostbite_modifier
					add_prestige = medium_prestige_loss
				}
			}
			10 = {
				custom_tooltip = agot_danger.0011.b.bothsink.tt
				scope:travel_leader = {
					death = {
						death_reason = death_drowned
					}
				}
				death = {
					death_reason = death_drowned
				}
			}
		}
		stress_impact = {
			brave = medium_stress_impact_loss
			compassionate = medium_stress_impact_loss
			sadistic = medium_stress_impact_gain
			lazy = medium_stress_impact_gain
			craven = massive_stress_impact_gain
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 50
				prowess > scope:travel_leader.prowess
			}
			modifier = {
				add = 25
				has_trait = compassionate
			}
			modifier = {
				add = 25
				has_trait = brave
			}
			modifier = {
				add = -50
				has_trait = callous
			}
			modifier = {
				add = -50
				has_trait = sadistic
			}
		}
	}
	after = {
		mp_resume_travel_plan = yes
	}
}

