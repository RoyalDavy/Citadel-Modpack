namespace = agot_dragon_slaying_events

##################################
# Slay Dragon Effects
##################################

scripted_effect agot_ds_advantage_chance_roll = {
	if = {
		limit = {
			has_character_flag = ds_mirror
		}
		random_list = {
			70 = {
				save_scope_value_as = {
					name = ds_mirror_outcome
					value = flag:failure
				}
			}
			20 = {
				save_scope_value_as = {
					name = ds_mirror_outcome
					value = flag:some_success
				}
			}
			10 = {
				save_scope_value_as = {
					name = ds_mirror_outcome
					value = flag:major_success
				}
			}
		}
	}
	else_if = {
		limit = {
			has_character_flag = ds_seal
		}
		random_list = {
			1 = {
				# Dragon starves
				add_character_flag = ds_seal_starved
			}
			9 = {
				#Dragon isn't here
				add_character_flag = ds_seal_elsewhere
			}
			20 = {
				# A surprise fire
				add_character_flag = ds_seal_fire
			}
			70 = {
				# Dragon was away, ambushed!
				add_character_flag = ds_seal_away
			}
		}
	}
	else_if = {
		limit = {
			has_character_flag = ds_feed
		}
		random = {
			chance = 30
			add_character_flag = ds_feed_success
		}
	}
}

scripted_effect agot_dragon_slay_choose_range_move_effect = {
	if = {
		limit = {
			exists = scope:dragon_current_move
		}

		scope:dragon = {
			set_variable = {
				name = dragon_last_move
				value = scope:dragon_current_move
			}
		}
	}

	random_list = {
		#Breath fire
		100 = {
			trigger = {
				NOT = { scope:dragon.var:dragon_last_move ?= flag:burn }
			}
			save_scope_value_as = {
				name = dragon_current_move
				value = flag:burn
			}
			modifier = { # Sometimes starts with this move
				trigger = { scope:initiator = scope:dragon }
				add = 900
			}
			modifier = {
				trigger = { has_trait = dragon_aggressive }
				add = 20
			}
		}
		# Shake Cave / roar
		40 = {
			trigger = {
				NOT = { scope:dragon.var:dragon_last_move ?= flag:shake_cave }
				has_character_flag = can_shake
				scope:dragon.ds_combat_effectiveness >= level_two_dragon_size
			}
			save_scope_value_as = {
				name = dragon_current_move
				value = flag:shake_cave
			}
			modifier = {
				trigger = {
					OR = {
						has_trait = dragon_defiant
						has_trait = dragon_aggressive
					}
				}
				add = 20
			}
		}
		# Guard - allows the player to approach entirely, but empowers follow up attacks from the dragon
		20 = {
			trigger = {
				scope:proximity ?= 2
				NOT = { scope:dragon.var:dragon_last_move ?= flag:guard }
			}
			save_scope_value_as = {
				name = dragon_current_move
				value = flag:guard
			}
			modifier = {
				trigger = {
					OR = {
						has_trait = dragon_calculating
						has_trait = dragon_skittish
						has_trait = dragon_restrained
					}
				}
				add = 20
			}
		}
		# Lunge - closes gap, makes a more dangerous bite attack
		40 = {
			trigger = {
				NOT = { scope:dragon.var:dragon_last_move ?= flag:lunge }
			}
			save_scope_value_as = {
				name = dragon_current_move
				value = flag:lunge
			}
			modifier = {
				trigger = {
					OR = {
						has_trait = dragon_aggressive
						has_trait = dragon_bloodthirsty
						has_trait = dragon_voracious
					}
				}
				add = 20
			}
		}
	}
}

scripted_effect agot_dragon_slay_choose_close_move_effect = {
	if = {
		limit = {
			exists = scope:dragon_current_move
		}

		scope:dragon = {
			set_variable = {
				name = dragon_last_move
				value = scope:dragon_current_move
			}
		}
	}

	random_list = {
		# Bite
		1 = {
			save_scope_value_as = {
				name = dragon_current_move
				value = flag:bite
			}
		}
		# Tail
		1 = {
			trigger = {
				scope:dragon.ds_combat_effectiveness >= level_two_dragon_size
			}
			save_scope_value_as = {
				name = dragon_current_move
				value = flag:tail
			}
		}
	}
}

scripted_effect agot_dragon_slay_choose_finisher_move_effect = {
	if = {
		limit = {
			exists = scope:dragon_current_move
		}

		scope:dragon = {
			set_variable = {
				name = dragon_last_move
				value = scope:dragon_current_move
			}
		}
	}

	random_list = {
		# "crushcrushcrush" said Paramore
		80 = {
			trigger = {
				scope:human_current_move = flag:dive
			}
			save_scope_value_as = {
				name = dragon_current_move
				value = flag:crush
			}
		}
		# These moves don't really differ, just for text difference
		# Tail
		40 = {
			trigger = {
				scope:human_current_move = flag:climb
				scope:dragon.ds_combat_effectiveness >= level_two_dragon_size
			}
			save_scope_value_as = {
				name = dragon_current_move
				value = flag:tail
			}
		}
		# Shake
		40 = {
			trigger = {
				scope:human_current_move = flag:climb
			}
			save_scope_value_as = {
				name = dragon_current_move
				value = flag:shake
			}
		}
		# Fly?
		20 = {
			trigger = {
				has_character_flag = can_fly
			}
			save_scope_value_as = {
				name = dragon_current_move
				value = flag:fly
			}
			modifier = {
				add = 20
				trigger = {
					OR = {
						has_trait = dragon_skittish
						has_trait = dragon_friendly
					}
				}
			}
			modifier = {
				add = -20
				trigger = {
					OR = {
						has_trait = dragon_bloodthirsty
						has_trait = dragon_aggressive
					}
				}
			}
		}
	}
}

scripted_trigger has_extreme_wounds = {
	OR = {
		has_trait = wounded_3
		AND = {
			has_trait = one_eyed
			OR = {
				has_trait = wounded_2
				has_trait = maimed
				has_trait = crippled
				has_trait = one_legged
			}
		}
		AND = {
			has_trait = one_legged
			OR = {
				has_trait = wounded_1
				has_trait = wounded_2
				has_trait = maimed
				has_trait = crippled
			}
		}
		AND = {
			has_trait = maimed
			OR = {
				has_trait = wounded_1
				has_trait = wounded_2
				has_trait = crippled
			}
		}
		AND = {
			has_trait = crippled
			OR = {
				has_trait = wounded_1
				has_trait = wounded_2
			}
		}
	}
}

scripted_trigger has_severe_wounds = {
	OR = {
		has_trait = wounded_2
		has_trait = wounded_3
		has_trait = one_legged
		has_trait = maimed
		has_trait = crippled
		AND = { # If you're only missing an eye, that's hardly a death sentence
			has_trait = one_eyed
			OR = {
				has_trait = wounded_1
				has_trait = wounded_2
				has_trait = wounded_3
				has_trait = one_legged
				has_trait = maimed
			}
		}
	}
}

##################################################
# Slay Dragon Intro Events
##################################################

# You find the dragon's lair
agot_dragon_slaying_events.0001 = {
	type = character_event
	title = agot_dragon_slaying_events.0001.t
	window = dragon_character_event
	desc = {
		first_valid = { # Triggered desc for rare variants
			triggered_desc = {
				trigger = {
					scope:dragon.location = { geographical_region = world_westeros_the_neck }
				}
				desc = agot_dragon_slaying_events.0001.neck
			}
			triggered_desc = {
				trigger = {
					scope:dragon.location = { geographical_region = world_westeros_north_of_the_twins }
				}
				desc = agot_dragon_slaying_events.0001.north
			}
			triggered_desc = {
				trigger = {
					scope:dragon.location = { geographical_region = world_westeros_the_vale }
				}
				desc = agot_dragon_slaying_events.0001.vale
			}
			triggered_desc = {
				trigger = {
					scope:dragon.location = { geographical_region = world_westeros_dorne }
				}
				desc = agot_dragon_slaying_events.0001.dorne
			}
			desc = { # Randomized fallback
				random_valid = {
					desc = agot_dragon_slaying_events.0001.danwell
					desc = agot_dragon_slaying_events.0001.roselyse
					desc = agot_dragon_slaying_events.0001.aemmly
				}
			}
		}
		triggered_desc = {
			trigger = {
				exists = scope:vengeance_candidate
			}
			desc = agot_dragon_slaying_events.0001.desc_vengeance
		}
		desc = agot_dragon_slaying_events.0001.desc_plan
	}

	theme = dragon

	override_background = { # Everywhere else
		trigger = {
			scope:dragon.location = {
				NOR = {
					geographical_region = world_westeros_north_of_the_twins
					geographical_region = world_westeros_dorne
					geographical_region = world_westeros_the_vale
				}
			}
		}
		reference = ep2_hunt_forest_cave
	}

	override_background = { # North of Neck
		trigger = {
			scope:dragon.location = {
				geographical_region = world_westeros_north_of_the_twins
				NOT = { geographical_region = world_westeros_the_neck }
			}
		}
		reference = ep2_hunt_snowy_forest
	}

	override_background = { # The Neck
		trigger = {
			scope:dragon.location = {
				geographical_region = world_westeros_the_neck
			}
		}
		reference = ep2_hunt_foggy_forest
	}

	override_background = { # The Vale
		trigger = {
			scope:dragon.location = {
				geographical_region = world_westeros_the_vale
			}
		}
		reference = wilderness_mountains
	}

	override_background = { # Dorne
		trigger = {
			scope:dragon.location = {
				geographical_region = world_westeros_dorne
			}
		}
		reference = drylands
	}

	right_portrait = {
		character = root
		scripted_animation = duel_wield_weapon
	}

	lower_center_portrait = {
		trigger = {
			exists = scope:vengeance_candidate
		}
		character = scope:vengeance_candidate
	}

	trigger = {
		scope:dragon = { is_alive = yes }
	}

	immediate = {
		add_character_flag = single_combat_duel_armor

		if = {
			limit = {
				intrigue >= 20
				intrigue > stewardship
				intrigue > learning
			}
			save_scope_value_as = {
				name = special_option
				value = flag:poison
			}
		}
		else_if = {
			limit = {
				learning >= 20
				intrigue > stewardship
				intrigue > intrigue
			}
			save_scope_value_as = {
				name = special_option
				value = flag:seal
			}
		}
		else_if = {
			limit = {
				learning >= 10
				prowess >= 10
				learning > stewardship
				learning > intrigue
			}
			save_scope_value_as = {
				name = special_option
				value = flag:mirror
			}
		}
		else_if = {
			limit = {
				stewardship >= 15
				stewardship > learning
				stewardship > intrigue
			}
			save_scope_value_as = {
				name = special_option
				value = flag:feed
			}
		}
		else_if = { # There's a tie, let it pick any applicable option
			random_list = {
				1 = {
					trigger = {
						intrigue >= 20
					}
					save_scope_value_as = {
						name = special_option
						value = flag:poison
					}
				}
				1 = {
					trigger = {
						learning >= 20
					}
					save_scope_value_as = {
						name = special_option
						value = flag:seal
					}
				}
				1 = {
					trigger = {
						learning >= 10
						prowess >= 10
					}
					save_scope_value_as = {
						name = special_option
						value = flag:mirror
					}
				}
				1 = {
					trigger = {
						stewardship >= 15
					}
					save_scope_value_as = {
						name = special_option
						value = flag:feed
					}
				}
			}
		}
	}

	# only one special option will ever be available

	# Poison your blade
	option = {
		name = agot_dragon_slaying_events.0001.poison
		flavor = agot_dragon_slaying_events.0001.poison.tt

		trigger = {
			intrigue >= 20
			NOT = { has_trait = brave }
			scope:special_option ?= flag:poison
		}
		add_character_flag = ds_poison
		agot_ds_advantage_chance_roll = yes

		if = {
			limit = {
				scope:dragon.location = {
					geographical_region = world_westeros_north_of_the_twins
					NOT = { geographical_region = world_westeros_the_neck }
				}
			}

			agot_configure_start_dragon_slay_effect = {
				INITIATOR = scope:human
				HUMAN = scope:human
				DRAGON = scope:dragon
				PROXIMITY = 2
				LOCALE = agot_icecave # Should be a cave
				INVALIDATION_EVENT = single_combat.1006
			}

		}
		else = {
			agot_configure_start_dragon_slay_effect = {
				INITIATOR = scope:human
				HUMAN = scope:human
				DRAGON = scope:dragon
				PROXIMITY = 2
				LOCALE = cave_interior # Should be a cave
				INVALIDATION_EVENT = single_combat.1006
			}
		}

		ai_chance = {
			base = 1
		}
	}

	# Mirror Shield
	option = {
		name = agot_dragon_slaying_events.0001.mirror
		flavor = agot_dragon_slaying_events.0001.mirror.tt

		trigger = {
			prowess >= 10
			learning >= 10
			scope:special_option ?= flag:mirror
		}
		add_character_flag = ds_mirror
		agot_ds_advantage_chance_roll = yes
		trigger_event = agot_dragon_slaying_events.0004

		ai_chance = {
			base = 1
		}
	}

	# Seal the cave entrance
	option = {
		name = agot_dragon_slaying_events.0001.seal
		flavor = agot_dragon_slaying_events.0001.seal.tt
		trigger = {
			learning >= 20
			scope:special_option ?= flag:seal
		}
		add_character_flag = ds_seal
		agot_ds_advantage_chance_roll = yes
		trigger_event = agot_dragon_slaying_events.0005
		if = {
			limit = {
				has_trait = brave
			}
			add_stress = medium_stress_gain
		}

		ai_chance = {
			base = 1
		}
	}

	# Feed the dragon
	option = {
		name = agot_dragon_slaying_events.0001.feed
		flavor = agot_dragon_slaying_events.0001.feed.tt
		trigger = {
			stewardship >= 15
			scope:special_option ?= flag:feed
		}
		add_character_flag = ds_feed
		agot_ds_advantage_chance_roll = yes
		remove_short_term_gold = medium_gold_value
		trigger_event = agot_dragon_slaying_events.0006

		if = {
			limit = {
				has_trait = brave
			}
			add_stress = medium_stress_gain
		}

		ai_chance = {
			base = 1
		}
	}

	# Confront the dragon
	option = {
		name = agot_dragon_slaying_events.0001.confront
		flavor = agot_dragon_slaying_events.0001.confront.tt

		if = {
			limit = {
				scope:dragon.location = {
					geographical_region = world_westeros_north_of_the_twins
					NOT = { geographical_region = world_westeros_the_neck }
				}
			}

			agot_configure_start_dragon_slay_effect = {
				INITIATOR = scope:human
				HUMAN = scope:human
				DRAGON = scope:dragon
				PROXIMITY = 2
				LOCALE = agot_icecave
				INVALIDATION_EVENT = single_combat.1006
			}

		}
		else = {
			agot_configure_start_dragon_slay_effect = {
				INITIATOR = scope:human
				HUMAN = scope:human
				DRAGON = scope:dragon
				PROXIMITY = 2
				LOCALE = cave_interior
				INVALIDATION_EVENT = single_combat.1006
			}
		}

		ai_chance = {
			base = 1
			modifier = {
				exists = scope:special_option
				factor = 0
			}
		}
	}

	# Cancel the fight
	option = {
		name = agot_dragon_slaying_events.0001.cancel

		add_character_flag = {flag = ds_cooldown days = 90 }

		ai_chance = { # Ai won't cancel a fight
			base = 0
		}
	}

	after = {
		if = {
			limit = {
				NOT = { has_character_flag = ds_cooldown }
			}
			if = {
				limit = {
					NOT = { has_character_flag = in_dragon_combat }
				}
				add_character_flag = in_dragon_combat
			}
			scope:dragon = {
				if = {
					limit = {
						NOT = { has_character_flag = in_dragon_combat }
					}

					add_character_flag = in_dragon_combat
				}
			}
		}
		else = {
			agot_ds_clean_up_effect = yes
		}
	}
}

# The dragon finds you
agot_dragon_slaying_events.0002 = {
	type = character_event
	title = agot_dragon_slaying_events.0002.t
	window = dragon_character_event
	desc = agot_dragon_slaying_events.0002.desc
	theme = dragon

	override_background = { reference = wilderness_scope }

	right_portrait = {
		character = scope:dragon
		animation = dragon_main
		camera = camera_dragon_event_standing

		#Add this so dragon fits within event window
		outfit_tags = { linear_camera_zoom }
	}

	left_portrait = {
		character = root
		animation = fear
	}

	trigger = {
		scope:dragon = { is_alive = yes }
	}

	immediate = {
		agot_ds_compare_skills_effect = { DRAGON = scope:dragon HUMAN = root }
	}

	option = { # Fight
		name = agot_dragon_slaying_events.0002.fight
		flavor = agot_dragon_slaying_events.0002.fight.tt

		agot_configure_start_dragon_slay_effect = {
			INITIATOR = scope:dragon
			HUMAN = scope:human
			DRAGON = scope:dragon
			PROXIMITY = 2
			LOCALE = wilderness_scope # Should be a field or whatever
			INVALIDATION_EVENT = single_combat.1006
		}

		ai_chance = {
			base = 50

			ai_value_modifier = {
				ai_boldness = 1
			}
		}
	}

	option = { # Run
		name = agot_dragon_slaying_events.0002.run
		flavor = agot_dragon_slaying_events.0002.run.tt

		remove_character_flag = in_dragon_combat
		scope:dragon = { remove_character_flag = in_dragon_combat }

		add_character_flag = { flag = ds_cooldown days = 90 }

		if = {
			limit = {
				has_trait = brave
			}
			add_stress = medium_stress_gain
		}

		random_list = {
			20 = { # Unscathed
				custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
				# Full boar and into the abyss
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = { # You're boned
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				# Increase chances of no consequences
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 20
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 25
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			35 = { # Burns but live - unless this tops your burns
				custom_tooltip = {
					text = agot_dragon_slaying_events.0100.tt.burn_major
					agot_ds_burn_effect = { MIN = 30 MAX = 60 }
				}
				# Probably not necessary, just doing this to balance at 100
				modifier = { # The minus shouldn't alarm, this is just a full burn now :)
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}
				# The chances of "minor" burns I guess will stay the same for good skill
			}
			45 = { # Full burn, death
				custom_tooltip = {
					text = agot_dragon_slaying_events.0100.tt.burn_death
					agot_ds_burn_effect = { MIN = 100 MAX = 100 }
				}
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = 10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = 15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = 20
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = 25
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				# For the human, decrease chance of burning to death
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -20
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -25
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
		}

		if = {
			limit = {
				has_character_flag = ds_death
			}

			death = {
				death_reason = death_dragon_fire
				killer = scope:dragon
			}
		}

		ai_chance = {
			base = 50

			ai_value_modifier = {
				ai_boldness = -1
			}
		}
	}
}

# You cannot find the dragon or the lair
agot_dragon_slaying_events.0003 = {
	type = character_event
	title = agot_dragon_slaying_events.0003.t
	window = dragon_character_event
	desc = agot_dragon_slaying_events.0003.desc

	theme = dragon

	override_background = { reference = wilderness_scope }

	right_portrait = {
		character = root
		animation = disapproval
	}

	trigger = {
		scope:dragon = { is_alive = yes }
	}

	immediate = {
		remove_character_flag = in_dragon_combat
		scope:dragon = { remove_character_flag = in_dragon_combat }

		add_character_flag = { flag = ds_cooldown days = 90 }
	}

	option = { # Time to return home
		name = agot_dragon_slaying_events.0003.a
	}

}

# Mirror Shield
agot_dragon_slaying_events.0004 = {
	type = character_event
	title = agot_dragon_slaying_events.0004.t
	window = dragon_duel_event
	theme = dragon

	override_background = {
		trigger = {
			scope:dragon.location = {
				OR = {
					NOT = { geographical_region = world_westeros_north_of_the_twins }
					geographical_region = world_westeros_the_neck
				}
			}
		}
		reference = fp3_cave
	}

	override_background = {
		trigger = {
			scope:dragon.location = {
				geographical_region = world_westeros_north_of_the_twins
				NOT = { geographical_region = world_westeros_the_neck }
			}
		}
		reference = agot_icecave
	}

	left_portrait = {
		character = scope:human
		camera = camera_slay_dragon_human_event_left
		scripted_animation = duel_wield_weapon
	}
	right_portrait = {
		character = scope:dragon
		animation = dragon_main
		camera = camera_dragon_facing_human

		triggered_outfit = {
			trigger = {
				scope:dragon = { level_ten_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_nine_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_eight_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_seven_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5 }
		}
		triggered_outfit = { # VHAGAR
			trigger = {
				scope:dragon = { level_six_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_five_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.0 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_four_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.9 }
		}
		triggered_outfit = { # MELEYS
			trigger = {
				scope:dragon = { level_three_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.8 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_two_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.5 }
		}
		triggered_outfit = { # SYRAX
			trigger = {
				scope:dragon = { level_one_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.4 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_zero_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.7 }
		}
		#End Dynamic Camera Zoom
	}

	immediate = {
		character:dragon_urrax = {
			save_scope_as = urrax
		}
		character:Heroes_25 = {
			save_scope_as = serwyn
		}
	}

	desc = {
		desc = agot_dragon_slaying_events.0004.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:ds_mirror_outcome ?= flag:some_success
				}
				desc = agot_dragon_slaying_events.0004.desc.some_success
			}
			triggered_desc = {
				trigger = {
					scope:ds_mirror_outcome ?= flag:major_success
				}
				desc = agot_dragon_slaying_events.0004.desc.major_success
			}
			desc = agot_dragon_slaying_events.0004.desc_failure
		}
	}

	option = {
		name = agot_dragon_slaying_events.0004.a
		if = {
			limit = {
				scope:ds_mirror_outcome = flag:major_success
			}

			if = {
				limit = {
					scope:dragon.location = {
						geographical_region = world_westeros_north_of_the_twins
						NOT = { geographical_region = world_westeros_the_neck }
					}
				}

				agot_configure_start_dragon_slay_effect = {
					INITIATOR = scope:human
					HUMAN = scope:human
					DRAGON = scope:dragon
					PROXIMITY = 0
					LOCALE = agot_icecave # Should be a cave
					INVALIDATION_EVENT = single_combat.1006
				}

			}
			else = {
				agot_configure_start_dragon_slay_effect = {
					INITIATOR = scope:human
					HUMAN = scope:human
					DRAGON = scope:dragon
					PROXIMITY = 0
					LOCALE = cave_interior # Should be a cave
					INVALIDATION_EVENT = single_combat.1006
				}
			}
		}
		else_if = {
			limit = {
				scope:ds_mirror_outcome = flag:some_success
			}

			if = {
				limit = {
					scope:dragon.location = {
						geographical_region = world_westeros_north_of_the_twins
						NOT = { geographical_region = world_westeros_the_neck }
					}
				}

				agot_configure_start_dragon_slay_effect = {
					INITIATOR = scope:human
					HUMAN = scope:human
					DRAGON = scope:dragon
					PROXIMITY = 1
					LOCALE = agot_icecave # Should be a cave
					INVALIDATION_EVENT = single_combat.1006
				}

			}
			else = {
				agot_configure_start_dragon_slay_effect = {
					INITIATOR = scope:human
					HUMAN = scope:human
					DRAGON = scope:dragon
					PROXIMITY = 1
					LOCALE = cave_interior # Should be a cave
					INVALIDATION_EVENT = single_combat.1006
				}
			}
		}
		else = {
			if = {
				limit = {
					scope:dragon.location = {
						geographical_region = world_westeros_north_of_the_twins
						NOT = { geographical_region = world_westeros_the_neck }
					}
				}

				agot_configure_start_dragon_slay_effect = {
					INITIATOR = scope:human
					HUMAN = scope:human
					DRAGON = scope:dragon
					PROXIMITY = 2
					LOCALE = agot_icecave # Should be a cave
					INVALIDATION_EVENT = single_combat.1006
				}

			}
			else = {
				agot_configure_start_dragon_slay_effect = {
					INITIATOR = scope:human
					HUMAN = scope:human
					DRAGON = scope:dragon
					PROXIMITY = 2
					LOCALE = cave_interior # Should be a cave
					INVALIDATION_EVENT = single_combat.1006
				}
			}
		}
	}
}

# Seal the cave
agot_dragon_slaying_events.0005 = {
	type = character_event
	title = agot_dragon_slaying_events.0005.t
	window = dragon_character_event
	desc = {
		desc = agot_dragon_slaying_events.0005.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = ds_seal_starved
				}
				desc = agot_dragon_slaying_events.0005.desc.starved
			}
			triggered_desc = {
				trigger = {
					has_character_flag = ds_seal_elsewhere
				}
				desc = agot_dragon_slaying_events.0005.desc.elsewhere
			}
			triggered_desc = {
				trigger = {
					has_character_flag = ds_seal_fire
				}
				desc = {
					triggered_desc = {
						trigger = {
							has_trait = impatient
						}
						desc = agot_dragon_slaying_events.0005.desc.fire.impatient
					}
					desc = agot_dragon_slaying_events.0005.desc.fire
					desc = agot_dragon_slaying_events.0005.desc.deadpeasant
				}
			}
			desc = {
				desc = agot_dragon_slaying_events.0005.desc.away
				desc = agot_dragon_slaying_events.0005.desc.deadpeasant
			}
		}
	}

	theme = dragon

	override_background = { # Everywhere else
		trigger = {
			scope:dragon.location = {
				NOR = {
					geographical_region = world_westeros_north_of_the_twins
					geographical_region = world_westeros_dorne
					geographical_region = world_westeros_the_vale
				}
			}
		}
		reference = ep2_hunt_forest_cave
	}

	override_background = { # North of Neck
		trigger = {
			scope:dragon.location = {
				geographical_region = world_westeros_north_of_the_twins
				NOT = { geographical_region = world_westeros_the_neck }
			}
		}
		reference = ep2_hunt_snowy_forest
	}

	override_background = { # The Neck
		trigger = {
			scope:dragon.location = {
				geographical_region = world_westeros_the_neck
			}
		}
		reference = ep2_hunt_foggy_forest
	}

	override_background = { # The Vale
		trigger = {
			scope:dragon.location = {
				geographical_region = world_westeros_the_vale
			}
		}
		reference = wilderness_mountains
	}

	override_background = { # Dorne
		trigger = {
			scope:dragon.location = {
				geographical_region = world_westeros_dorne
			}
		}
		reference = drylands
	}

	widgets = {
		widget = {
			is_shown = {
				OR = {
					has_character_flag = ds_seal_away
					has_character_flag = ds_seal_fire
				}
			}
			gui = "agot_shader_event_sparks"
			container = "agot_shader_event_foreground"
		}
		widget = {
			is_shown = {
				OR = {
					has_character_flag = ds_seal_away
					has_character_flag = ds_seal_fire
				}
			}
			gui = "agot_shader_event_fire"
			container = "agot_shader_event_background"
		}
	}

	lower_center_portrait ={
		trigger = {
			exists = scope:peasant
		}
		character = scope:peasant
		animation = idle
	}

	left_portrait = {
		character = root
		scripted_animation = {
			triggered_animation = {
				trigger = {
					has_character_flag = ds_seal_away
				}
				animation = anger
			}
			#Fallback
			scripted_animation = duel_wield_weapon
		}
	}

	right_portrait = {
		character = scope:dragon
		animation = dragon_main
		camera = camera_dragon_facing_human

		triggered_outfit = {
			trigger = {
				scope:dragon = { level_ten_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_nine_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_eight_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_seven_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5 }
		}
		triggered_outfit = { # VHAGAR
			trigger = {
				scope:dragon = { level_six_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_five_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.0 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_four_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.9 }
		}
		triggered_outfit = { # MELEYS
			trigger = {
				scope:dragon = { level_three_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.8 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_two_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.5 }
		}
		triggered_outfit = { # SYRAX
			trigger = {
				scope:dragon = { level_one_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.4 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_zero_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.7 }
		}
		#End Dynamic Camera Zoom
	}

	immediate = {
		if = {
			limit = {
				OR = {
					has_character_flag = ds_seal_fire
					has_character_flag = ds_seal_away
				}
			}

			play_music_cue = CK3AGOT_dragon_burn_holding
			create_character = {
				template = generic_peasant_character
				gender_female_chance = root_soldier_female_chance
				location = root.location
				culture = root.location.culture
				faith = root.location.faith
				dynasty = none
				save_scope_as = peasant
			}

			scope:peasant = {
				add_trait = burned
				death = {
					death_reason = death_burned
					killer = scope:dragon
				}
			}
		}
		else_if = {
			limit = {
				has_character_flag = ds_seal_starved
			}

			scope:dragon = { # Wink wink
				death = {
					death_reason = death_dragon_slain
					killer = scope:human
				}
			}
		}
	}

	option = {
		trigger = {
			has_character_flag = ds_seal_starved
		}
		name = agot_dragon_slaying_events.0005.starved
		flavor = agot_dragon_slaying_events.0005.starved.tt

		# Wink wink
		add_trait = dragonslayer
		give_nickname = nick_the_dragonslayer
		gain_legitimizing_legend_seed_tooltip_effect = yes
		hidden_effect = { legend_seed_great_deed_dynasty_effect = yes }

		if = {
			limit = {
				is_acclaimed = yes
			}
			accolade = {
				add_glory = major_glory_gain
			}
		}

		create_character_memory = {
			type = agot_slayed_dragon
			participants = { slayed_dragon = scope:dragon }
		}

		agot_ds_clean_up_effect = yes
		every_player = {
			limit = {
				NOT = { this = root }
			}
			trigger_event = {
				id = agot_dragon_slaying_events.0112
				days = 1
			}
		}
	}

	option = {
		trigger = {
			has_character_flag = ds_seal_elsewhere
		}
		name = agot_dragon_slaying_events.0005.elsewhere

		add_character_flag = { flag = recently_fought_dragon years = 1 }
	}

	option = {
		trigger = {
			has_character_flag = ds_seal_fire
		}
		name = agot_dragon_slaying_events.0005.d
		flavor = agot_dragon_slaying_events.0005.d.tt
	}

	option = {
		trigger = {
			has_character_flag = ds_seal_away
		}
		name = agot_dragon_slaying_events.0005.d
		flavor = agot_dragon_slaying_events.0005.d.tt
	}

	after = {
		if = {
			limit = {
				NOT = {
					has_character_flag = ds_seal_starved
					has_character_flag = ds_seal_elsewhere
				}
			}

			if = {
				limit = {
					scope:dragon.location = {
						geographical_region = world_westeros_north_of_the_twins
						NOT = { geographical_region = world_westeros_the_neck }
					}
				}

				agot_configure_start_dragon_slay_effect = {
					INITIATOR = scope:human
					HUMAN = scope:human
					DRAGON = scope:dragon
					PROXIMITY = 2
					LOCALE = agot_icecave # Should be a cave
					INVALIDATION_EVENT = single_combat.1006
				}

			}
			else = {
				agot_configure_start_dragon_slay_effect = {
					INITIATOR = scope:human
					HUMAN = scope:human
					DRAGON = scope:dragon
					PROXIMITY = 2
					LOCALE = cave_exterior # Should be a cave
					INVALIDATION_EVENT = single_combat.1006
				}
			}
		}
	}
}

# Feed the dragon
agot_dragon_slaying_events.0006 = {
	type = character_event
	title = agot_dragon_slaying_events.0006.t
	window = dragon_character_event
	desc = {
		desc = agot_dragon_slaying_events.0006.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = ds_feed_success
				}
				desc = agot_dragon_slaying_events.0006.desc.success
			}
			desc = agot_dragon_slaying_events.0006.desc.fail
		}
	}

	theme = dragon

	override_background = {
		trigger = {
			scope:dragon.location = {
				OR = {
					NOT = { geographical_region = world_westeros_north_of_the_twins }
					geographical_region = world_westeros_the_neck
				}
			}
		}
		reference = fp3_cave
	}

	override_background = {
		trigger = {
			scope:dragon.location = {
				geographical_region = world_westeros_north_of_the_twins
				NOT = { geographical_region = world_westeros_the_neck }
			}
		}
		reference = agot_icecave
	}

	left_portrait = {
		character = root
		scripted_animation = duel_wield_weapon
	}

	right_portrait = {
		character = scope:dragon
		animation = dragon_main
		camera = camera_dragon_event_standing

		#Add this so dragon fits within event window
		outfit_tags = { linear_camera_zoom }
	}

	immediate = {

	}

	option = {
		name = agot_dragon_slaying_events.0006.a

		if = {
			limit = {
				has_character_flag = ds_feed_success
			}

			if = {
				limit = {
					scope:dragon.location = {
						geographical_region = world_westeros_north_of_the_twins
						NOT = { geographical_region = world_westeros_the_neck }
					}
				}

				agot_configure_start_dragon_slay_effect = {
					INITIATOR = scope:human
					HUMAN = scope:human
					DRAGON = scope:dragon
					PROXIMITY = 0
					LOCALE = agot_icecave # Should be a cave
					INVALIDATION_EVENT = single_combat.1006
				}

			}
			else = {
				agot_configure_start_dragon_slay_effect = {
					INITIATOR = scope:human
					HUMAN = scope:human
					DRAGON = scope:dragon
					PROXIMITY = 0
					LOCALE = cave_interior # Should be a cave
					INVALIDATION_EVENT = single_combat.1006
				}
			}
		}
		else = {
			if = {
				limit = {
					scope:dragon.location = {
						geographical_region = world_westeros_north_of_the_twins
						NOT = { geographical_region = world_westeros_the_neck }
					}
				}

				agot_configure_start_dragon_slay_effect = {
					INITIATOR = scope:human
					HUMAN = scope:human
					DRAGON = scope:dragon
					PROXIMITY = 2
					LOCALE = agot_icecave # Should be a cave
					INVALIDATION_EVENT = single_combat.1006
				}

			}
			else = {
				agot_configure_start_dragon_slay_effect = {
					INITIATOR = scope:human
					HUMAN = scope:human
					DRAGON = scope:dragon
					PROXIMITY = 2
					LOCALE = cave_interior # Should be a cave
					INVALIDATION_EVENT = single_combat.1006
				}
			}
		}
	}
}

##################################
# Slay Dragon Combat Events
##################################

# Player must get closer to the dragon - skill challenge
agot_dragon_slaying_events.0100 = {

	type = character_event
	title = agot_dragon_slaying_events.0100.t
	window = dragon_duel_event #dragon_character_event
	desc = {
		triggered_desc = { # For Proximity 2
			trigger = {
				scope:proximity = 2
			}
			desc = {
				random_valid = { # Intro
					desc = agot_dragon_slaying_events.0100.desc.intro1
					desc = agot_dragon_slaying_events.0100.desc.intro2
					desc = agot_dragon_slaying_events.0100.desc.intro3
					desc = agot_dragon_slaying_events.0100.desc.intro4
				}
				random_valid = { # Mid
					desc = agot_dragon_slaying_events.0100.desc.mid1
					desc = agot_dragon_slaying_events.0100.desc.mid2
					desc = agot_dragon_slaying_events.0100.desc.mid3
				}
				triggered_desc = { # If player has poised blade
					trigger = {
						has_character_flag = ds_poison
					}
					desc = agot_dragon_slaying_events.0100.desc.intro.poison
				}
				random_valid = { # Ending
					desc = agot_dragon_slaying_events.0100.desc.ending1
					desc = agot_dragon_slaying_events.0100.desc.ending2
					triggered_desc = {
						trigger = { has_trait = brave }
						desc = agot_dragon_slaying_events.0100.desc.ending3
					}
				}
				desc = agot_dragon_slaying_events.0100.desc.get_closer
			}
		}
		triggered_desc = { # Dragon's Last Move
			trigger = { exists = scope:dragon.var:dragon_last_move }
			desc = {
				first_valid = {
					triggered_desc = {
						trigger = { scope:dragon.var:dragon_last_move = flag:burn }
						desc = {
							random_valid = {
								desc = agot_dragon_slaying_events.0100.desc.last_move_burn1
								desc = agot_dragon_slaying_events.0100.desc.last_move_burn2
								desc = agot_dragon_slaying_events.0100.desc.last_move_burn3
							}
						}
					}
					triggered_desc = {
						trigger = { scope:dragon.var:dragon_last_move = flag:shake_cave }
						desc = agot_dragon_slaying_events.0100.desc.last_move_shake_cave
					}
					triggered_desc = {
						trigger = { scope:dragon.var:dragon_last_move = flag:guard }
						desc = {
							first_valid = {
								triggered_desc = {
									trigger = { has_character_flag = sneak_attack }
									desc = agot_dragon_slaying_events.0100.desc.last_move_sneak_attack
								}
								triggered_desc = {
									trigger = { has_character_flag = guarded_attack }
									desc = agot_dragon_slaying_events.0100.desc.last_move_guarded_attack
								}
								desc = agot_dragon_slaying_events.0100.desc.last_move_guard
							}
						}
					}
				}
			}
		}
		triggered_desc = { # For Proximity 1, either its own intro or another prompt forward
			trigger = {
				scope:proximity = 1
			}
			desc = {
				first_valid = {
					triggered_desc = {
						trigger = { NOT = { exists = scope:dragon.var:dragon_last_move } }
						desc = agot_dragon_slaying_events.0100.desc.close_intro
					}
					desc = agot_dragon_slaying_events.0100.desc.get_even_closer
				}
			}
		}
		first_valid = { # Dragon's Next Move
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:burn }
				desc = agot_dragon_slaying_events.0100.desc.current_move_burn
			}
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:shake_cave }
				desc = agot_dragon_slaying_events.0100.desc.current_move_shake_cave
			}
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:guard }
				desc = agot_dragon_slaying_events.0100.desc.current_move_guard
			}
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:lunge }
				desc = agot_dragon_slaying_events.0100.desc.current_move_lunge
			}
		}
	}

	theme = dragon

	# Background Logic
	override_background = {
		trigger = { scope:locale = flag:cave_exterior }
		reference = ep2_hunt_forest_cave
	}
	override_background = {
		trigger = { scope:locale = flag:cave_interior }
		reference = fp3_cave
	}
	override_background = {
		trigger = { scope:locale = flag:wilderness_scope }
		reference = wilderness_scope
	}
	override_background = {
		trigger = { scope:locale = flag:terrain_scope }
		reference = terrain_scope
	}
	override_background = {
		trigger = { scope:locale = flag:battlefield }
		reference = battlefield
	}
	override_background = {
		trigger = { scope:locale = flag:throne_room }
		reference = throne_room
	}
	override_background = {
		trigger = { scope:locale = flag:army_camp }
		reference = army_camp
	}
	#Special
	override_background = {
		trigger = { scope:locale = flag:agot_icecave }
		reference = agot_icecave
	}

	widgets = {
		widget = {
			is_shown = {
				scope:dragon.var:dragon_last_move ?= flag:burn
			}
			gui = "agot_shader_event_sparks"
			container = "agot_shader_event_foreground"
		}
		widget = {
			is_shown = {
				scope:dragon.var:dragon_last_move ?= flag:burn
			}
			gui = "agot_shader_event_fire"
			container = "agot_shader_event_background"
		}
	}


	left_portrait = {
		character = scope:human
		camera = camera_slay_dragon_human_event_left
		scripted_animation = duel_wield_weapon
	}
	right_portrait = {
		character = scope:dragon
		animation = dragon_main
		camera = camera_dragon_facing_human

		triggered_outfit = {
			trigger = {
				scope:dragon = { level_ten_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_nine_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_eight_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_seven_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5 }
		}
		triggered_outfit = { # VHAGAR
			trigger = {
				scope:dragon = { level_six_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_five_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.0 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_four_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.9 }
		}
		triggered_outfit = { # MELEYS
			trigger = {
				scope:dragon = { level_three_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.8 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_two_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.5 }
		}
		triggered_outfit = { # SYRAX
			trigger = {
				scope:dragon = { level_one_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.4 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_zero_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.7 }
		}
		#End Dynamic Camera Zoom
	}

	immediate = {
		scope:dragon = { agot_dragon_slay_choose_range_move_effect = yes }
		if = {
			limit = { scope:dragon_current_move = flag:shake_cave }
			play_music_cue = CK3AGOT_dragon_growl
			# Change to something meaningful
			add_stress = major_stress_gain
		}
		#Calculate differences in skill/size between dragon and human
		agot_ds_compare_skills_effect = { DRAGON = scope:dragon HUMAN = root }
	}

	option = { # Approach with recklessness
		trigger = {
			OR = {
				scope:proximity >= 2
				scope:dragon_current_move = flag:burn
				scope:dragon_current_move = flag:lunge
			}
			NOT = { has_trait = craven }
		}
		name = agot_dragon_slaying_events.0100.approach
		custom_tooltip = agot_dragon_slaying_events.0100.tt.approach_recklessly
		hidden_effect = {
			save_scope_value_as = {
				name = proximity
				value = 0
			}
			save_scope_value_as = {
				name = human_current_move
				value = flag:approach
			}
		}

		switch = {
			trigger = scope:dragon_current_move
			flag:burn = {
				random_list = {
					2 = { # Unscathed
						custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
						# Full boar and into the abyss
						modifier = {
							add = 0
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = { # You're boned
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# Increase chances of no consequences
						modifier = {
							add = 0
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					8 = { # Burns but live - unless this tops your burns
						custom_tooltip = {
							text = agot_dragon_slaying_events.0100.tt.burn_major
							agot_ds_burn_effect = { MIN = 30 MAX = 60 }
						}
						# Probably not necessary, just doing this to balance at 100
						modifier = { # The minus shouldn't alarm, this is just a full burn now :)
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -7
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						modifier = {
							add = 2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 7
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					90 = { # Full burn, death
						custom_tooltip = {
							text = agot_dragon_slaying_events.0100.tt.burn_death
							agot_ds_burn_effect = { MIN = 100 MAX = 100 }
						}

						# Full bore and into the abyss
						modifier = {
							add = 2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = 4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = 6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = 8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = 10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = -6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = -8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
				}

				if = {
					limit = {
						has_character_flag = ds_death
					}
					add_character_flag = death_burn
				}
				else_if = {
					limit = {
						scope:dragon = { has_trait = dragon_wounded_5 }
					}
					add_character_flag = ds_win
					custom_tooltip = agot_dragon_slaying_events.0100.tt.may_kill_dragon
				}
				else = {
					scope:dragon = {
						wound_dragon = yes
					}
				}
			}
			flag:lunge = {
				# We will make it easier for skilled fighters
				# but harsher for unskilled fighers than with the burn
				random_list = {
					5 = { # Unscathed
						custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
						# Full bore and into the abyss
						modifier = {
							add = -1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = 4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 12
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 16
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					45 = { # You've been struck, but still standing
						if = {
							limit = {
								has_extreme_wounds = yes
							}
							custom_tooltip = {
								text = agot_dragon_slaying_events.0100.tt.succumb_wounds
								add_character_flag = ds_death
							}
						}
						else = {
							scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
						}

						# Full bore and into the abyss
						modifier = {
							add = -7
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -14
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -21
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -28
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -35
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = 1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					50 = { # This was a bad call, death
						add_character_flag = ds_death
						custom_tooltip = agot_dragon_slaying_events.0100.tt.death
						# Full bore and into the abyss
						modifier = {
							add = 8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = 16
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = 24
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = 32
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = 40
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = -5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = -15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = -20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = -25
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
				}
				if = {
					limit = {
						has_character_flag = ds_death
					}
					add_character_flag = death_lunge
				}
				else_if = {
					limit = {
						scope:dragon = { has_trait = dragon_wounded_5 }
					}
					add_character_flag = ds_win
				}
				else = {
					scope:dragon = {
						wound_dragon = yes
					}
				}
			}
			flag:shake_cave = {
				# Higher chance to get wounded than killed, but if injured already could be lethal
				random_list = {
					10 = {
						custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
						# Full bore and into the abyss
						modifier = {
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = 8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 16
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 24
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 32
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 40
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					50 = { # Sprain your ankle or break a leg
						if = {
							limit = {
								has_extreme_wounds = yes
							}
							custom_tooltip = {
								text = agot_dragon_slaying_events.0100.tt.succumb_wounds
								add_character_flag = ds_death
							}
						}
						else = {
							scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
						}
						if = {
							limit = {
								has_character_flag = ds_death
							}
							add_character_flag = death_shake_wound # Maybe just make this a rock death
						}

						# For the human
						modifier = {
							add = -3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = -6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = -9
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = -12
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = -15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					40 = { # Rock falls on you, life is unfair
						add_character_flag = ds_death
						add_character_flag = death_rock
						custom_tooltip = agot_dragon_slaying_events.0100.tt.death
						# Full bore and into the abyss
						modifier = {
							add = 2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = 4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = 6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = 8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = 10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = -5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = -15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = -20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = -25
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
				}
			}
			flag:guard = {
				# Let the player approach, but since they were reckless, a chance at a sneak attack
				hidden_effect = {
					random_list = {
						30 = {
							#Otherwise, we will boost the dragon's next attack
							scope:dragon = { add_character_flag = guarded_attack }
							custom_tooltip = agot_dragon_slaying_events.0100.tt.dragon_prepares
							# Full bore and into the abyss
							modifier = {
								add = -6
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = 1
										scope:human.var:ds_combat_difference = 2
									}
								}
							}
							modifier = {
								add = -12
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = 3
										scope:human.var:ds_combat_difference = 4
									}
								}
							}
							modifier = {
								add = -18
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = 5
										scope:human.var:ds_combat_difference = 6
									}
								}
							}
							modifier = {
								add = -24
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = 7
										scope:human.var:ds_combat_difference = 8
									}
								}
							}
							modifier = {
								add = -30
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = 9
										scope:human.var:ds_combat_difference = 10
									}
								}
							}

							# For the human, decrease chance of burning to death
							modifier = {
								add = 4
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = -1
										scope:human.var:ds_combat_difference = -2
									}
								}
							}
							modifier = {
								add = 8
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = -3
										scope:human.var:ds_combat_difference = -4
									}
								}
							}
							modifier = {
								add = 12
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = -5
										scope:human.var:ds_combat_difference = -6
									}
								}
							}
							modifier = {
								add = 16
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = -7
										scope:human.var:ds_combat_difference = -8
									}
								}
							}
							modifier = {
								add = 20
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = -9
										scope:human.var:ds_combat_difference = -10
									}
								}
							}
						}
						70 = { # Sneak attack
							hidden_effect = {
								add_character_flag = ds_death
								add_character_flag = sneak_attack
								if = {
									limit = {
										has_character_flag = ds_death
									}
									add_character_flag = death_sneak_attack
								}
							}

							# Full bore and into the abyss
							modifier = {
								add = 6
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = 1
										scope:human.var:ds_combat_difference = 2
									}
								}
							}
							modifier = {
								add = 12
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = 3
										scope:human.var:ds_combat_difference = 4
									}
								}
							}
							modifier = {
								add = 18
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = 5
										scope:human.var:ds_combat_difference = 6
									}
								}
							}
							modifier = {
								add = 24
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = 7
										scope:human.var:ds_combat_difference = 8
									}
								}
							}
							modifier = {
								add = 30
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = 9
										scope:human.var:ds_combat_difference = 10
									}
								}
							}

							# For the human, decrease chance of burning to death
							modifier = {
								add = -4
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = -1
										scope:human.var:ds_combat_difference = -2
									}
								}
							}
							modifier = {
								add = -8
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = -3
										scope:human.var:ds_combat_difference = -4
									}
								}
							}
							modifier = {
								add = -12
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = -5
										scope:human.var:ds_combat_difference = -6
									}
								}
							}
							modifier = {
								add = -16
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = -7
										scope:human.var:ds_combat_difference = -8
									}
								}
							}
							modifier = {
								add = -20
								trigger = {
									OR = {
										scope:human.var:ds_combat_difference = -9
										scope:human.var:ds_combat_difference = -10
									}
								}
							}
						}
					}
				}
			}
		}

		stress_impact = {
			impatient = miniscule_stress_impact_loss
			wrathful = miniscule_stress_impact_loss
			patient = miniscule_stress_impact_gain
			calm = miniscule_stress_impact_gain
		}
		ai_chance = {
			base = 100

			ai_value_modifier = {
				ai_boldness = 1
				ai_greed = 1
			}

			# The better you are at something, the more confident you should be
			# This goes for all of you modders too :)
			modifier = {
				add = {
					value = scope:human.var:ds_combat_difference
					multiply = -5 # positive values mean the dragon is stronger
				}
			}

			modifier = {
				OR = {
					has_trait_rank = {
						trait = wounded
						rank > 1
					}
					has_trait = crippled
					has_trait = maimed
					has_trait = blind
				}
				NOT = { scope:dragon_current_move = flag:burn }
				add = { # If wounded, a little more cautious
					value = 50
					multiply = -1
				}
			}

			modifier = {# Decrease chance of ai getting killed by sneak attack
				scope:dragon_current_move = flag:guard
				factor = 0.25
			}

		}
	}

	option = { # Approach cautiously
		name = {
			trigger = { scope:dragon_current_move = flag:burn }
			text = agot_dragon_slaying_events.0100.roll_burn
		}
		name = {
			trigger = { scope:dragon_current_move = flag:lunge }
			text = agot_dragon_slaying_events.0100.roll_lunge
		}
		name = {
			trigger = {
				NOR = {
					scope:dragon_current_move = flag:lunge
					scope:dragon_current_move = flag:burn
				}
			}
			text = agot_dragon_slaying_events.0100.approach_cautiously
		}
		custom_tooltip = agot_dragon_slaying_events.0100.tt.approach_carefully
		hidden_effect = {
			switch = {
				trigger = scope:proximity
				2 = { save_scope_value_as = { name = proximity value = 1 } }
				1 = { save_scope_value_as = { name = proximity value = 0 } }
			}
			save_scope_value_as = {
				name = human_current_move
				value = flag:cautious_approach
			}
		}

		# Considered dodging, safer than the first option
		switch = {
			trigger = scope:dragon_current_move
			flag:burn = {
				random_list = {
					5 = { # Unscathed
						custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
						modifier = {
							add = -1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = 1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					10 = { # Minor burns
						custom_tooltip = {
							text = agot_dragon_slaying_events.0100.tt.burn_minor
							agot_ds_burn_effect = { MIN = 15 MAX = 35 }
						}
						# Full bore and into the abyss
						modifier = {
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = 2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					15 = { # Severe burns, but live
						custom_tooltip = {
							text = agot_dragon_slaying_events.0100.tt.burn_major
							agot_ds_burn_effect = { MIN = 30 MAX = 60 }
						}
						# Full bore and into the abyss
						modifier = {
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = 2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					70 = { # Full burn, death
						custom_tooltip = {
							text = agot_dragon_slaying_events.0100.tt.burn_death
							agot_ds_burn_effect = { MIN = 100 MAX = 100 }
						}
						# Full bore and into the abyss
						modifier = {
							add = 5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = 10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = 15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = 20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = 25
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = -5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = -15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = -20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = -25
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
				}

				if = {
					limit = {
						has_character_flag = ds_death
					}

					add_character_flag = death_burn
				}
			}
			flag:lunge = { # For now, I am going to use the same modifiers as the burn
				random_list = {
					10 = { # Unscathed
						custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
						modifier = {
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = 6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 12
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 18
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 24
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 30
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					30 = { # You've been struck, but still standing
						if = {
							limit = {
								has_extreme_wounds = yes
							}
							custom_tooltip = {
								text = agot_dragon_slaying_events.0100.tt.succumb_wounds
								add_character_flag = ds_death
							}
						}
						else = {
							scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
						}

						modifier = {
							add = -3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -9
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -12
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						modifier = {
							add = 3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 9
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 12
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					30 = { # That hurt
						if = {
							limit = {
								has_severe_wounds = yes
							}
							custom_tooltip = {
								text = agot_dragon_slaying_events.0100.tt.succumb_wounds
								add_character_flag = ds_death
							}
						}
						else = {
							custom_tooltip = {
								text = agot_dragon_slaying_events.0100.tt.severely_injured
								scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 2 } }
							}
						}

						# Full bore and into the abyss
						modifier = {
							add = -1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = -8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = -12
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = -16
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = -20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					30 = { # Gotta be quicker than that
						add_character_flag = ds_death
						custom_tooltip = agot_dragon_slaying_events.0100.tt.death
						# Full bore and into the abyss
						modifier = {
							add = 6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = 12
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = 18
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = 24
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = 30
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = -5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = -15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = -20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = -25
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
				}

				if = {
					limit = {
						has_character_flag = ds_death
					}
					add_character_flag = death_lunge
				}
			}
			flag:shake_cave = {
				random_list = {
					20 = { # Unscathed
						custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
						modifier = {
							add = -3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -9
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -12
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = 4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 12
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 16
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					45 = { # Sprain ankle
						if = {
							limit = {
								has_extreme_wounds = yes
							}
							custom_tooltip = {
								text = agot_dragon_slaying_events.0100.tt.succumb_wounds
								add_character_flag = ds_death
							}
						}
						else = {
							scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
						}
						if = {
							limit = {
								has_character_flag = ds_death
							}
							add_character_flag = death_shake_wound
						}

						modifier = {
							add = 2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = 4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = 6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = 8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = 10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						modifier = {
							add = 1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					35 = { # Struck by rock, not killed
						if = {
							limit = {
								has_severe_wounds = yes
							}
							custom_tooltip = {
								text = agot_dragon_slaying_events.0100.tt.succumb_wounds
								add_character_flag = ds_death
							}
						}
						else = {
							custom_tooltip = {
								text = agot_dragon_slaying_events.0100.tt.severely_injured
								scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
							}
						}

						if = {
							limit = {
								has_character_flag = ds_death
							}
							add_character_flag = death_rock
						}

						modifier = {
							add = 1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = 2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = 3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = 4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = 5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						modifier = {
							add = -5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = -15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = -20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = -25
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
				}
			}
			flag:guard = {
				# Let the player approach, but since they were reckless, a chance at a sneak attack
				random_list = {
					30 = { # The dragon is unalarmed, no attack prepared
						custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
						modifier = {
							add = -52
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -25
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = 4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 12
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 16
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					70 = {
						#Otherwise, we will boost the dragon's next attack
						scope:dragon = { add_character_flag = guarded_attack }
						custom_tooltip = agot_dragon_slaying_events.0100.tt.dragon_prepares
						modifier = {
							add = 5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = 10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = 15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = 20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = 25
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = -8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = -12
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = -16
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = -20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
				}
			}
		}

		stress_impact = {
			patient = miniscule_stress_impact_loss
			calm = miniscule_stress_impact_loss
			impatient = miniscule_stress_impact_gain
			wrathful = miniscule_stress_impact_gain
		}
		ai_chance = {
			base = 100

			ai_value_modifier = {
				ai_rationality = 0.5
			}

			modifier = {
				add = {
					value = scope:human.var:ds_combat_difference
					multiply = -2.5 # positive values mean the dragon is stronger
				}
			}

			modifier = {
				scope:dragon_current_move = flag:guard
				add = 50 # Now is your chance to get closer
			}

		}
	}

	option = {
		name = agot_dragon_slaying_events.0100.run
		save_scope_value_as = {
			name = human_current_move
			value = flag:run
		}

		# Running is an option, but it won't be easy
		# For this one we shall use personality traits to determine if the dragon gives chase
		if = {
			limit = {
				scope:dragon_current_move = flag:burn
			}

			random_list = {
				20 = { # Unscathed
					custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
					# Full boar and into the abyss
					modifier = {
						add = -2
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 1
								scope:human.var:ds_combat_difference = 2
							}
						}
					}
					modifier = {
						add = -4
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 3
								scope:human.var:ds_combat_difference = 4
							}
						}
					}
					modifier = {
						add = -6
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 5
								scope:human.var:ds_combat_difference = 6
							}
						}
					}
					modifier = {
						add = -8
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 7
								scope:human.var:ds_combat_difference = 8
							}
						}
					}
					modifier = { # You're boned
						add = -10
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 9
								scope:human.var:ds_combat_difference = 10
							}
						}
					}

					# Increase chances of no consequences
					modifier = {
						add = 5
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -1
								scope:human.var:ds_combat_difference = -2
							}
						}
					}
					modifier = {
						add = 10
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -3
								scope:human.var:ds_combat_difference = -4
							}
						}
					}
					modifier = {
						add = 15
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -5
								scope:human.var:ds_combat_difference = -6
							}
						}
					}
					modifier = {
						add = 20
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -7
								scope:human.var:ds_combat_difference = -8
							}
						}
					}
					modifier = {
						add = 25
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -9
								scope:human.var:ds_combat_difference = -10
							}
						}
					}
				}
				35 = { # Burns but live - unless this tops your burns
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.burn_major
						agot_ds_burn_effect = { MIN = 30 MAX = 60 }
					}
					# Probably not necessary, just doing this to balance at 100
					modifier = { # The minus shouldn't alarm, this is just a full burn now :)
						add = -3
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 1
								scope:human.var:ds_combat_difference = 2
							}
						}
					}
					modifier = {
						add = -6
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 3
								scope:human.var:ds_combat_difference = 4
							}
						}
					}
					modifier = {
						add = -9
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 5
								scope:human.var:ds_combat_difference = 6
							}
						}
					}
					modifier = {
						add = -12
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 7
								scope:human.var:ds_combat_difference = 8
							}
						}
					}
					modifier = {
						add = -15
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 9
								scope:human.var:ds_combat_difference = 10
							}
						}
					}
					# The chances of "minor" burns I guess will stay the same for good skill
				}
				45 = { # Full burn, death
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.burn_death
						agot_ds_burn_effect = { MIN = 100 MAX = 100 }
					}
					modifier = {
						add = 5
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 1
								scope:human.var:ds_combat_difference = 2
							}
						}
					}
					modifier = {
						add = 10
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 3
								scope:human.var:ds_combat_difference = 4
							}
						}
					}
					modifier = {
						add = 15
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 5
								scope:human.var:ds_combat_difference = 6
							}
						}
					}
					modifier = {
						add = 20
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 7
								scope:human.var:ds_combat_difference = 8
							}
						}
					}
					modifier = {
						add = 25
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 9
								scope:human.var:ds_combat_difference = 10
							}
						}
					}

					# For the human, decrease chance of burning to death
					modifier = {
						add = -5
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -1
								scope:human.var:ds_combat_difference = -2
							}
						}
					}
					modifier = {
						add = -10
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -3
								scope:human.var:ds_combat_difference = -4
							}
						}
					}
					modifier = {
						add = -15
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -5
								scope:human.var:ds_combat_difference = -6
							}
						}
					}
					modifier = {
						add = -20
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -7
								scope:human.var:ds_combat_difference = -8
							}
						}
					}
					modifier = {
						add = -25
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -9
								scope:human.var:ds_combat_difference = -10
							}
						}
					}
				}
			}
			if = {
				limit = {
					has_character_flag = ds_death
				}
				add_character_flag = death_running_burn
			}
		}
		else = { # Honestly for everything else we just calculate the dragon's pursuit
			random_list = {
				30 = {
					add_character_flag = ds_death
					custom_tooltip = agot_dragon_slaying_events.0100.tt.death

					modifier = {
						add = 5
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 1
								scope:human.var:ds_combat_difference = 2
							}
						}
					}
					modifier = {
						add = 10
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 3
								scope:human.var:ds_combat_difference = 4
							}
						}
					}
					modifier = {
						add = 15
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 5
								scope:human.var:ds_combat_difference = 6
							}
						}
					}
					modifier = {
						add = 20
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 7
								scope:human.var:ds_combat_difference = 8
							}
						}
					}
					modifier = {
						add = 25
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 9
								scope:human.var:ds_combat_difference = 10
							}
						}
					}

					# For the human, decrease chance of burning to death
					modifier = {
						add = -3
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -1
								scope:human.var:ds_combat_difference = -2
							}
						}
					}
					modifier = {
						add = -6
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -3
								scope:human.var:ds_combat_difference = -4
							}
						}
					}
					modifier = {
						add = -9
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -5
								scope:human.var:ds_combat_difference = -6
							}
						}
					}
					modifier = {
						add = -12
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -7
								scope:human.var:ds_combat_difference = -8
							}
						}
					}
					modifier = {
						add = -15
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -9
								scope:human.var:ds_combat_difference = -10
							}
						}
					}
				}
				25 = { # That hurt
					# Will replace with my own effect
					if = {
						limit = {
							has_severe_wounds = yes
						}
						custom_tooltip = {
							text = agot_dragon_slaying_events.0100.tt.succumb_wounds
							add_character_flag = ds_death
						}
					}
					else = {
						custom_tooltip = {
							text = agot_dragon_slaying_events.0100.tt.severely_injured
							scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 2 } }
						}
					}

					modifier = {
						add = -1
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 1
								scope:human.var:ds_combat_difference = 2
							}
						}
					}
					modifier = {
						add = -2
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 3
								scope:human.var:ds_combat_difference = 4
							}
						}
					}
					modifier = {
						add = -3
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 5
								scope:human.var:ds_combat_difference = 6
							}
						}
					}
					modifier = {
						add = -4
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 7
								scope:human.var:ds_combat_difference = 8
							}
						}
					}
					modifier = {
						add = -5
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 9
								scope:human.var:ds_combat_difference = 10
							}
						}
					}
				}
				25 = { # You've been struck, but still standing
					# Will replace with my own effect
					if = {
						limit = {
							has_extreme_wounds = yes
						}
						custom_tooltip = {
							text = agot_dragon_slaying_events.0100.tt.succumb_wounds
							add_character_flag = ds_death
						}
					}
					else = {
						scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
					}

					modifier = {
						add = 5
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 1
								scope:human.var:ds_combat_difference = 2
							}
						}
					}
					modifier = {
						add = 10
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 3
								scope:human.var:ds_combat_difference = 4
							}
						}
					}
					modifier = {
						add = 15
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 5
								scope:human.var:ds_combat_difference = 6
							}
						}
					}
					modifier = {
						add = 20
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 7
								scope:human.var:ds_combat_difference = 8
							}
						}
					}
					modifier = {
						add = 25
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 9
								scope:human.var:ds_combat_difference = 10
							}
						}
					}

					# For the human, decrease chance of burning to death
					modifier = {
						add = -5
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -1
								scope:human.var:ds_combat_difference = -2
							}
						}
					}
					modifier = {
						add = -10
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -3
								scope:human.var:ds_combat_difference = -4
							}
						}
					}
					modifier = {
						add = -15
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -5
								scope:human.var:ds_combat_difference = -6
							}
						}
					}
					modifier = {
						add = -20
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -7
								scope:human.var:ds_combat_difference = -8
							}
						}
					}
					modifier = {
						add = -25
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -9
								scope:human.var:ds_combat_difference = -10
							}
						}
					}
				}
				20 = { # Unscathed
					custom_tooltip = agot_dragon_slaying_events.0100.tt.death
					modifier = {
						add = -2
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 1
								scope:human.var:ds_combat_difference = 2
							}
						}
					}
					modifier = {
						add = -4
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 3
								scope:human.var:ds_combat_difference = 4
							}
						}
					}
					modifier = {
						add = -6
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 5
								scope:human.var:ds_combat_difference = 6
							}
						}
					}
					modifier = {
						add = -8
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 7
								scope:human.var:ds_combat_difference = 8
							}
						}
					}
					modifier = {
						add = -10
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = 9
								scope:human.var:ds_combat_difference = 10
							}
						}
					}

					# For the human, decrease chance of burning to death
					modifier = {
						add = 5
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -1
								scope:human.var:ds_combat_difference = -2
							}
						}
					}
					modifier = {
						add = 10
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -3
								scope:human.var:ds_combat_difference = -4
							}
						}
					}
					modifier = {
						add = 15
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -5
								scope:human.var:ds_combat_difference = -6
							}
						}
					}
					modifier = {
						add = 20
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -7
								scope:human.var:ds_combat_difference = -8
							}
						}
					}
					modifier = {
						add = 25
						trigger = {
							OR = {
								scope:human.var:ds_combat_difference = -9
								scope:human.var:ds_combat_difference = -10
							}
						}
					}
				}
			}

			if = {
				limit = {
					has_character_flag = ds_death
				}
				add_character_flag = death_running_pursuit
			}
		}

		stress_impact = {
			brave = medium_stress_impact_gain
		}

		ai_chance = { # Ai may run
			base = 10

			ai_value_modifier = {
				ai_boldness = -0.5
				ai_greed = -0.25
			}

			modifier = {
				add = {
					value = scope:human.var:ds_combat_difference
					multiply = 2.5 # positive values mean the dragon is stronger
				}
			}

			modifier = {
				has_trait_rank = {
					trait = wounded
					rank >= 2
				}
				add = 50
			}

			modifier = {
				has_trait_xp = {
					trait = burned
					value >= 50
				}
				add = 50
			}

			modifier = {
				has_trait = one_eyed
				add = 25
			}

			modifier = {
				OR = {
					has_trait = maimed
					has_trait = blind
					has_trait = crippled
				}
				add = 100
			}

		}
	}

	after = {
		if = {
			limit = {
				OR = {
					has_character_flag = ds_death
					scope:human_current_move ?= flag:run
				}
			}
			trigger_event = agot_dragon_slaying_events.0111
		}
		else_if = { # In case the wound kills the dragon, will rework with flags
			limit = {
				has_character_flag = ds_win
			}
			trigger_event = agot_dragon_slaying_events.0110
		}
		else_if = {
			limit = {
				scope:human = { is_alive = yes }
			}

			if = {
				limit = { scope:proximity = 0 }

				trigger_event = agot_dragon_slaying_events.0101
			}
			else = {
				trigger_event = agot_dragon_slaying_events.0100
			}
		}
		else = { # Something went wrong, invalidation event
			# Trigger invalidation
		}
	}
}

# Player is close enough to attack the dragon
agot_dragon_slaying_events.0101 = {
	type = character_event
	title = agot_dragon_slaying_events.0101.t
	window = dragon_duel_event
	desc = {
		triggered_desc = { # Dragon's Last Move
			trigger = { exists = scope:dragon.var:dragon_last_move }
			desc = {
				first_valid = {
					triggered_desc = {
						trigger = { scope:dragon.var:dragon_last_move ?= flag:burn }
						desc = {
							random_valid = {
								desc = agot_dragon_slaying_events.0100.desc.last_move_burn1
								desc = agot_dragon_slaying_events.0100.desc.last_move_burn2
								desc = agot_dragon_slaying_events.0100.desc.last_move_burn3
							}
						}
					}
					triggered_desc = {
						trigger = { scope:dragon.var:dragon_last_move ?= flag:shake_cave }
						desc = agot_dragon_slaying_events.0100.desc.last_move_shake_cave
					}
					triggered_desc = {
						trigger = { scope:dragon.var:dragon_last_move ?= flag:lunge }
						desc = agot_dragon_slaying_events.0100.desc.last_move_lunge
					}
					triggered_desc = {
						trigger = { scope:dragon.var:dragon_last_move ?= flag:guard }
						desc = {
							first_valid = {
								triggered_desc = {
									trigger = { has_character_flag = sneak_attack }
									desc = agot_dragon_slaying_events.0100.desc.last_move_sneak_attack
								}
								triggered_desc = {
									trigger = { has_character_flag = guarded_attack }
									desc = agot_dragon_slaying_events.0100.desc.last_move_guarded_attack
								}
								desc = agot_dragon_slaying_events.0100.desc.last_move_guard
							}
						}
					}
				}
			}
		}
		first_valid = { # Mid (trait variety)
			triggered_desc = {
				trigger = {
					OR = {
						has_trait = uncouth
						has_trait = rude
					}
				}
				desc = agot_dragon_slaying_events.0101.desc.mid.uncouth
			}
			triggered_desc = {
				trigger = { has_trait = brave }
				desc = agot_dragon_slaying_events.0101.desc.mid.brave
			}
			triggered_desc = {
				trigger = { has_trait = craven }
				desc = agot_dragon_slaying_events.0101.desc.mid.craven
			}
			desc = agot_dragon_slaying_events.0101.desc.mid.fallback
		}
		random_valid = { # Outro
			desc = agot_dragon_slaying_events.0101.desc.outro1
			desc = agot_dragon_slaying_events.0101.desc.outro2
			desc = agot_dragon_slaying_events.0101.desc.outro3
			desc = agot_dragon_slaying_events.0101.desc.outro4
		}
		random_valid = { # Ending
			desc = agot_dragon_slaying_events.0101.desc.ending1
			desc = agot_dragon_slaying_events.0101.desc.ending2
			desc = agot_dragon_slaying_events.0101.desc.ending3
			desc = agot_dragon_slaying_events.0101.desc.ending4
		}
		first_valid = { # Dragon's Next Move
			triggered_desc = {
				trigger = { scope:dragon_current_move ?= flag:bite }
				desc = agot_dragon_slaying_events.0101.desc.current_move_bite
			}
			triggered_desc = {
				trigger = { scope:dragon_current_move ?= flag:tail }
				desc = agot_dragon_slaying_events.0101.desc.current_move_tail
			}
		}
	}

	theme = dragon

	# Background Logic
	override_background = {
		trigger = { scope:locale = flag:cave_exterior }
		reference = ep2_hunt_forest_cave
	}
	override_background = {
		trigger = {
			scope:locale = flag:cave_interior
		}
		reference = fp3_cave
	}
	override_background = {
		trigger = { scope:locale = flag:wilderness_scope }
		reference = wilderness_scope
	}
	override_background = {
		trigger = { scope:locale = flag:terrain_scope }
		reference = terrain_scope
	}
	override_background = {
		trigger = { scope:locale = flag:battlefield }
		reference = battlefield
	}
	override_background = {
		trigger = { scope:locale = flag:throne_room }
		reference = throne_room
	}
	override_background = {
		trigger = { scope:locale = flag:army_camp }
		reference = army_camp
	}
	#Special
	override_background = {
		trigger = { scope:locale = flag:agot_icecave }
		reference = agot_icecave
	}

	widgets = {
		widget = {
			is_shown = {
				scope:dragon.var:dragon_last_move ?= flag:burn
			}
			gui = "agot_shader_event_sparks"
			container = "agot_shader_event_foreground"
		}
		widget = {
			is_shown = {
				scope:dragon.var:dragon_last_move ?= flag:burn
			}
			gui = "agot_shader_event_fire"
			container = "agot_shader_event_background"
		}
	}

	left_portrait = {
		character = scope:human
		camera = camera_slay_dragon_human_event_left
		scripted_animation = duel_wield_weapon
	}
	right_portrait = {
		character = scope:dragon
		animation = dragon_main
		camera = camera_dragon_facing_human

		triggered_outfit = {
			trigger = {
				scope:dragon = { level_ten_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_nine_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_eight_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_seven_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5 }
		}
		triggered_outfit = { # VHAGAR
			trigger = {
				scope:dragon = { level_six_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_five_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.0 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_four_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.9 }
		}
		triggered_outfit = { # MELEYS
			trigger = {
				scope:dragon = { level_three_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.8 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_two_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.5 }
		}
		triggered_outfit = { # SYRAX
			trigger = {
				scope:dragon = { level_one_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.4 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_zero_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.7 }
		}
		#End Dynamic Camera Zoom
	}

	immediate = {
		scope:dragon = { agot_dragon_slay_choose_close_move_effect = yes }

		#Calculate differences in skill/size between dragon and human
		agot_ds_compare_skills_effect = { DRAGON = scope:dragon HUMAN = root }
	}

	# Climb
	option = {
		trigger = { # can't climb on a baby dragon
			scope:dragon.dragon_size > 20
		}
		name = agot_dragon_slaying_events.0101.climb
		save_scope_value_as = {
			name = human_current_move
			value = flag:climb
		}
		switch = {
			trigger = scope:dragon_current_move
			flag:bite = {
				random_list = {
					5 = {
						custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
						# # Remember the boost from the guarded attack
						# modifier = {
						# 	add = 10
						# 	trigger = {
						# 		scope:dragon = { has_character_flag = guarded_attack }
						# 	}
						# }

						modifier = {
							add = -1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = 3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 9
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 12
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					15 = {
						if = {
							limit = {
								has_extreme_wounds = yes
							}
							custom_tooltip = {
								text = agot_dragon_slaying_events.0100.tt.succumb_wounds
								add_character_flag = ds_death
							}
						}
						else = {
							scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
						}

						# Remember the boost from the guarded attack
						modifier = {
							add = -5
							trigger = {
								scope:dragon = { has_character_flag = guarded_attack }
							}
						}

						modifier = {
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						modifier = {
							add = 1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					20 = {
						if = {
							limit = {
								has_severe_wounds = yes
							}
							custom_tooltip = {
								text = agot_dragon_slaying_events.0100.tt.succumb_wounds
								add_character_flag = ds_death
							}
						}
						else = {
							custom_tooltip = {
								text = agot_dragon_slaying_events.0100.tt.severely_injured_worse
								if = {
									limit = {
										has_trait = maimed
									}
									scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 2 } }
								}
								else = {
									scope:human = { add_trait = maimed }
									scope:human = { add_character_flag = ds_maimed }
								}
							}
						}

						# Remember the boost from the guarded attack
						modifier = {
							add = -5
							trigger = {
								scope:dragon = { has_character_flag = guarded_attack }
							}
						}

						modifier = {
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						modifier = {
							add = 1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					60 = {
						add_character_flag = ds_death
						custom_tooltip = agot_dragon_slaying_events.0100.tt.death
						# Remember the boost from the guarded attack
						modifier = {
							add = 10
							trigger = {
								scope:dragon = { has_character_flag = guarded_attack }
							}
						}

						modifier = {
							add = 5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = 10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = 15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = 20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = 25
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = -5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = -15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = -20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = -25
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
				}
				if = {
					limit = {
						has_character_flag = ds_death
					}
					add_character_flag = death_bite
				}
			}
			flag:tail = { # Climbing on a tail attack is a little risky
				random_list = {
					1 = {
						custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
						# # Remember the boost from the guarded attack
						# modifier = {
						# 	add = 10
						# 	trigger = {
						# 		scope:dragon = { has_character_flag = guarded_attack }
						# 	}
						# }

						modifier = {
							add = -1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference >= 5
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = 3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 9
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 12
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 14
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					9 = {
						if = {
							limit = {
								has_extreme_wounds = yes
							}
							custom_tooltip = {
								text = agot_dragon_slaying_events.0100.tt.succumb_wounds
								add_character_flag = ds_death
							}
						}
						else = {
							scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
						}

						# Remember the boost from the guarded attack
						modifier = {
							add = -5
							trigger = {
								scope:dragon = { has_character_flag = guarded_attack }
							}
						}

						modifier = {
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -9
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						modifier = {
							add = 3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = 8
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = 11
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = 11
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
					15 = {
						if = {
							limit = {
								has_severe_wounds = yes
							}
							custom_tooltip = {
								text = agot_dragon_slaying_events.0100.tt.succumb_wounds
								add_character_flag = ds_death
							}
						}
						else = {
							custom_tooltip = {
								text = agot_dragon_slaying_events.0100.tt.severely_injured_worse
								scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 2 } }
								scope:human = { add_trait = crippled }
								scope:human = { add_character_flag = ds_crippled }
							}
						}

						# Remember the boost from the guarded attack
						modifier = {
							add = -5
							trigger = {
								scope:dragon = { has_character_flag = guarded_attack }
							}
						}

						modifier = {
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = -4
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = -6
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = {
							add = -15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						modifier = {
							add = 2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = 1
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = -2
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = -3
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
					}
					75 = {
						add_character_flag = ds_death
						custom_tooltip = agot_dragon_slaying_events.0100.tt.death
						# Remember the boost from the guarded attack
						modifier = {
							add = 10
							trigger = {
								scope:dragon = { has_character_flag = guarded_attack }
							}
						}

						modifier = {
							add = 5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 1
									scope:human.var:ds_combat_difference = 2
								}
							}
						}
						modifier = {
							add = 10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 3
									scope:human.var:ds_combat_difference = 4
								}
							}
						}
						modifier = {
							add = 15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 5
									scope:human.var:ds_combat_difference = 6
								}
							}
						}
						modifier = {
							add = 20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 7
									scope:human.var:ds_combat_difference = 8
								}
							}
						}
						modifier = { # Just death :)
							add = 25
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = 9
									scope:human.var:ds_combat_difference = 10
								}
							}
						}

						# For the human, decrease chance of burning to death
						modifier = {
							add = -5
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -1
									scope:human.var:ds_combat_difference = -2
								}
							}
						}
						modifier = {
							add = -10
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -3
									scope:human.var:ds_combat_difference = -4
								}
							}
						}
						modifier = {
							add = -15
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -5
									scope:human.var:ds_combat_difference = -6
								}
							}
						}
						modifier = {
							add = -20
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -7
									scope:human.var:ds_combat_difference = -8
								}
							}
						}
						modifier = {
							add = -25
							trigger = {
								OR = {
									scope:human.var:ds_combat_difference = -9
									scope:human.var:ds_combat_difference = -10
								}
							}
						}
					}
				}

				if = {
					limit = {
						has_character_flag = ds_death
					}
					add_character_flag = death_tail
				}
			}
		}

		ai_chance = {
			base = 100

			# Not much difference to dive, except it's dependant on the dragon's move

			ai_value_modifier = {
				ai_boldness = 0.5
				ai_greed = 0.5
			}

			modifier = {
				scope:dragon_current_move = flag:tail
				factor = 0.5
			}

		}
	}

	# Dive
	option = { # Generally a safer option - but the next round is harsher
		trigger = { # Can't dive under a baby dragon
			scope:dragon.dragon_size > 20
		}
		name = agot_dragon_slaying_events.0101.dive
		save_scope_value_as = {
			name = human_current_move
			value = flag:dive
		}

		# In this case, I the probabilities will be the same
		random_list = {
			10 = {
				custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
				# # Remember the boost from the guarded attack
				# modifier = {
				# 	add = 10
				# 	trigger = {
				# 		scope:dragon = { has_character_flag = guarded_attack }
				# 	}
				# }

				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				# For the human, decrease chance of burning to death
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 16
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 20
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			15 = {
				if = {
					limit = {
						has_extreme_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
				}

				# Remember the boost from the guarded attack
				modifier = {
					add = -5
					trigger = {
						scope:dragon = { has_character_flag = guarded_attack }
					}
				}

				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			25 = {
				if = {
					limit = {
						has_severe_wounds = yes
					}

					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = { # You live, but will be taking home a souvenier
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.severely_injured_worse
						if = {
							limit = {
								NOT = { has_trait = one_legged }
							}
							scope:human = { add_trait = one_legged }
						}
						if = {
							limit = {
								NOT = { has_trait = one_eyed }
							}
							add_trait = one_eyed
						}
						else = {
							remove_trait = one_eyed
							add_trait = blind
						}
						scope:human = { add_character_flag = ds_ouchie }
					}
				}

				# Remember the boost from the guarded attack
				modifier = {
					add = -5
					trigger = {
						scope:dragon = { has_character_flag = guarded_attack }
					}
				}

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			50 = {
				add_character_flag = ds_death
				custom_tooltip = agot_dragon_slaying_events.0100.tt.death
				# Remember the boost from the guarded attack
				modifier = {
					add = 10
					trigger = {
						scope:dragon = { has_character_flag = guarded_attack }
					}
				}

				modifier = {
					add = 6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = 12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = 18
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = 24
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = 30
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
		}

		switch = {
			trigger = scope:dragon_current_move
			flag:bite = {
				if = {
					limit = {
						has_character_flag = ds_death
					}
					add_character_flag = death_bite
				}
			}
			flag:tail = {
				if = {
					limit = {
						has_character_flag = ds_death
					}
					add_character_flag = death_tail
				}
			}
		}

		ai_chance = {
			base = 100

			ai_value_modifier = {
				ai_boldness = 0.5
				ai_greed = 0.5
			}
		}
	}

	# Take your chances here
	option = { # Only option for baby dragons, most risky, but can end combat
		name = agot_dragon_slaying_events.0101.stand
		trigger = {
			NOT = { has_trait = craven }
		}
		save_scope_value_as = {
			name = human_current_move
			value = flag:confront
		}
		# Not going to differentiate here
		random_list = {
			1 = {
				custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
				custom_tooltip = agot_dragon_slaying_events.0102.tt.win

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference >= 3
						}
					}
				}

				# For the human, decrease chance of burning to death
				modifier = {
					add = 1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 7
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			2 = {
				if = {
					limit = {
						has_extreme_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				# Remember the boost from the guarded attack
				modifier = {
					add = -5
					trigger = {
						scope:dragon = { has_character_flag = guarded_attack }
					}
				}

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference >= 3
						}
					}
				}

				modifier = {
					add = 1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			2 = {
				if = {
					limit = {
						has_severe_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.severely_injured
						scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 2 } }
					}
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				# Remember the boost from the guarded attack
				modifier = {
					add = -5
					trigger = {
						scope:dragon = { has_character_flag = guarded_attack }
					}
				}

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference >= 5
						}
					}
				}

				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 7
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			95 = {
				add_character_flag = ds_death
				custom_tooltip = agot_dragon_slaying_events.0100.tt.death
				# Remember the boost from the guarded attack
				modifier = {
					add = 10
					trigger = {
						scope:dragon = { has_character_flag = guarded_attack }
					}
				}

				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference >= 5
						}
					}
				}

				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -20
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -25
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
		}
		switch = {
			trigger = scope:dragon_current_move

			flag:bite = {
				if = {
					limit = {
						has_character_flag = ds_death
					}
					add_character_flag = death_bite
				}
			}
			flag:tail = {
				if = {
					limit = {
						has_character_flag = ds_death
					}
					add_character_flag = death_tail
				}
			}
		}
		if = {
			limit = {
				NOT = { has_character_flag = ds_death }
			}
			add_character_flag = win_confront
		}

		ai_chance = {
			base = 10

			# With how dangerous this choice is, only the greediest and uninjured should consider it
			ai_value_modifier = {
				ai_boldness = 0.5
				ai_greed = 0.5
			}
			modifier = {
				add = {
					value = scope:human.var:ds_combat_difference
					multiply = -5 # positive values mean the dragon is stronger
				}
			}
			modifier = {
				OR = {
					has_trait_rank = {
						trait = wounded
						rank >= 2
					}
					has_trait = maimed
					has_trait = blind
					has_trait = crippled
					AND = {
						has_trait_rank = {
							trait = wounded
							rank >= 1
						}
						has_trait = one_eyed
					}
				}
				factor = 0.1
			}
		}
	}

	# RUN
	option = { # T-T
		name = agot_dragon_slaying_events.0100.run
		# Should be much more dangerous than previous event
		save_scope_value_as = {
			name = human_current_move
			value = flag:run
		}
		random_list = {
			10 = { # Unscathed
				custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				# For the human, decrease chance of burning to death
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 20
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 25
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			20 = { # You've been struck, but still standing
				# Will replace with my own effect
				if = {
					limit = {
						has_extreme_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
				}

				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = 10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = 15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = 20
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = 25
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				# For the human, decrease chance of burning to death
				modifier = {
					add = 1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			30 = { # That hurt
				if = {
					limit = {
						has_severe_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.severely_injured
						scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 2 } }
					}
				}

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				# For the human, decrease chance of burning to death
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			40 = {
				add_character_flag = ds_death
				custom_tooltip = agot_dragon_slaying_events.0100.tt.death
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = 10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = 15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = 20
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = 25
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				# For the human, decrease chance of burning to death
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
		}

		if = {
			limit = {
				has_trait = brave
			}
			add_stress = medium_stress_gain
		}
		ai_chance = {
			base = 0

			# Should be less likely to run here than previous event, but more wound dependant

			ai_value_modifier = {
				ai_boldness = -1
				ai_greed = -1
			}

			modifier = {
				add = {
					value = scope:human.var:ds_combat_difference
					multiply = 3 # positive values mean the dragon is stronger
				}
			}

			modifier = {
				has_trait_rank = {
					trait = wounded
					rank >= 2
				}
				add = 75
			}

			modifier = {
				has_trait_xp = {
					trait = burned
					value >= 50
				}
				add = 25
			}

			modifier = {
				has_trait = one_eyed
				add = 50
			}

			modifier = {
				OR = {
					has_trait = maimed
					has_trait = blind
					has_trait = crippled
				}
				add = 100
			}
		}
	}

	after = {
		if = {
			limit = {
				OR = {
					has_character_flag = ds_death
					scope:human_current_move ?= flag:run
				}
			}
			trigger_event = agot_dragon_slaying_events.0111
		}
		else_if = {
			limit = {
				has_character_flag = win_confront # Only one that allows victory this round
			}
			trigger_event = agot_dragon_slaying_events.0110
		}
		else_if = {
			limit = {
				AND = {
					scope:human = { is_alive = yes }
					scope:dragon = { is_alive = yes }
				}
			}

			trigger_event = agot_dragon_slaying_events.0102
		}
		else = {
			# Something went wrong, trigger invalidation event
		}
	}
}

# Follow up to player attack - if the player survives this they win
agot_dragon_slaying_events.0102 = {

	type = character_event
	title = agot_dragon_slaying_events.0102.t
	window = dragon_duel_event
	desc = {
		triggered_desc = { # Dragon's Last Move
			trigger = { exists = scope:dragon.var:dragon_last_move }
			desc = {
				first_valid = {
					triggered_desc = {
						trigger = { has_character_flag = ds_maimed }
						desc = agot_dragon_slaying_events.0102.desc.maimed
					}
					triggered_desc = {
						trigger = { has_character_flag = ds_crippled }
						desc = agot_dragon_slaying_events.0102.desc.crippled
					}
					triggered_desc = {
						trigger = { has_character_flag = ds_ouchie }
						desc = agot_dragon_slaying_events.0102.desc.ouchie
					}
					triggered_desc = {
						trigger = { scope:dragon.var:dragon_last_move = flag:bite }
						desc = agot_dragon_slaying_events.0102.desc.bite
					}
					triggered_desc = {
						trigger = { scope:dragon.var:dragon_last_move = flag:tail }
						desc = agot_dragon_slaying_events.0102.desc.tail_swipe
					}
				}
			}
		}
		triggered_desc = { # Player's Move
			trigger = {
				NOT = {
					has_character_flag = ds_maimed
					has_character_flag = ds_crippled
					has_character_flag = ds_ouchie
				}
			}
			desc = {
				first_valid = {
					triggered_desc = {
						trigger = { scope:human_current_move = flag:climb }
						desc = agot_dragon_slaying_events.0102.desc.climb
					}
					triggered_desc = {
						trigger = { scope:human_current_move = flag:dive }
						desc = agot_dragon_slaying_events.0102.desc.dive
					}
				}
			}
		}
		first_valid = { # Say a Prayer
			triggered_desc = {
				trigger = {
					OR = {
						culture = culture:high_valyrian
						culture = culture:westerosi_valyrian
						culture = culture:essosi_valyrian
					}
				}
				desc = agot_dragon_slaying_events.0102.desc.valyrian
			}
			triggered_desc = {
				trigger = {
					OR = {
						has_trait = uncouth
						has_trait = rude
					}
				}
				desc = agot_dragon_slaying_events.0102.desc.uncouth
			}
			triggered_desc = {
				trigger = {
					has_faith = faith:fots_seven
				}
				desc = agot_dragon_slaying_events.0102.desc.seven
			}
			triggered_desc = {
				trigger = {
					has_faith = faith:old_gods_wnw
				}
				desc = agot_dragon_slaying_events.0102.desc.oldgods
			}
			triggered_desc = {
				trigger = {
					has_faith = faith:drowned_god
				}
				desc = agot_dragon_slaying_events.0102.desc.drowned
			}
			triggered_desc = {
				trigger = {
					has_religion = religion:the_rhllor_religion
				}
				desc = agot_dragon_slaying_events.0102.desc.rhllor
			}
			desc = agot_dragon_slaying_events.0102.desc.fallback
		}
		first_valid = { # Dragon's Next Move
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:crush }
				desc = agot_dragon_slaying_events.0102.desc.crush
			}
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:tail }
				desc = agot_dragon_slaying_events.0102.desc.tail
			}
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:shake }
				desc = agot_dragon_slaying_events.0102.desc.shake
			}
			triggered_desc = {
				trigger = {
					scope:dragon_current_move = flag:fly
					scope:human_current_move = flag:climb
				}
				desc = agot_dragon_slaying_events.0102.desc.fly_climb
			}
			triggered_desc = {
				trigger = {
					scope:dragon_current_move = flag:fly
					scope:human_current_move = flag:dive
				}
				desc = agot_dragon_slaying_events.0102.desc.fly_dive
			}
		}
	}

	theme = dragon

	# Background Logic
	override_background = {
		trigger = { scope:locale = flag:cave_exterior }
		reference = ep2_hunt_forest_cave
	}
	override_background = {
		trigger = { scope:locale = flag:cave_interior }
		reference = fp3_cave
	}
	override_background = {
		trigger = { scope:locale = flag:wilderness_scope }
		reference = wilderness_scope
	}
	override_background = {
		trigger = { scope:locale = flag:terrain_scope }
		reference = terrain_scope
	}
	override_background = {
		trigger = { scope:locale = flag:battlefield }
		reference = battlefield
	}
	override_background = {
		trigger = { scope:locale = flag:throne_room }
		reference = throne_room
	}
	override_background = {
		trigger = { scope:locale = flag:army_camp }
		reference = army_camp
	}
	#Special
	override_background = {
		trigger = { scope:locale = flag:agot_icecave }
		reference = agot_icecave
	}

	widgets = {
		widget = {
			is_shown = {
				scope:dragon.var:dragon_last_move ?= flag:burn
			}
			gui = "agot_shader_event_sparks"
			container = "agot_shader_event_foreground"
		}
		widget = {
			is_shown = {
				scope:dragon.var:dragon_last_move ?= flag:burn
			}
			gui = "agot_shader_event_fire"
			container = "agot_shader_event_background"
		}
	}

	left_portrait = {
		character = scope:human
		camera = camera_slay_dragon_human_event_left
		scripted_animation = duel_wield_weapon
	}
	right_portrait = {
		character = scope:dragon
		animation = dragon_main
		camera = camera_slay_dragon_event_right
	}

	immediate = {
		scope:dragon = { agot_dragon_slay_choose_finisher_move_effect = yes }
		if = {
			limit = { has_character_flag = ds_ouchie }
			add_character_flag = no_hat
		}

		# Going to calculate chances for ai to pick an option here so that they always pick the option
		# with the highest likelihood
		# if = {
		# 	limit = {
		# 		is_ai = yes
		# 	}

			if = {
				limit = {
					scope:dragon_current_move = flag:crush
				}
				save_scope_value_as = {
					name = crush_stand
					value = {
						value = 5 # Base chance for average joe complete victory
						# Add combat difference - unscathed chance option
						switch = {
							trigger = scope:human.var:ds_combat_difference
							1 = { add = -1 }
							2 = { add = -1 }
							3 = { add = -2 }
							4 = { add = -2 }
							5 = { add = -3 }
							6 = { add = -3 }
							7 = { add = -4 }
							8 = { add = -4 }
							9 = { add = -5 }
							10 = { add = -5 }
							-1 = { add = 2 }
							-2 = { add = 2 }
							-3 = { add = 4 }
							-4 = { add = 4 }
							-5 = { add = 6 }
							-6 = { add = 6 }
							-7 = { add = 8 }
							-8 = { add = 8 }
							-9 = { add = 10 }
							-10 = { add = 10 }
							fallback = {}
						}

						# Now if the ai is injured, account for chance of dying from injury
						# You live through minor injuries
						if = {
							limit = {
								NOT = { has_extreme_wounds = yes }
							}
							add = 5 # for average joe
							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = -1 }
								2 = { add = -1 }
								3 = { add = -2 }
								4 = { add = -2 }
								5 = { add = -3 }
								6 = { add = -3 }
								7 = { add = -4 }
								8 = { add = -4 }
								9 = { add = -5 }
								10 = { add = -5 }
								-1 = { add = 3 }
								-2 = { add = 3 }
								-3 = { add = 6 }
								-4 = { add = 6 }
								-5 = { add = 9 }
								-6 = { add = 9 }
								-7 = { add = 12 }
								-8 = { add = 12 }
								-9 = { add = 15 }
								-10 = { add = 15 }
								fallback = {}
							}
						}
						# You live through major wounds
						if = {
							limit = {
								NOT = { has_severe_wounds = yes }
							}
							add = 20 # For average joe

							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = -4 }
								2 = { add = -4 }
								3 = { add = -8 }
								4 = { add = -8 }
								5 = { add = -12 }
								6 = { add = -12 }
								7 = { add = -16 }
								8 = { add = -16 }
								9 = { add = -20 }
								10 = { add = -20 }
								-1 = { add = -2 }
								-2 = { add = -2 }
								-3 = { add = -4 }
								-4 = { add = -4 }
								-5 = { add = -6 }
								-6 = { add = -6 }
								-7 = { add = -8 }
								-8 = { add = -8 }
								-9 = { add = -10 }
								-10 = { add = -10 }
								fallback = {}
							}
						}
					}
				}

				save_scope_value_as = {
					name = crush_move
					value = {
						value = 5 # Base chance for average joe complete victory
						# Add combat difference - unscathed chance option
						switch = {
							trigger = scope:human.var:ds_combat_difference
							1 = { add = -1 }
							2 = { add = -1 }
							3 = { add = -2 }
							4 = { add = -2 }
							5 = { add = -3 }
							6 = { add = -3 }
							7 = { add = -4 }
							8 = { add = -4 }
							9 = { add = -5 }
							10 = { add = -5 }
							-1 = { add = 3 }
							-2 = { add = 3 }
							-3 = { add = 6 }
							-4 = { add = 6 }
							-5 = { add = 9 }
							-6 = { add = 9 }
							-7 = { add = 12 }
							-8 = { add = 12 }
							-9 = { add = 15 }
							-10 = { add = 15 }
							fallback = {}
						}

						# Now if the ai is injured, account for chance of dying from injury
						# You live through minor injuries
						if = {
							limit = {
								NOT = { has_extreme_wounds = yes }
							}
							add = 15 # for average joe
							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = -3 }
								2 = { add = -3 }
								3 = { add = -6 }
								4 = { add = -6 }
								5 = { add = -9 }
								6 = { add = -9 }
								7 = { add = -12 }
								8 = { add = -12 }
								9 = { add = -15 }
								10 = { add = -15 }
								-1 = { add = 1 }
								-2 = { add = 1 }
								-3 = { add = 2 }
								-4 = { add = 2 }
								-5 = { add = 3 }
								-6 = { add = 3 }
								-7 = { add = 4 }
								-8 = { add = 4 }
								-9 = { add = 5 }
								-10 = { add = 5 }
								fallback = {}
							}
							# For some of these we have to account for burns
							if = {
								limit = {
									has_trait_xp = {
										trait = burned
										value >= 70
									}
								}
								# Risks burning to death
								if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 90
										}
									}
									add = {
										value = 15
										multiply = -1
									}
								}
								else_if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 80
										}
									}
									add = {
										value = 10
										multiply = -1
									}
								}
								else = {
									add = {
										value = 5
										multiply = -1
									}
								}
							}
						}
						# You live through major wounds
						if = {
							limit = {
								NOT = { has_severe_wounds = yes }
							}
							add = 30 # For average joe

							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = -2 }
								2 = { add = -2 }
								3 = { add = -4 }
								4 = { add = -4 }
								5 = { add = -6 }
								6 = { add = -6 }
								7 = { add = -8 }
								8 = { add = -8 }
								9 = { add = -10 }
								10 = { add = -10 }
								-1 = { add = -1 }
								-2 = { add = -1 }
								-3 = { add = -2 }
								-4 = { add = -2 }
								-5 = { add = -3 }
								-6 = { add = -3 }
								-7 = { add = -4 }
								-8 = { add = -4 }
								-9 = { add = -5 }
								-10 = { add = -5 }
								fallback = {}
							}

							# For some of these we have to account for burns
							if = {
								limit = {
									has_trait_xp = {
										trait = burned
										value >= 40
									}
								}
								# Risks burning to death
								if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 80
										}
									}
									add = {
										value = 30
										multiply = -1
									}
								}
								else_if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 60
										}
									}
									add = {
										value = 20
										multiply = -1
									}
								}
								else = {
									add = {
										value = 10
										multiply = -1
									}
								}
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					scope:dragon_current_move = flag:fly
					scope:human_current_move = flag:dive
				}
				# Here needs a bit of other consideration
				# The alternative option is giving up so we will have to do some weighting
				save_scope_value_as = {
					name = fly_dive
					value = {
						value = 5 # Base chance for average joe complete victory
						# Add combat difference - unscathed chance option
						switch = {
							trigger = scope:human.var:ds_combat_difference
							1 = { add = -1 }
							2 = { add = -1 }
							3 = { add = -2 }
							4 = { add = -2 }
							5 = { add = -3 }
							6 = { add = -3 }
							7 = { add = -4 }
							8 = { add = -4 }
							9 = { add = -5 }
							10 = { add = -5 }
							-1 = { add = 1 }
							-2 = { add = 1 }
							-3 = { add = 2 }
							-4 = { add = 2 }
							-5 = { add = 3 }
							-6 = { add = 3 }
							-7 = { add = 4 }
							-8 = { add = 4 }
							-9 = { add = 5 }
							-10 = { add = 5 }
							fallback = {}
						}

						# Now if the ai is injured, account for chance of dying from injury
						# You live through minor injuries
						if = {
							limit = {
								NOT = { has_extreme_wounds = yes }
							}
							add = 10 # for average joe
							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = -2 }
								2 = { add = -2 }
								3 = { add = -4 }
								4 = { add = -4 }
								5 = { add = -6 }
								6 = { add = -6 }
								7 = { add = -8 }
								8 = { add = -8 }
								9 = { add = -10 }
								10 = { add = -10 }
								-1 = { add = 2 }
								-2 = { add = 2 }
								-3 = { add = 4 }
								-4 = { add = 4 }
								-5 = { add = 6 }
								-6 = { add = 6 }
								-7 = { add = 8 }
								-8 = { add = 8 }
								-9 = { add = 10 }
								-10 = { add = 10 }
								fallback = {}
							}

							# For some of these we have to account for burns
							if = {
								limit = {
									has_trait_xp = {
										trait = burned
										value >= 70
									}
								}
								# Risks burning to death
								if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 90
										}
									}
									add = {
										value = 15
										multiply = -1
									}
								}
								else_if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 80
										}
									}
									add = {
										value = 10
										multiply = -1
									}
								}
								else = {
									add = {
										value = 5
										multiply = -1
									}
								}
							}
						}
						# You live through major wounds
						if = {
							limit = {
								NOT = { has_severe_wounds = yes }
							}
							add = 25 # For average joe

							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								-1 = { add = -1 }
								-2 = { add = -1 }
								-3 = { add = -2 }
								-4 = { add = -2 }
								-5 = { add = -3 }
								-6 = { add = -3 }
								-7 = { add = -4 }
								-8 = { add = -4 }
								-9 = { add = -5 }
								-10 = { add = -5 }
								fallback = {}
							}

							# For some of these we have to account for burns
							if = {
								limit = {
									has_trait_xp = {
										trait = burned
										value >= 40
									}
								}
								# Risks burning to death
								if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 80
										}
									}
									add = {
										value = 30
										multiply = -1
									}
								}
								else_if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 60
										}
									}
									add = {
										value = 20
										multiply = -1
									}
								}
								else = {
									add = {
										value = 10
										multiply = -1
									}
								}
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					scope:dragon_current_move = flag:tail
				}
				save_scope_value_as = {
					name = tail_head
					value = {
						value = 10 # Base chance for average joe complete victory
						# Add combat difference - unscathed chance option
						switch = {
							trigger = scope:human.var:ds_combat_difference
							1 = { add = -2 }
							2 = { add = -2 }
							3 = { add = -4 }
							4 = { add = -4 }
							5 = { add = -6 }
							6 = { add = -6 }
							7 = { add = -8 }
							8 = { add = -8 }
							9 = { add = -10 }
							10 = { add = -10 }
							-1 = { add = 2 }
							-2 = { add = 2 }
							-3 = { add = 4 }
							-4 = { add = 4 }
							-5 = { add = 6 }
							-6 = { add = 6 }
							-7 = { add = 8 }
							-8 = { add = 8 }
							-9 = { add = 10 }
							-10 = { add = 10 }
							fallback = {}
						}

						# Now if the ai is injured, account for chance of dying from injury
						# You live through minor injuries
						if = {
							limit = {
								NOT = { has_extreme_wounds = yes }
							}
							add = 10 # for average joe
							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = -2 }
								2 = { add = -2 }
								3 = { add = -4 }
								4 = { add = -4 }
								5 = { add = -6 }
								6 = { add = -6 }
								7 = { add = -8 }
								8 = { add = -8 }
								9 = { add = -10 }
								10 = { add = -10 }
								-1 = { add = 1 }
								-2 = { add = 1 }
								-3 = { add = 2 }
								-4 = { add = 2 }
								-5 = { add = 3 }
								-6 = { add = 3 }
								-7 = { add = 4 }
								-8 = { add = 4 }
								-9 = { add = 5 }
								-10 = { add = 5 }
								fallback = {}
							}
						}
						# You live through major wounds
						if = {
							limit = {
								NOT = { has_severe_wounds = yes }
							}
							add = 20 # For average joe

							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = -3 }
								2 = { add = -3 }
								3 = { add = -6 }
								4 = { add = -6 }
								5 = { add = -9 }
								6 = { add = -9 }
								7 = { add = -12 }
								8 = { add = -12 }
								9 = { add = -15 }
								10 = { add = -15 }
								-1 = { add = -1 }
								-2 = { add = -1 }
								-3 = { add = -2 }
								-4 = { add = -2 }
								-5 = { add = -3 }
								-6 = { add = -3 }
								-7 = { add = -4 }
								-8 = { add = -4 }
								-9 = { add = -5 }
								-10 = { add = -5 }
								fallback = {}
							}
						}
					}
				}

				save_scope_value_as = {
					name = tail_roll
					value = {
						value = 5 # Base chance for average joe complete victory
						# Add combat difference - unscathed chance option
						switch = {
							trigger = scope:human.var:ds_combat_difference
							1 = { add = -1 }
							2 = { add = -1 }
							3 = { add = -2 }
							4 = { add = -2 }
							5 = { add = -3 }
							6 = { add = -3 }
							7 = { add = -4 }
							8 = { add = -4 }
							9 = { add = -5 }
							10 = { add = -5 }
							-1 = { add = 1 }
							-2 = { add = 1 }
							-3 = { add = 2 }
							-4 = { add = 2 }
							-5 = { add = 3 }
							-6 = { add = 3 }
							-7 = { add = 4 }
							-8 = { add = 4 }
							-9 = { add = 5 }
							-10 = { add = 5 }
							fallback = {}
						}

						# Now if the ai is injured, account for chance of dying from injury
						# You live through minor injuries
						if = {
							limit = {
								NOT = { has_extreme_wounds = yes }
							}
							add = 20 # for average joe
							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = -4 }
								2 = { add = -4 }
								3 = { add = -8 }
								4 = { add = -8 }
								5 = { add = -12 }
								6 = { add = -12 }
								7 = { add = -16 }
								8 = { add = -16 }
								9 = { add = -20 }
								10 = { add = -20 }
								-1 = { add = 1 }
								-2 = { add = 1 }
								-3 = { add = 2 }
								-4 = { add = 2 }
								-5 = { add = 3 }
								-6 = { add = 3 }
								-7 = { add = 4 }
								-8 = { add = 4 }
								-9 = { add = 5 }
								-10 = { add = 5 }
								fallback = {}
							}
							# For some of these we have to account for burns
							if = {
								limit = {
									has_trait_xp = {
										trait = burned
										value >= 70
									}
								}
								# Risks burning to death
								if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 90
										}
									}
									add = {
										value = 15
										multiply = -1
									}
								}
								else_if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 80
										}
									}
									add = {
										value = 10
										multiply = -1
									}
								}
								else = {
									add = {
										value = 5
										multiply = -1
									}
								}
							}
						}
						# You live through major wounds
						if = {
							limit = {
								NOT = { has_severe_wounds = yes }
							}
							add = 35 # For average joe

							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = -3 }
								2 = { add = -3 }
								3 = { add = -6 }
								4 = { add = -6 }
								5 = { add = -9 }
								6 = { add = -9 }
								7 = { add = -12 }
								8 = { add = -12 }
								9 = { add = -15 }
								10 = { add = -15 }
								fallback = {}
							}

							# For some of these we have to account for burns
							if = {
								limit = {
									has_trait_xp = {
										trait = burned
										value >= 40
									}
								}
								# Risks burning to death
								if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 80
										}
									}
									add = {
										value = 30
										multiply = -1
									}
								}
								else_if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 60
										}
									}
									add = {
										value = 20
										multiply = -1
									}
								}
								else = {
									add = {
										value = 10
										multiply = -1
									}
								}
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					scope:dragon_current_move = flag:shake
				}
				save_scope_value_as = {
					name = shake_head
					value = {
						value = 10 # Base chance for average joe complete victory
						# Add combat difference - unscathed chance option
						switch = {
							trigger = scope:human.var:ds_combat_difference
							1 = { add = -2 }
							2 = { add = -2 }
							3 = { add = -4 }
							4 = { add = -4 }
							5 = { add = -6 }
							6 = { add = -6 }
							7 = { add = -8 }
							8 = { add = -8 }
							9 = { add = -10 }
							10 = { add = -10 }
							-1 = { add = 2 }
							-2 = { add = 2 }
							-3 = { add = 4 }
							-4 = { add = 4 }
							-5 = { add = 6 }
							-6 = { add = 6 }
							-7 = { add = 8 }
							-8 = { add = 8 }
							-9 = { add = 10 }
							-10 = { add = 10 }
							fallback = {}
						}

						# Now if the ai is injured, account for chance of dying from injury
						# You live through minor injuries
						if = {
							limit = {
								NOT = { has_extreme_wounds = yes }
							}
							add = 10 # for average joe
							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = -2 }
								2 = { add = -2 }
								3 = { add = -4 }
								4 = { add = -4 }
								5 = { add = -6 }
								6 = { add = -6 }
								7 = { add = -8 }
								8 = { add = -8 }
								9 = { add = -10 }
								10 = { add = -10 }
								-1 = { add = 1 }
								-2 = { add = 1 }
								-3 = { add = 2 }
								-4 = { add = 2 }
								-5 = { add = 3 }
								-6 = { add = 3 }
								-7 = { add = 4 }
								-8 = { add = 4 }
								-9 = { add = 5 }
								-10 = { add = 5 }
								fallback = {}
							}
						}
						# You live through major wounds
						if = {
							limit = {
								NOT = { has_severe_wounds = yes }
							}
							add = 20 # For average joe

							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = -3 }
								2 = { add = -3 }
								3 = { add = -6 }
								4 = { add = -6 }
								5 = { add = -9 }
								6 = { add = -9 }
								7 = { add = -12 }
								8 = { add = -12 }
								9 = { add = -15 }
								10 = { add = -15 }
								-1 = { add = -1 }
								-2 = { add = -1 }
								-3 = { add = -2 }
								-4 = { add = -2 }
								-5 = { add = -3 }
								-6 = { add = -3 }
								-7 = { add = -4 }
								-8 = { add = -4 }
								-9 = { add = -5 }
								-10 = { add = -5 }
								fallback = {}
							}
						}
					}
				}

				save_scope_value_as = {
					name = shake_roll
					value = {
						value = 5 # Base chance for average joe complete victory
						# Add combat difference - unscathed chance option
						switch = {
							trigger = scope:human.var:ds_combat_difference
							1 = { add = -1 }
							2 = { add = -1 }
							3 = { add = -2 }
							4 = { add = -2 }
							5 = { add = -3 }
							6 = { add = -3 }
							7 = { add = -4 }
							8 = { add = -4 }
							9 = { add = -5 }
							10 = { add = -5 }
							-1 = { add = 1 }
							-2 = { add = 1 }
							-3 = { add = 2 }
							-4 = { add = 2 }
							-5 = { add = 3 }
							-6 = { add = 3 }
							-7 = { add = 4 }
							-8 = { add = 4 }
							-9 = { add = 5 }
							-10 = { add = 5 }
							fallback = {}
						}

						# Now if the ai is injured, account for chance of dying from injury
						# You live through minor injuries
						if = {
							limit = {
								NOT = { has_extreme_wounds = yes }
							}
							add = 20 # for average joe
							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = -4 }
								2 = { add = -4 }
								3 = { add = -8 }
								4 = { add = -8 }
								5 = { add = -12 }
								6 = { add = -12 }
								7 = { add = -16 }
								8 = { add = -16 }
								9 = { add = -20 }
								10 = { add = -20 }
								-1 = { add = 1 }
								-2 = { add = 1 }
								-3 = { add = 2 }
								-4 = { add = 2 }
								-5 = { add = 3 }
								-6 = { add = 3 }
								-7 = { add = 4 }
								-8 = { add = 4 }
								-9 = { add = 5 }
								-10 = { add = 5 }
								fallback = {}
							}

							# For some of these we have to account for burns
							if = {
								limit = {
									has_trait_xp = {
										trait = burned
										value >= 70
									}
								}
								# Risks burning to death
								if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 90
										}
									}
									add = {
										value = 15
										multiply = -1
									}
								}
								else_if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 80
										}
									}
									add = {
										value = 10
										multiply = -1
									}
								}
								else = {
									add = {
										value = 5
										multiply = -1
									}
								}
							}
						}
						# You live through major wounds
						if = {
							limit = {
								NOT = { has_severe_wounds = yes }
							}
							add = 35 # For average joe

							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = 8 }
								2 = { add = 8 }
								3 = { add = 16 }
								4 = { add = 16 }
								5 = { add = 24 }
								6 = { add = 24 }
								7 = { add = 32 }
								8 = { add = 32 }
								9 = { add = 40 }
								10 = { add = 40 }
								-1 = { add = -2 }
								-2 = { add = -2 }
								-3 = { add = -4 }
								-4 = { add = -4 }
								-5 = { add = -6 }
								-6 = { add = -6 }
								-7 = { add = -8 }
								-8 = { add = -8 }
								-9 = { add = -10 }
								-10 = { add = -10 }
								fallback = {}
							}

							# For some of these we have to account for burns
							if = {
								limit = {
									has_trait_xp = {
										trait = burned
										value >= 40
									}
								}
								# Risks burning to death
								if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 80
										}
									}
									add = {
										value = 30
										multiply = -1
									}
								}
								else_if = {
									limit = {
										has_trait_xp = {
											trait = burned
											value >= 60
										}
									}
									add = {
										value = 20
										multiply = -1
									}
								}
								else = {
									add = {
										value = 10
										multiply = -1
									}
								}
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					scope:dragon_current_move = flag:fly
					scope:human_current_move = flag:climb
				}
				# Here needs a bit of other consideration
				# The alternative option is giving up so we will have to do some weighting
				save_scope_value_as = {
					name = fly_climb
					value = {
						value = 5 # Base chance for average joe complete victory
						# Add combat difference - unscathed chance option
						switch = {
							trigger = scope:human.var:ds_combat_difference
							1 = { add = -1 }
							2 = { add = -1 }
							3 = { add = -2 }
							4 = { add = -2 }
							5 = { add = -3 }
							6 = { add = -3 }
							7 = { add = -4 }
							8 = { add = -4 }
							9 = { add = -5 }
							10 = { add = -5 }
							-1 = { add = 2 }
							-2 = { add = 2 }
							-3 = { add = 4 }
							-4 = { add = 4 }
							-5 = { add = 6 }
							-6 = { add = 6 }
							-7 = { add = 8 }
							-8 = { add = 8 }
							-9 = { add = 10 }
							-10 = { add = 10 }
							fallback = {}
						}

						# Now if the ai is injured, account for chance of dying from injury
						# You live through minor injuries
						if = {
							limit = {
								NOT = { has_extreme_wounds = yes }
							}
							add = 5 # for average joe
							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = -1 }
								2 = { add = -1 }
								3 = { add = -2 }
								4 = { add = -2 }
								5 = { add = -3 }
								6 = { add = -3 }
								7 = { add = -4 }
								8 = { add = -4 }
								9 = { add = -5 }
								10 = { add = -5 }
								-1 = { add = 3 }
								-2 = { add = 3 }
								-3 = { add = 6 }
								-4 = { add = 6 }
								-5 = { add = 9 }
								-6 = { add = 9 }
								-7 = { add = 12 }
								-8 = { add = 12 }
								-9 = { add = 15 }
								-10 = { add = 15 }
								fallback = {}
							}
						}
						# You live through major wounds
						if = {
							limit = {
								NOT = { has_severe_wounds = yes }
							}
							add = 20 # For average joe

							# Combat scaling
							switch = {
								trigger = scope:human.var:ds_combat_difference
								1 = { add = -4 }
								2 = { add = -4 }
								3 = { add = -8 }
								4 = { add = -8 }
								5 = { add = -12 }
								6 = { add = -12 }
								7 = { add = -16 }
								8 = { add = -16 }
								9 = { add = -20 }
								10 = { add = -20 }
								-1 = { add = -2 }
								-2 = { add = -2 }
								-3 = { add = -4 }
								-4 = { add = -4 }
								-5 = { add = -6 }
								-6 = { add = -6 }
								-7 = { add = -8 }
								-8 = { add = -8 }
								-9 = { add = -10 }
								-10 = { add = -10 }
								fallback = {}
							}
						}
					}
				}
			}
		#}
	}

	##############################
	# Player dove beneath dragon #
	##############################

	### Dragon tries to crush the player

	# NOT IF I KILL IT FIRST
	option = { # Higher chance of victory, but higher chance of personal risk
		trigger = {
			scope:dragon_current_move = flag:crush
			NOT = { has_trait = craven }
		}
		save_scope_value_as = {
			name = human_current_move
			value = flag:crushcrushcrush
		}
		save_scope_value_as = {
			name = human_last_move
			value = flag:dive
		}
		random_list = {
			5 = { # Victory
				custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
				custom_tooltip = agot_dragon_slaying_events.0102.tt.win

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			5 = { # Some damage
				if = {
					limit = {
						has_extreme_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			20 = { # Large Damage
				if = {
					limit = {
						has_severe_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.severely_injured
						scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 2 } }
					}
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -16
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -20
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			70 = { # Loss
				add_character_flag = ds_death
				custom_tooltip = agot_dragon_slaying_events.0100.tt.death

				modifier = {
					add = 6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = 12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = 18
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = 24
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = 30
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { has_character_flag = ds_death }
			}
			add_character_flag = ds_win
		}

		name = agot_dragon_slaying_events.0102.kill_first_crush
		custom_tooltip = agot_dragon_slaying_events.0102.kill_first_crush.tt

		ai_chance = {
			# For this the weights should literally just be which ever has the highest likelihood of success
			base = 0
			modifier = {
				exists = scope:crush_stand
				add = scope:crush_stand
			}
			modifier = { # This way the ai always picks highest value option
				scope:crush_move > scope:crush_stand
				factor = 0
			}
		}
	}

	# MOVE
	option = {
		trigger = {
			scope:dragon_current_move = flag:crush
		}
		save_scope_value_as = {
			name = human_current_move
			value = flag:crush_move
		}
		save_scope_value_as = {
			name = human_last_move
			value = flag:dive
		}
		random_list = {
			5 = { # Victory
				add_character_flag = ds_win

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			15 = { # Some damage

				# Some burns AND maybe some wounds
				if = {
					limit = {
						has_extreme_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				custom_tooltip = {
					text = agot_dragon_slaying_events.0102.tt.may_experience_burns
					agot_ds_burn_effect = { MIN = 0 MAX = 30 }
				}

				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			30 = { # Large Damage
				if = {
					limit = {
						has_severe_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.severely_injured
						scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 2 } }
					}
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				custom_tooltip = {
					text = agot_dragon_slaying_events.0102.tt.may_experience_burns
					agot_ds_burn_effect = { MIN = 0 MAX = 60 }
				}

				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			50 = { # Loss
				add_character_flag = ds_death
				custom_tooltip = agot_dragon_slaying_events.0100.tt.death

				modifier = {
					add = 6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = 12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = 18
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = 24
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = 30
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
		}

		name = agot_dragon_slaying_events.0102.roll

		ai_chance = {
			# For this the weights should literally just be which ever has the highest likelihood of success
			base = 0
			modifier = {
				exists = scope:crush_move
				add = scope:crush_move
			}
			modifier = { # This way the ai always picks highest value option
				scope:crush_move < scope:crush_stand
				factor = 0
			}
		}
	}

	### Dragon tries to take flight

	# Not if I kill it first?
	option = {
		trigger = {
			scope:dragon_current_move = flag:fly
			scope:human_current_move = flag:dive
			NOT = { has_trait = craven }
		}
		save_scope_value_as = {
			name = human_current_move
			value = flag:stop_fly
		}
		save_scope_value_as = {
			name = human_last_move
			value = flag:dive
		}
		# You are beneath the dragon and it is taking off
		# You have one chance to kill it before it flees, but the stakes are less lethal
		random_list = {
			5 = { # Victory
				custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
				custom_tooltip = agot_dragon_slaying_events.0102.tt.win

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			10 = { # Take Some damage while trying
				if = {
					limit = {
						has_extreme_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				custom_tooltip = {
					text = agot_dragon_slaying_events.0102.tt.may_experience_burns
					agot_ds_burn_effect = { MIN = 0 MAX = 30 }
				}

				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			25 = { # Large Damage
				if = {
					limit = {
						has_severe_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.severely_injured
						scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 2 } }
					}
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				custom_tooltip = {
					text = agot_dragon_slaying_events.0102.tt.may_experience_burns
					agot_ds_burn_effect = { MIN = 0 MAX = 60 }
				}

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			50 = { # Loss
				add_character_flag = ds_loss
				custom_tooltip = agot_dragon_slaying_events.0102.tt.dragon_gets_away

				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = 10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = 15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = 20
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = 25
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { has_character_flag = ds_death }
			}
			add_character_flag = ds_win
		}
		name = agot_dragon_slaying_events.0102.kill_first_fly
		custom_tooltip = agot_dragon_slaying_events.0102.kill_first_fly.tt

		ai_chance = {
			# Ai needs to decide if pursuing is worth it
			base = 50
			modifier = {
				exists = scope:fly_dive
				add = scope:fly_dive
			}
			ai_value_modifier = {
				ai_boldness = 1
				ai_greed = 1
			}
		}
	}

	# Let it fly away
	option = {
		trigger = {
			scope:dragon_current_move = flag:fly
			scope:human_current_move = flag:dive
		}
		add_character_flag = ds_loss
		save_scope_value_as = {
			name = human_current_move
			value = flag:dive_let_fly
		}
		save_scope_value_as = {
			name = human_last_move
			value = flag:dive
		}

		if = {
			limit = {
				has_trait = brave
			}
			add_stress = medium_stress_gain
		}

		name = agot_dragon_slaying_events.0102.dive_fly_away
		custom_tooltip = agot_dragon_slaying_events.0102.tt.dragon_gets_away

		ai_chance = {
			# Ai needs to decide if pursuing is worth it
			base = 50
			modifier = {
				exists = scope:fly_dive
				add = {
					value = scope:fly_dive
					multiply = -1
				}
			}
		}
	}

	##################################
	# Player climbed onto the dragon #
	##################################

	### Dragon tries to hit player with tail

	# Climb towards the head
	option = {
		trigger = {
			scope:dragon_current_move = flag:tail
			NOT = { has_trait = craven }
		}
		save_scope_value_as = {
			name = human_current_move
			value = flag:climb_head
		}
		save_scope_value_as = {
			name = human_last_move
			value = flag:climb
		}
		# For now, just copying probabilities of crush
		random_list = {
			10 = { # Victory
				custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
				custom_tooltip = agot_dragon_slaying_events.0102.tt.win

				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			10 = { # Some damage
				if = {
					limit = {
						has_extreme_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			20 = { # Large Damage
				if = {
					limit = {
						has_severe_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.severely_injured
						scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 2 } }
					}
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			60 = { # Loss
				add_character_flag = ds_death
				custom_tooltip = agot_dragon_slaying_events.0100.tt.death

				modifier = {
					add = 7
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = 14
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = 21
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = 28
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = 35
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { has_character_flag = ds_death }
			}
			add_character_flag = ds_win
		}
		name = agot_dragon_slaying_events.0102.climb_head

		ai_chance = {
			base = 0
			modifier = {
				exists = scope:tail_head
				add = scope:tail_head
			}
			modifier = { # This way the ai always picks highest value option
				scope:tail_head < scope:tail_roll
				factor = 0
			}
		}
	}

	# Roll off
	option = {
		trigger = {
			scope:dragon_current_move = flag:tail
		}
		save_scope_value_as = {
			name = human_current_move
			value = flag:climb_roll
		}
		save_scope_value_as = {
			name = human_last_move
			value = flag:climb
		}
		random_list = {
			5 = { # Victory
				custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
				custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				# If your blade is poisoned, increase chances of victory

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			20 = { # Some damage
				if = {
					limit = {
						has_extreme_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				custom_tooltip = {
					text = agot_dragon_slaying_events.0102.tt.may_experience_burns
					agot_ds_burn_effect = { MIN = 0 MAX = 30 }
				}

				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -16
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -20
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			35 = { # Large Damage
				if = {
					limit = {
						has_severe_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.severely_injured
						scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 2 } }
					}
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				custom_tooltip = {
					text = agot_dragon_slaying_events.0102.tt.may_experience_burns
					agot_ds_burn_effect = { MIN = 0 MAX = 60 }
				}

				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}
			}
			40 = { # Loss
				add_character_flag = ds_death
				custom_tooltip = agot_dragon_slaying_events.0100.tt.death

				modifier = {
					add = 8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = 16
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = 24
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = 32
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = 40
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { has_character_flag = ds_death }
			}
			add_character_flag = ds_win
		}
		name = agot_dragon_slaying_events.0102.get_off

		ai_chance = {
			base = 0
			modifier = {
				exists = scope:tail_roll
				add = scope:tail_roll
			}
			modifier = { # This way the ai always picks highest value option
				scope:tail_head > scope:tail_roll
				factor = 0
			}
			modifier = {
				has_trait = craven
				add = 100
			}
		}
	}

	### Dragon tries to shake player off

	# Climb towards the head
	option = {
		trigger = {
			scope:dragon_current_move = flag:shake
			NOT = { has_trait = craven }
		}
		save_scope_value_as = {
			name = human_current_move
			value = flag:shake_climb
		}
		save_scope_value_as = {
			name = human_last_move
			value = flag:climb
		}
		random_list = {
			10 = { # Victory
				custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
				custom_tooltip = agot_dragon_slaying_events.0102.tt.win

				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			10 = { # Some damage
				if = {
					limit = {
						has_extreme_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			20 = { # Large Damage
				if = {
					limit = {
						has_severe_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.severely_injured
						scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 2 } }
					}
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			60 = { # Loss
				add_character_flag = ds_death
				custom_tooltip = agot_dragon_slaying_events.0100.tt.death

				modifier = {
					add = 7
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = 14
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = 21
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = 28
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = 35
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { has_character_flag = ds_death }
			}
			add_character_flag = ds_win
		}
		name = agot_dragon_slaying_events.0102.climb_head

		ai_chance = {
			base = 0
			modifier = {
				exists = scope:shake_head
				add = scope:shake_head
			}
			modifier = { # This way the ai always picks highest value option
				scope:shake_head < scope:shake_roll
				factor = 0
			}
		}
	}

	# Roll off
	option = {
		trigger = {
			scope:dragon_current_move = flag:shake
		}
		save_scope_value_as = {
			name = human_current_move
			value = flag:shake_roll
		}
		save_scope_value_as = {
			name = human_last_move
			value = flag:climb
		}
		random_list = {
			5 = { # Victory
				custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
				custom_tooltip = agot_dragon_slaying_events.0102.tt.win

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			20 = { # Some damage
				if = {
					limit = {
						has_extreme_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				custom_tooltip = {
					text = agot_dragon_slaying_events.0102.tt.may_experience_burns
					agot_ds_burn_effect = { MIN = 0 MAX = 30 }
				}

				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -16
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -20
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			35 = { # Large Damage
				if = {
					limit = {
						has_severe_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.severely_injured
						scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 2 } }
					}
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				custom_tooltip = {
					text = agot_dragon_slaying_events.0102.tt.may_experience_burns
					agot_ds_burn_effect = { MIN = 0 MAX = 60 }
				}

				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}
			}
			40 = { # Loss
				add_character_flag = ds_death
				custom_tooltip = agot_dragon_slaying_events.0100.tt.death

				modifier = {
					add = 8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = 16
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = 24
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = 32
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = 40
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { has_character_flag = ds_death }
			}
			add_character_flag = ds_win
		}
		name = agot_dragon_slaying_events.0102.get_off

		ai_chance = {
			base = 0
			modifier = {
				exists = scope:shake_roll
				add = scope:shake_roll
			}
			modifier = { # This way the ai always picks highest value option
				scope:shake_head > scope:shake_roll
				factor = 0
			}
			modifier = {
				has_trait = craven
				add = 100
			}
		}
	}

	### Dragon tries to take flight

	# Hold on tight
	option = {
		trigger = {
			scope:dragon_current_move = flag:fly
			scope:human_current_move = flag:climb
			NOT = { has_trait = craven }
		}
		save_scope_value_as = {
			name = human_current_move
			value = flag:fly_hold_on
		}
		save_scope_value_as = {
			name = human_last_move
			value = flag:climb
		}
		random_list = {
			5 = { # Victory
				custom_tooltip = agot_dragon_slaying_events.0100.tt.unscathed
				custom_tooltip = agot_dragon_slaying_events.0102.tt.win

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			5 = { # Some damage
				if = {
					limit = {
						has_extreme_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 1 } }
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				modifier = {
					add = -1
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -5
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = 3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = 6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = 9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = 12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = 15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			20 = { # Large Damage
				if = {
					limit = {
						has_severe_wounds = yes
					}
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.succumb_wounds
						add_character_flag = ds_death
					}
				}
				else = {
					custom_tooltip = {
						text = agot_dragon_slaying_events.0100.tt.severely_injured
						scope:human = { agot_dragon_combat_inflict_wounds_effect = { RANK = 2 } }
					}
					custom_tooltip = agot_dragon_slaying_events.0102.tt.win
				}

				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = -16
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = -20
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -2
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -4
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -8
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -10
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
			70 = { # Loss
				add_character_flag = ds_death
				custom_tooltip = agot_dragon_slaying_events.0100.tt.death

				modifier = {
					add = 6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 1
							scope:human.var:ds_combat_difference = 2
						}
					}
				}
				modifier = {
					add = 12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 3
							scope:human.var:ds_combat_difference = 4
						}
					}
				}
				modifier = {
					add = 18
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 5
							scope:human.var:ds_combat_difference = 6
						}
					}
				}
				modifier = {
					add = 24
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 7
							scope:human.var:ds_combat_difference = 8
						}
					}
				}
				modifier = {
					add = 30
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = 9
							scope:human.var:ds_combat_difference = 10
						}
					}
				}

				modifier = {
					add = -3
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -1
							scope:human.var:ds_combat_difference = -2
						}
					}
				}
				modifier = {
					add = -6
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -3
							scope:human.var:ds_combat_difference = -4
						}
					}
				}
				modifier = {
					add = -9
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -5
							scope:human.var:ds_combat_difference = -6
						}
					}
				}
				modifier = {
					add = -12
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -7
							scope:human.var:ds_combat_difference = -8
						}
					}
				}
				modifier = {
					add = -15
					trigger = {
						OR = {
							scope:human.var:ds_combat_difference = -9
							scope:human.var:ds_combat_difference = -10
						}
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { has_character_flag = ds_death }
			}
			add_character_flag = ds_win
		}
		name = agot_dragon_slaying_events.0102.hold_on

		ai_chance = {
			base = 50
			modifier = {
				exists = scope:fly_climb
				add = scope:fly_climb
			}
			ai_value_modifier = {
				ai_boldness = 1
				ai_greed = 1
			}
		}
	}

	# climb off - lets the dragon go
	option = {
		trigger = {
			scope:dragon_current_move = flag:fly
			scope:human_current_move = flag:climb
		}
		add_character_flag = ds_loss
		save_scope_value_as = {
			name = human_current_move
			value = flag:climb_let_fly
		}
		save_scope_value_as = {
			name = human_last_move
			value = flag:climb
		}
		if = {
			limit = {
				has_trait = brave
			}
			add_stress = medium_stress_gain
		}

		name = agot_dragon_slaying_events.0102.get_off
		custom_tooltip = agot_dragon_slaying_events.0102.tt.dragon_gets_away

		ai_chance = {
			base = 50
			modifier = {
				exists = scope:fly_climb
				add = {
					value = scope:fly_climb
					multiply = -1
				}
			}
		}
	}

	after = {
		if = {
			limit = {
				has_character_flag = ds_win
			}
			trigger_event = agot_dragon_slaying_events.0110
		}
		else_if = {
			limit = {
				OR = {
					has_character_flag = ds_loss
					has_character_flag = ds_death
				}
			}
			if = {
				limit = {
					has_trait_xp = {
						trait = burned
						value >= 100
					}
				}
				add_character_flag = death_burn
			}
			trigger_event = agot_dragon_slaying_events.0111
		}
	}

}

# Victory
agot_dragon_slaying_events.0110 = {

	type = character_event
	title = agot_dragon_slaying_events.0110.t
	window = dragon_character_event
	# Victories are far less common so the loc should be easier
	# ... right?
	desc = {
		first_valid = { # Dragon's Last Move
			# From 0100 - In this case, you inflicted a wound to the dragon that was lethal
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:burn }
				desc = {
					random_valid = {
						desc = agot_dragon_slaying_events.0100.desc.last_move_burn1
						desc = agot_dragon_slaying_events.0100.desc.last_move_burn2
						desc = agot_dragon_slaying_events.0100.desc.last_move_burn3
					}
				}
			}
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:lunge }
				desc = agot_dragon_slaying_events.0100.desc.last_move_lunge
			}
			# You can win from 101 by -punting- confronting the dragon head on
			triggered_desc = {
				trigger = {
					scope:human_current_move = flag:confront
				}
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { scope:dragon_current_move = flag:bite }
							desc = agot_dragon_slaying_events.0102.desc.bite
						}
						triggered_desc = {
							trigger = { scope:dragon_current_move = flag:tail }
							desc = agot_dragon_slaying_events.0102.desc.tail_swipe
						}
					}
				}
			}
			# From 0102 you can win
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:tail }
				desc = agot_dragon_slaying_events.0110.desc.move_climb_tail
			}
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:shake }
				desc = agot_dragon_slaying_events.0110.desc.move_climb_shake
			}
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:crush }
				desc = agot_dragon_slaying_events.0110.desc.move_dive_crush
			}
			triggered_desc = { # Dragon tries to fly away with you on its back
				trigger = {
					scope:dragon_current_move = flag:fly
					scope:human_last_move ?= flag:climb
				}
				desc = agot_dragon_slaying_events.0110.desc.move_climb_fly
			}
			triggered_desc = { # Dragon tries to fly away with you beneath
				trigger = {
					scope:dragon_current_move = flag:fly
					scope:human_last_move ?= flag:dive
				}
				desc = agot_dragon_slaying_events.0110.desc.move_dive_fly
			}
		}
		first_valid = { # How You Won
			triggered_desc = { # Approach
				trigger = { scope:human_current_move = flag:approach }
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { scope:dragon_current_move = flag:burn }
							desc = agot_dragon_slaying_events.0110.desc.win_burn_wound
						}
						triggered_desc = {
							trigger = { scope:dragon_current_move = flag:lunge }
							desc = agot_dragon_slaying_events.0110.desc.win_lunge_wound
						}
					}
				}
			}
			triggered_desc = { # Confront
				trigger = { scope:human_current_move = flag:confront }
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { scope:dragon_current_move = flag:bite }
							desc = agot_dragon_slaying_events.0110.desc.win_confront_bite
						}
						triggered_desc = {
							trigger = { scope:dragon_current_move = flag:tail }
							desc = agot_dragon_slaying_events.0110.desc.win_confront_tail
						}
					}
				}
			}
			triggered_desc = { # Climb
				trigger = { scope:human_last_move ?= flag:climb }
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { scope:human_current_move = flag:climb_head }
							desc = agot_dragon_slaying_events.0110.desc.win_climb_head
						}
						triggered_desc = {
							trigger = { scope:human_current_move = flag:climb_roll }
							desc = agot_dragon_slaying_events.0110.desc.win_climb_roll
						}
						triggered_desc = {
							trigger = { scope:human_current_move = flag:shake_climb }
							desc = agot_dragon_slaying_events.0110.desc.win_shake_climb
						}
						triggered_desc = {
							trigger = { scope:human_current_move = flag:shake_roll }
							desc = agot_dragon_slaying_events.0110.desc.win_shake_roll
						}
						triggered_desc = {
							trigger = { scope:human_current_move = flag:fly_hold_on }
							desc = agot_dragon_slaying_events.0110.desc.win_climb_fly
						}
					}
				}
			}
			triggered_desc = { # Dive
				trigger = { scope:human_last_move ?= flag:dive }
				desc = {
					first_valid = {
						triggered_desc = { # You slew the dragon as it tried to crush you
							trigger = { scope:dragon_current_move = flag:crushcrushcrush }
							desc = agot_dragon_slaying_events.0110.desc.win_dive_crushcrushcrush
						}
						triggered_desc = { # You rolled away and killed the dragon
							trigger = { scope:dragon_current_move = flag:crush_move }
							desc = agot_dragon_slaying_events.0110.desc.win_dive_crush_move
						}
						triggered_desc = {
							trigger = { scope:dragon_current_move = flag:stop_fly }
							desc = agot_dragon_slaying_events.0110.desc.win_dive_stop_fly
						}
					}
				}
			}
		}
		random_valid = { # Mid
			desc = agot_dragon_slaying_events.0110.desc.mid1
			desc = agot_dragon_slaying_events.0110.desc.mid2
			desc = agot_dragon_slaying_events.0110.desc.mid3
		}
		first_valid = { # Choose Your Weapon
			triggered_desc = {
				trigger = { var:signature_weapon = flag:sword }
				desc = agot_dragon_slaying_events.0110.desc.sword
			}
			triggered_desc = {
				trigger = { var:signature_weapon = flag:dagger }
				desc = agot_dragon_slaying_events.0110.desc.dagger
			}
			triggered_desc = {
				trigger = { var:signature_weapon = flag:spear }
				desc = agot_dragon_slaying_events.0110.desc.spear
			}
			triggered_desc = {
				trigger = {
					OR = {
						var:signature_weapon = flag:axe
						var:signature_weapon = flag:hammer
						var:signature_weapon = flag:mace
					}
				}
				desc = agot_dragon_slaying_events.0110.desc.smash
			}
			desc = agot_dragon_slaying_events.0110.desc.fallback
		}
		random_valid = { # Ending
			desc = agot_dragon_slaying_events.0110.desc.ending1
			desc = agot_dragon_slaying_events.0110.desc.ending2
			desc = agot_dragon_slaying_events.0110.desc.ending3
			triggered_desc = {
				trigger = {
					title:c_ruins.holder = {
						any_owned_story = {
							story_type = story_dragon_variable_storage
							var:dragon_id ?= scope:dragon
							has_variable_list = past_riders
						}
					}
				}
				desc = agot_dragon_slaying_events.0110.desc.ending4
			}
			triggered_desc = {
				trigger = { scope:dragon.dragon_size >= level_seven_dragon_size }
				desc = agot_dragon_slaying_events.0110.desc.ending5
			}
		}
		triggered_desc = { # How Badly You Got It
			trigger = { NOT = { has_character_flag = ds_death } }
			desc = {
				first_valid = {
					triggered_desc = {
						trigger = {
							has_trait = wounded_1
							has_character_flag = ds_wounded
						}
						desc = agot_dragon_slaying_events.0111.desc.loss_wounded_one
					}
					triggered_desc = {
						trigger = {
							has_trait = wounded_2
							has_character_flag = ds_wounded
						}
						desc = agot_dragon_slaying_events.0111.desc.loss_wounded_two
					}
					triggered_desc = {
						trigger = {
							has_trait = wounded_3
							has_character_flag = ds_wounded
						}
						desc = agot_dragon_slaying_events.0111.desc.loss_wounded_three
					}
					triggered_desc = {
						trigger = {
							has_trait_xp = { trait = burned value < 50 }
							has_character_flag = ds_burned
						}
						desc = agot_dragon_slaying_events.0111.desc.loss_minor_burns
					}
					triggered_desc = {
						trigger = {
							has_trait_xp = { trait = burned value > 50 }
							has_character_flag = ds_burned
						}
						desc = agot_dragon_slaying_events.0111.desc.loss_major_burns
					}
					desc = agot_dragon_slaying_events.0111.desc.loss_unscathed
				}
			}
		}
		triggered_desc = { # Succeeded in Vengeance
			trigger = {
				exists = scope:vengeance_candidate
			}
			desc = agot_dragon_slaying_events.0110.desc_vengeance
		}
	}

	theme = dragon

	# Background Logic
	override_background = {
		trigger = { scope:locale = flag:cave_exterior }
		reference = ep2_hunt_forest_cave
	}
	override_background = {
		trigger = { scope:locale = flag:cave_interior }
		reference = fp3_cave
	}
	override_background = {
		trigger = { scope:locale = flag:wilderness_scope }
		reference = wilderness_scope
	}
	override_background = {
		trigger = { scope:locale = flag:terrain_scope }
		reference = terrain_scope
	}
	override_background = {
		trigger = { scope:locale = flag:battlefield }
		reference = battlefield
	}
	override_background = {
		trigger = { scope:locale = flag:throne_room }
		reference = throne_room
	}
	override_background = {
		trigger = { scope:locale = flag:army_camp }
		reference = army_camp
	}
	#Special
	override_background = {
		trigger = { scope:locale = flag:agot_icecave }
		reference = agot_icecave
	}

	widgets = {
		widget = {
			is_shown = {
				scope:dragon_current_move ?= flag:burn
			}
			gui = "agot_shader_event_sparks"
			container = "agot_shader_event_foreground"
		}
		widget = {
			is_shown = {
				scope:dragon_current_move ?= flag:burn
			}
			gui = "agot_shader_event_fire"
			container = "agot_shader_event_background"
		}
	}

	left_portrait = {
		character = root
		triggered_animation = {
			trigger = { var:signature_weapon = flag:axe }
			animation = celebrate_axe
		}
		triggered_animation = {
			trigger = { var:signature_weapon = flag:mace }
			animation = celebrate_mace
		}
		triggered_animation = {
			trigger = { var:signature_weapon = flag:sword }
			animation = celebrate_sword
		}
		triggered_animation = {
			trigger = { var:signature_weapon = flag:dagger }
			animation = celebrate_dagger
		}
		triggered_animation = {
			trigger = { var:signature_weapon = flag:spear }
			animation = celebrate_spear
		}
		triggered_animation = {
			trigger = {	var:signature_weapon = flag:hammer }
			animation = celebrate_hammer
		}
		animation = admiration
	}

	right_portrait = {
		character = scope:dragon
		animation = dragon_main
		camera = camera_dragon_event_standing

		triggered_outfit = {
			trigger = {
				scope:dragon = { level_ten_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_nine_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_eight_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_seven_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5 }
		}
		triggered_outfit = { # VHAGAR
			trigger = {
				scope:dragon = { level_six_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_five_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.0 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_four_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.9 }
		}
		triggered_outfit = { # MELEYS
			trigger = {
				scope:dragon = { level_three_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.8 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_two_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.5 }
		}
		triggered_outfit = { # SYRAX
			trigger = {
				scope:dragon = { level_one_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.4 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_zero_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.7 }
		}
		#End Dynamic Camera Zoom
	}

	immediate = {
		add_character_flag = { flag = recently_fought_dragon years = 1 }
		scope:dragon = {
			death = {
				death_reason = death_dragon_slain
				killer = root
			}
		}

		add_trait = dragonslayer
		give_nickname = nick_the_dragonslayer
		gain_legitimizing_legend_seed_tooltip_effect = yes
		hidden_effect = { legend_seed_great_deed_dynasty_effect = yes }

		if = {
			limit = {
				is_acclaimed = yes
			}
			accolade = {
				add_glory = major_glory_gain
			}
		}

		create_character_memory = {
			type = agot_slayed_dragon
			participants = { slayed_dragon = scope:dragon }
		}

		if = {
			limit = {
				scope:dragon = {
					is_male = no
					age >= 10
				}
			}
			random = {
				chance = 1
				save_scope_value_as = {
					name = dragon_egg
					value = flag:yes
				}
			}
		}
	}

	option = {
		name = {
			trigger = {
				NOR = {
					has_character_flag = ds_burned
					has_character_flag = ds_wounded
					has_character_flag = ds_maimed
					has_character_flag = ds_crippled
					has_character_flag = ds_ouchie
				}
			}
			text = agot_dragon_slaying_events.0110.a.stronger
		}
		name = {
			trigger = {
				OR = {
					has_character_flag = ds_burned
					has_character_flag = ds_wounded
					has_character_flag = ds_maimed
					has_character_flag = ds_crippled
					has_character_flag = ds_ouchie
				}
			}
			text = agot_dragon_slaying_events.0110.a
		}

		# For dragon skull implementation
		agot_create_artifact_dragon_skull_effect = {
			OWNER = root
			DRAGON = scope:dragon
			KILLER = root
		}

		if = {
			limit = {
				scope:dragon.dragon_size < 20
			}
			random = {
				chance = {
					value = 5
				}
				custom_tooltip = {
					text = agot_dragon_slaying_events.0110.blood_burn.tt
					send_interface_toast = {
						title = agot_dragon_slaying_events.0110.blood_burn.toast
						left_icon = root

						add_trait_xp = {
							trait = burned
							value = 100
						}
						death = {
							death_reason = death_burned
						}
					}
				}
			}
		}

		ai_chance = {
			base = 80
			modifier = {
				scope:dragon.dragon_size < 20
				add = ai_greed
				# If greed is sufficiently low the ai will not pick this option
				# To avoid burning from taking a dragon skull
			}
			modifier = {
				scope:dragon.dragon_size < 20
				exists = scope:dragon_egg
				factor = 0
			}
		}
	}

	option = {
		trigger = {
			scope:dragon.dragon_size < 20
		}
		name = agot_dragon_slaying_events.0110.b

		ai_chance = {
			base = 10
			modifier = {
				exists = scope:dragon_egg
				factor = 0
			}
		}
	}

	option = {
		trigger = {
			exists = scope:dragon_egg
		}
		name = agot_dragon_slaying_events.0110.egg
		flavor = agot_dragon_slaying_events.0110.egg.flavor

		custom_tooltip = {
			text = agot_dragon_slaying_events.0110.egg.tt
			agot_spawn_laid_egg = {
				OWNER_SCOPE = root
				AMOUNT_OF_EGGS_TO_SPAWN = 1
				DRAGON_PARENT = scope:dragon
			}
		}

		ai_chance = {
			base = 1
		}
	}

	after = {
		hidden_effect = {
			if = {
				limit = {
					is_alive = yes
					has_character_flag = ds_wounded
				}
				agot_resolve_wounds_events_effect = { REASON = duel }
			}

			agot_ds_clean_up_effect = yes

			every_player = {
				limit = {
					NOT = { this = root }
				}
				trigger_event = {
					id = agot_dragon_slaying_events.0112
					days = 1
				}
			}

			# If someone was sent to do the deed, inform the sender
			scope:ds_court_owner ?= {
				if = {
					limit = {
						is_alive = yes
					}

					trigger_event = {
						id = agot_dragon.0202
						days = 1
					}
				}
			}
		}
	}
}

# L
agot_dragon_slaying_events.0111 = {

	type = character_event
	title = agot_dragon_slaying_events.0111.t
	window = dragon_character_event
	desc = {
		first_valid = { # Dragon's Last Move
			# From 0100
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:burn }
				desc = {
					random_valid = {
						desc = agot_dragon_slaying_events.0100.desc.last_move_burn1
						desc = agot_dragon_slaying_events.0100.desc.last_move_burn2
						desc = agot_dragon_slaying_events.0100.desc.last_move_burn3
					}
				}
			}
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:shake_cave }
				desc = agot_dragon_slaying_events.0100.desc.last_move_sneak_attack
			}
			triggered_desc = { # Could only have been killed on a sneak attack
				trigger = { scope:dragon_current_move = flag:guard }
				desc = {
					triggered_desc = {
						trigger = { has_character_flag = sneak_attack }
						desc = agot_dragon_slaying_events.0100.desc.last_move_sneak_attack
					}
				}
			}
			triggered_desc = {
				trigger = { scope:dragon_current_move = flag:lunge }
				desc = agot_dragon_slaying_events.0100.desc.last_move_lunge
			}
			# From 0101
			triggered_desc = {
				trigger = {
					OR = {
						scope:human_current_move = flag:climb
						scope:human_current_move = flag:dive
						scope:human_current_move = flag:confront
					}
					scope:dragon_current_move = flag:bite
				}
				desc = agot_dragon_slaying_events.0102.desc.bite
			}
			triggered_desc = {
				trigger = {
					OR = {
						scope:human_current_move = flag:climb
						scope:human_current_move = flag:dive
						scope:human_current_move = flag:confront
					}
					scope:dragon_current_move = flag:tail
				}
				desc = agot_dragon_slaying_events.0102.desc.tail_swipe
			}
			# From 0102
			triggered_desc = {
				trigger = {
					scope:human_last_move ?= flag:climb
				}
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { scope:dragon_current_move = flag:tail }
							desc = agot_dragon_slaying_events.0111.desc.move_climb_tail
						}
						triggered_desc = {
							trigger = { scope:dragon_current_move = flag:shake }
							desc = agot_dragon_slaying_events.0111.desc.move_climb_shake
						}
						triggered_desc = {
							trigger = { scope:dragon_current_move = flag:fly }
							desc = agot_dragon_slaying_events.0111.desc.move_climb_fly
						}
					}
				}
			}
			triggered_desc = {
				trigger = {
					scope:human_last_move ?= flag:dive
				}
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { scope:dragon_current_move = flag:crush }
							desc = agot_dragon_slaying_events.0111.desc.move_dive_crush
						}
						triggered_desc = {
							trigger = { scope:dragon_current_move = flag:fly }
							desc = agot_dragon_slaying_events.0111.desc.move_dive_fly
						}
					}
				}
			}
		}
		first_valid = { # Player's Move
			triggered_desc = { # You tried running
				trigger = { scope:human_current_move ?= flag:run }
				desc = { # Did you die while running?
					first_valid = {
						triggered_desc = {
							trigger = { has_character_flag = ds_death }
							desc = {
								first_valid = {
									triggered_desc = {
										trigger = { has_character_flag = death_running_burn }
										desc = agot_dragon_slaying_events.0111.desc.death_running_burn
									}
									triggered_desc = {
										trigger = { has_character_flag = death_running_pursuit }
										desc = {
											desc = agot_dragon_slaying_events.0111.desc.death_running_pursuit
											random_valid = {
												desc = agot_dragon_slaying_events.0111.desc.death.rip1
												desc = agot_dragon_slaying_events.0111.desc.death.rip2
												desc = agot_dragon_slaying_events.0111.desc.death.rip3
											}
										}
									}
								}
							}
						}

						# Then you must have escaped, congrats!
						triggered_desc = {
							trigger = { NOT = { has_character_flag = ds_death } }
							desc = {
								first_valid = { # Can spice it up by looking at previous dragon's move and describing the how
									# triggered_desc = {
									# }
									# triggered_desc = {
									# }
									desc = agot_dragon_slaying_events.0111.desc.run_escape
								}
							}
						}
					}
				}
			}
			triggered_desc = { # You lost, but didn't die - dragon escaped?
				trigger = { has_character_flag = ds_loss }
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { scope:human_current_move = flag:climb_let_fly }
							desc = agot_dragon_slaying_events.0111.desc.climb_let_fly
						}
						triggered_desc = {
							trigger = { scope:human_current_move = flag:dive_let_fly }
							desc = agot_dragon_slaying_events.0111.desc.dive_let_fly
						}
					}
				}
			}
			# These other ones would result in deaths
			triggered_desc = {
				trigger = { scope:human_current_move ?= flag:approach }
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { has_character_flag = death_burn }
							desc = agot_dragon_slaying_events.0111.desc.death_burn_risky
						}
						triggered_desc = {
							trigger = { has_character_flag = death_lunge }
							desc = {
								desc = agot_dragon_slaying_events.0111.desc.death_lunge_risky
								random_valid = {
									desc = agot_dragon_slaying_events.0111.desc.death.rip1
									desc = agot_dragon_slaying_events.0111.desc.death.rip2
									desc = agot_dragon_slaying_events.0111.desc.death.rip3
								}
							}
						}
						triggered_desc = {
							trigger = { has_character_flag = death_rock }
							desc = agot_dragon_slaying_events.0111.desc.death_rock_risky
						}
						triggered_desc = {
							trigger = { has_character_flag = death_shake_wound }
							desc = agot_dragon_slaying_events.0111.desc.death_shake_wound_risky
						}
						triggered_desc = {
							trigger = { has_character_flag = death_sneak_attack }
							desc = {
								desc = agot_dragon_slaying_events.0111.desc.death_sneak_attack
								random_valid = {
									desc = agot_dragon_slaying_events.0111.desc.death.rip1
									desc = agot_dragon_slaying_events.0111.desc.death.rip2
									desc = agot_dragon_slaying_events.0111.desc.death.rip3
								}
							}
						}
					}
				}
			}
			triggered_desc = {
				trigger = { scope:human_current_move ?= flag:cautious_approach }
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { has_character_flag = death_burn }
							desc = agot_dragon_slaying_events.0111.desc.death_burn_cautious
						}
						triggered_desc = {
							trigger = { has_character_flag = death_lunge }
							desc = {
								desc = agot_dragon_slaying_events.0111.desc.death_lunge_cautious
								random_valid = {
									desc = agot_dragon_slaying_events.0111.desc.death.rip1
									desc = agot_dragon_slaying_events.0111.desc.death.rip2
									desc = agot_dragon_slaying_events.0111.desc.death.rip3
								}
							}
						}
						triggered_desc = {
							trigger = { has_character_flag = death_rock }
							desc = {
								desc = agot_dragon_slaying_events.0111.desc.death_rock_cautious
								random_valid = {
									desc = agot_dragon_slaying_events.0111.desc.death.rip1
									desc = agot_dragon_slaying_events.0111.desc.death.rip2
									desc = agot_dragon_slaying_events.0111.desc.death.rip3
								}
							}
						}
						triggered_desc = {
							trigger = { has_character_flag = death_shake_wound }
							desc = {
								desc = agot_dragon_slaying_events.0111.desc.death_shake_wound_cautious
								random_valid = {
									desc = agot_dragon_slaying_events.0111.desc.death.rip1
									desc = agot_dragon_slaying_events.0111.desc.death.rip2
									desc = agot_dragon_slaying_events.0111.desc.death.rip3
								}
							}
						}
					}
				}
			}
			triggered_desc = {
				trigger = { scope:human_current_move ?= flag:climb }
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { has_character_flag = death_bite }
							desc = agot_dragon_slaying_events.0111.desc.death_bite_climb
						}
						triggered_desc = {
							trigger = { has_character_flag = death_tail }
							desc = agot_dragon_slaying_events.0111.desc.death_tail_climb
						}
					}
				}
			}
			triggered_desc = {
				trigger = { scope:human_current_move ?= flag:dive }
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { has_character_flag = death_bite }
							desc = {
								desc = agot_dragon_slaying_events.0111.desc.death_bite_dive
								random_valid = {
									desc = agot_dragon_slaying_events.0111.desc.death.rip1
									desc = agot_dragon_slaying_events.0111.desc.death.rip2
									desc = agot_dragon_slaying_events.0111.desc.death.rip3
								}
							}
						}
						triggered_desc = {
							trigger = { has_character_flag = death_tail }
							desc = agot_dragon_slaying_events.0111.desc.death_tail_dive
						}
					}
				}
			}
			triggered_desc = {
				trigger = {
					scope:human_current_move ?= flag:confront
				}
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { has_character_flag = death_bite }
							desc = agot_dragon_slaying_events.0111.desc.confront_bite
						}
						triggered_desc = {
							trigger = { has_character_flag = death_tail }
							desc = agot_dragon_slaying_events.0111.desc.confront_tail
						}
					}
				}
			}
			triggered_desc = { # Bundle responses for dragon's move - crush
				trigger = { scope:dragon_current_move ?= flag:crush }
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { scope:human_current_move ?= flag:crushcrushcrush }
							desc = agot_dragon_slaying_events.0111.desc.death_crushcrushcrush
						}
						triggered_desc = {
							trigger = { scope:human_current_move ?= flag:crush_move }
							desc = agot_dragon_slaying_events.0111.desc.death_crush_move
						}
					}
				}
			}
			triggered_desc = { # Bundle responses for dragon's move - tail
				trigger = { scope:dragon_current_move ?= flag:tail }
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { scope:human_current_move ?= flag:climb_head }
							desc = agot_dragon_slaying_events.0111.desc.death_tail_climb_head
						}
						triggered_desc = {
							trigger = { scope:human_current_move ?= flag:climb_roll }
							desc = {
								desc = agot_dragon_slaying_events.0111.desc.death_tail_climb_roll
								random_valid = {
									desc = agot_dragon_slaying_events.0111.desc.death.rip1
									desc = agot_dragon_slaying_events.0111.desc.death.rip2
									desc = agot_dragon_slaying_events.0111.desc.death.rip3
								}
							}
						}
					}
				}
			}
			triggered_desc = { # Bundle responses for dragon's move - shake
				trigger = { scope:dragon_current_move ?= flag:shake }
				desc = {
					first_valid = {
						triggered_desc = {
							trigger = { scope:human_current_move ?= flag:shake_climb }
							desc = agot_dragon_slaying_events.0111.desc.death_shake_climb
						}
						triggered_desc = {
							trigger = { scope:human_current_move ?= flag:shake_roll }
							desc = agot_dragon_slaying_events.0111.desc.death_shake_roll
						}
					}
					random_valid = {
						desc = agot_dragon_slaying_events.0111.desc.death.rip1
						desc = agot_dragon_slaying_events.0111.desc.death.rip2
						desc = agot_dragon_slaying_events.0111.desc.death.rip3
					}
				}
			}
			triggered_desc = { # Bundle responses for dragon's move - fly
				trigger = { scope:dragon_current_move ?= flag:fly }
				desc = {
					first_valid = {
						triggered_desc = { # Tried to hold on to the dragon until it landed, to kill it
							trigger = { scope:human_current_move ?= flag:fly_hold_on }
							desc = agot_dragon_slaying_events.0111.desc.death_fly_hold
						}
						triggered_desc = { # Tried to stop dragon from escaping from below
							trigger = { scope:human_current_move ?= flag:stop_fly }
							desc = agot_dragon_slaying_events.0111.desc.death_stop_fly
						}
					}
				}
			}
		}
		triggered_desc = { # Describe Your Wounds
			trigger = { NOT = { has_character_flag = ds_death } }
			desc = {
				first_valid = {
					triggered_desc = {
						trigger = {
							has_trait = wounded_1
							has_character_flag = ds_wounded
						}
						desc = agot_dragon_slaying_events.0111.desc.loss_wounded_one
					}
					triggered_desc = {
						trigger = {
							has_trait = wounded_2
							has_character_flag = ds_wounded
						}
						desc = agot_dragon_slaying_events.0111.desc.loss_wounded_two
					}
					triggered_desc = {
						trigger = {
							has_trait = wounded_3
							has_character_flag = ds_wounded
						}
						desc = agot_dragon_slaying_events.0111.desc.loss_wounded_three
					}
					triggered_desc = {
						trigger = {
							has_trait_xp = { trait = burned value < 50 }
							has_character_flag = ds_burned
						}
						desc = agot_dragon_slaying_events.0111.desc.loss_minor_burns
					}
					triggered_desc = {
						trigger = {
							has_trait_xp = { trait = burned value > 50 }
							has_character_flag = ds_burned
						}
						desc = agot_dragon_slaying_events.0111.desc.loss_major_burns
					}
					desc = agot_dragon_slaying_events.0111.desc.loss_unscathed
				}
			}
		}
		triggered_desc = { # Failed to Get Vengeance
			trigger = {
				exists = scope:vengeance_candidate
			}
			desc = agot_dragon_slaying_events.0111.desc_vengeance
		}
	}

	theme = dragon

	# Background Logic
	override_background = {
		trigger = { scope:locale = flag:cave_exterior }
		reference = ep2_hunt_forest_cave
	}
	override_background = {
		trigger = { scope:locale = flag:cave_interior }
		reference = fp3_cave
	}
	override_background = {
		trigger = { scope:locale = flag:wilderness_scope }
		reference = wilderness_scope
	}
	override_background = {
		trigger = { scope:locale = flag:terrain_scope }
		reference = terrain_scope
	}
	override_background = {
		trigger = { scope:locale = flag:battlefield }
		reference = battlefield
	}
	override_background = {
		trigger = { scope:locale = flag:throne_room }
		reference = throne_room
	}
	override_background = {
		trigger = { scope:locale = flag:army_camp }
		reference = army_camp
	}
	#Special
	override_background = {
		trigger = { scope:locale = flag:agot_icecave }
		reference = agot_icecave
	}

	widgets = {
		widget = {
			is_shown = {
				scope:dragon_current_move ?= flag:burn
			}
			gui = "agot_shader_event_sparks"
			container = "agot_shader_event_foreground"
		}
		widget = {
			is_shown = {
				scope:dragon_current_move ?= flag:burn
			}
			gui = "agot_shader_event_fire"
			container = "agot_shader_event_background"
		}
	}

	left_portrait = {
		character = root
		scripted_animation = {
			triggered_animation = {
				trigger = { has_character_flag = ds_death }
				animation = fear
			}
			animation = disbelief
		}
		camera = camera_human_back_to_camera
	}

	right_portrait = {
		character = scope:dragon
		animation = dragon_main
		camera = camera_dragon_facing_human

		triggered_outfit = {
			trigger = {
				scope:dragon = { level_ten_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_nine_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_eight_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5  }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_seven_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5 }
		}
		triggered_outfit = { # VHAGAR
			trigger = {
				scope:dragon = { level_six_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.5 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_five_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_1.0 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_four_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.9 }
		}
		triggered_outfit = { # MELEYS
			trigger = {
				scope:dragon = { level_three_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.8 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_two_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.5 }
		}
		triggered_outfit = { # SYRAX
			trigger = {
				scope:dragon = { level_one_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.4 }
		}
		triggered_outfit = {
			trigger = {
				scope:dragon = { level_zero_dragon_size_trigger = yes }
			}
			outfit_tags = { dynamic_camera_zoom_0.7 }
		}
		#End Dynamic Camera Zoom
	}

	immediate = {
		if = {
			limit = {
				has_character_flag = death_burn
			}

			play_music_cue = CK3AGOT_dragon_execution_fire
		}
		else_if = {
			limit = {
				OR = {
					has_character_flag = death_tail
					scope:dragon_current_move ?= flag:crush
					scope:dragon_current_move ?= flag:shake
				}
			}

			play_music_cue = CK3AGOT_dragon_execution_tail
		}
		else_if = {
			limit = {
				OR = {
					has_character_flag = death_lunge
					has_character_flag = death_sneak_attack
					has_character_flag = death_bite
				}
			}

			play_music_cue = CK3AGOT_dragon_execution_fed
		}
	}

	option = {
		trigger = {
			scope:human_current_move = flag:run
			NOT = { has_character_flag = ds_death }
		}
		name = agot_dragon_slaying_events.0111.escaped
	}

	option = { #  l	ll ll L
		trigger = {
			has_character_flag = ds_loss
			NOT = { has_character_flag = ds_death }
		}
		name = agot_dragon_slaying_events.0111.loss
	}

	option = {
		trigger = {
			has_character_flag = ds_death
		}
		name = agot_dragon_slaying_events.0111.death

		switch = {
			trigger = scope:dragon_current_move
			flag:burn = {
				death = {
					death_reason = death_dragon_fire
					killer = scope:dragon
				}
			}
			flag:bite = {
				death = {
					death_reason = death_dragon_ate
					killer = scope:dragon
				}
			}
			flag:tail = {
				death = {
					death_reason = death_dragon_crushed_by_tail
					killer = scope:dragon
				}
			}
			flag:lunge = {
				death = {
					death_reason = death_dragon_ate
					killer = scope:dragon
				}
			}
			flag:crush = {
				death = {
					death_reason = death_dragon_stomped
					killer = scope:dragon
				}
			}
			flag:fly = {
				if = {
					limit = {
						scope:human_current_move = flag:fly_hold_on
					}

					death = {
						death_reason = death_fell_from_dragon
						killer = scope:dragon
					}
				}
				else = {
					death = {
						death_reason = death_dragon
						killer = scope:dragon
					}
				}
			}
			flag:shake_cave = {
				if = {
					limit = {
						has_character_flag = death_rock
					}

					death = {
						death_reason = death_crushed_by_boulder
					}
				}
				else = {
					death = {
						death_reason = death_dragon
						killer = scope:dragon
					}
				}
			}
			fallback = {
				death = {
					death_reason = death_dragon
					killer = scope:dragon
				}
			}
		}
	}

	after = {
		if = {
			limit = {
				NOT = { has_character_flag = ds_death }
				has_character_flag = ds_wounded
			}
			agot_resolve_wounds_events_effect = { REASON = duel }
		}
		agot_ds_clean_up_effect = yes

		# If someone was sent to do the deed, inform the sender
		scope:ds_court_owner ?= {
			if = {
				limit = {
					is_alive = yes
				}

				trigger_event = {
					id = agot_dragon.0203
					days = 1
				}
			}
		}
	}
}

# Notifier that someone has slain a dragon
agot_dragon_slaying_events.0112 = {
	type = character_event
	title = agot_dragon_slaying_events.0112.t
	theme = dragon
	override_background = {
		reference = agot_open_sky
	}
	desc = agot_dragon_slaying_events.0112.desc

	right_portrait = {
		character = scope:dragon
		animation = dragon_main
		camera = camera_dragon_event_standing

		#Add this so dragon fits within event window
		outfit_tags = { linear_camera_zoom }
	}

	left_portrait = {
		character = scope:human
	}

	option = {
		name = agot_dragon_slaying_events.0112.a
	}
}