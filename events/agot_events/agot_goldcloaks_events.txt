namespace = agot_goldcloaks

agot_goldcloaks.0001 = { # title managament

	hidden = yes

	immediate = {
		title:b_goldguard_heights.holder = {
			save_scope_as = goldcloaks
		}
		create_title_and_vassal_change = {
			type = revoked
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		title:b_goldguard_heights = {
			change_title_holder_include_vassals = {
				holder = title:c_kings_landing.holder
				change = scope:title_change
			}
			random_in_de_jure_hierarchy = {
				limit = {
					tier = tier_county
					holder.highest_held_title_tier >= tier_duchy
					OR = {
						holder = {
							has_title = title:c_kings_landing
						}
						holder = {
							highest_held_title_tier >= tier_kingdom
						}
					}
				}
				change_title_holder_include_vassals = {
					holder = title:c_kings_landing.holder
					change = scope:title_change
				}
			}
		}
		resolve_title_and_vassal_change = scope:title_change
	}
	option = {
		title:c_kings_landing.holder = {
			add_courtier = scope:goldcloaks
		}
	}
}


agot_goldcloaks.0002 = { # KL Effect

	hidden = yes
	orphan = yes

	immediate = {
		title:b_goldguard_heights.holder = {
			save_scope_as = goldcloaks
		}
		create_title_and_vassal_change = {
			type = revoked
			save_scope_as = title_change
			add_claim_on_loss = no
		}
	}
	option = {
	}
}
