namespace = agot_filler_kingslanding
# Filler events for inbreds, whores and cutthroats Welcome to Kingslanding!

####################################
#   		Pickpocket			   #
#        ZombieSchrodCat		   #
#            0001-0002             #
####################################

agot_filler_kingslanding.0001 = { #start
	type = character_event
	title = agot_filler_kingslanding.0001.t
	desc = agot_filler_kingslanding.0001.desc

	theme = intrigue
	override_background = {
		reference = market
	}
	right_portrait = {
		character = root
		animation = shock
	}

	trigger = {
		is_landed = yes
		is_available_adult = yes
		has_title = title:c_kings_landing
		NOT = {
			has_character_flag = agot_filler_kingslanding_pickpocket
		}
	}

	immediate = {
		add_character_flag = {
			flag = agot_filler_kingslanding_pickpocket
			years = 5
		}
	}

	 option = {
		name = agot_filler_kingslanding.0001.a
		trigger = { intrigue <= 7 }
		hidden_effect = {
			random_list = {
				50 = {
					remove_short_term_gold = 10
				}
				25 = {
					remove_short_term_gold = 5
				}
				15 = {
					remove_short_term_gold = 20
				}
				15 = {
					trigger_event = agot_filler_kingslanding.0002
				}
			}
		}
	}

	option = {
		name = agot_filler_kingslanding.0001.b
		trigger = { intrigue >= 8 }
		hidden_effect = {
			random_list = {
				15 = {
					remove_short_term_gold = 10
				}
				25 = {
					remove_short_term_gold = 5
				}
				10 = {
					remove_short_term_gold = 20
				}
				50 = {
					trigger_event = agot_filler_kingslanding.0002
				}
			}
		}
	}
}

agot_filler_kingslanding.0002 = { #end
	type = character_event
	title = agot_filler_kingslanding.0002.t
	desc = agot_filler_kingslanding.0002.desc

	theme = intrigue
	override_background = {
		reference = market
	}
	right_portrait = {
		character = root
		animation = anger
	}

	left_portrait = {
		character = scope:agot_filler_streetkid
		animation = fear
	}

	immediate = {
		hidden_effect = {
			create_character = {
				location = root.capital_province
				age = { 10 15 }
				gender = male
				faith = this.faith
				culture = culture:crownlander #fleabottom
				intrigue = { 10 15 }
				save_scope_as = agot_filler_streetkid
			}
		}
	}

	option = {
		trigger = {
			is_landed = yes
		}

		name = agot_filler_kingslanding.0002.a

		imprison = {
			target = scope:agot_filler_streetkid
			type = dungeon
		}
	}

	option = {
		name = agot_filler_kingslanding.0002.b
		trigger = {
			has_trait = arbitrary
		}
		add_gold = 50
		add_dread = minor_dread_gain
	}

	option = {
		name = agot_filler_kingslanding.0002.c
		trigger = {
			has_trait = compassionate
		}
		scope:agot_filler_streetkid = {
			add_courtier = scope:agot_filler_streetkid
		}
		reverse_add_opinion = {
			modifier = grateful_opinion
			target = scope:agot_filler_streetkid
			opinion = 50
		}
	}
}

####################################
#   	The Fishmongers Wife	   #
#        ZombieSchrodCat		   #
#            0003-0004             #
####################################

agot_filler_kingslanding.0003 = { #start
	type = character_event
	title = agot_filler_kingslanding.0003.t
	desc = agot_filler_kingslanding.0003.desc

	theme = crown
	override_background = {
		reference = docks
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}

	right_portrait = {
		character = scope:agot_filler_fishmonger_wife
		animation = personality_greedy
	}

	trigger = {
		is_landed = yes
		is_available_adult = yes
		has_title = title:c_kings_landing
		NOT = {
			has_character_flag = agot_filler_kingslanding_fishmonger
		}
	}

	immediate = {
		hidden_effect = {
			random_dummy_gender_mystic_effect = yes

			create_character = {
				location = root.capital_province
				age = { 40 60 }
				gender = scope:dummy_mystic_gender
				faith = this.faith
				culture = culture:crownlander
				stewardship = { 5 10 }
				save_scope_as = agot_filler_fishmonger_wife
			}
		}
		add_character_flag = {
			flag = agot_filler_kingslanding_fishmonger
			years = 5
		}
	}

	option = {
		name = agot_filler_kingslanding.0003.a
		trigger_event = agot_filler_kingslanding.0004
	}

	option = {
		name = agot_filler_kingslanding.0003.b
		trigger = {
			has_trait = greedy
		}
		hidden_effect = {
			scope:agot_filler_fishmonger_wife = {
				death = { death_reason = death_vanished }
			}
		}
	}

	option = {
		name = agot_filler_kingslanding.0003.c
		trigger = {
			OR = {
			has_trait = temperate
			has_trait = content
			}
		}
		remove_short_term_gold = 1
		hidden_effect = {
			scope:agot_filler_fishmonger_wife = {
				death = { death_reason = death_vanished }
			}
		}
	}

	option = {
		name = agot_filler_kingslanding.0003.d
		trigger = {
			has_trait = zealous
		}
		hidden_effect = {
			random_list = {
				90 = {
					add_piety = minor_piety_gain
					scope:agot_filler_fishmonger_wife = {
						death = { death_reason = death_vanished }
					}
					}
				10 = {
					add_trait = inappetetic
					add_piety = minor_piety_gain
					scope:agot_filler_fishmonger_wife = {
						death = { death_reason = death_vanished }
					}
				}
			}
		}
	}

}

agot_filler_kingslanding.0004 = { #end
	type = character_event
	title = agot_filler_kingslanding.0004.t
	desc = agot_filler_kingslanding.0004.desc

	theme = crown
	override_background = {
		reference = docks
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}

	right_portrait = {
		character = scope:agot_filler_fishmonger_wife
		animation = personality_greedy
	}

	option = {
		name = agot_filler_kingslanding.0004.a
		duel = {
			skill = stewardship
			target = scope:agot_filler_fishmonger_wife

			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}

				send_interface_toast = {
				title = agot_filler_kingslanding.0004.success_title
					remove_short_term_gold = 5
					ROOT = {
						add_character_modifier = {
							modifier = agot_filler_kingslanding_haggler
							years = 5
						}
					}
				}
			}
			50 = { #failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
				title = agot_filler_kingslanding.0004.failure_title
					remove_short_term_gold = 10
				}
			}
		}
	}
	after = {
		hidden_effect = {
			scope:agot_filler_fishmonger_wife = {
				death = { death_reason = death_vanished }
			}
		}
	}
}

####################################
#    Steelstreet:The Knight	       #
#        ZombieSchrodCat		   #
#            0005-0008             #
####################################

agot_filler_kingslanding.0005 = { #start
	type = character_event
	title = agot_filler_kingslanding.0005.t
	desc = agot_filler_kingslanding.0005.desc

	theme = crown
	override_background = {
		reference = market
	}

	right_portrait = {
		character = scope:agot_filler_steelstreet_knight
		animation = beg
	}

	trigger = {
		is_landed = yes
		is_available_adult = yes
		has_title = title:c_kings_landing
		NOT = {
			has_character_flag = agot_filler_kingslanding_steelstreet_knight
		}
	}

	immediate = {
		hidden_effect = {
			create_character = {
				location = root.capital_province
				age = { 18 25 }
				gender = male
				faith = this.faith
				culture = culture:crownlander
				trait = honest
				trait = trusting
				trait = knight
				save_scope_as = agot_filler_steelstreet_knight
			}
		}
		add_character_flag = {
			flag = agot_filler_kingslanding_steelstreet_knight
			years = 20
		}
	}

	option = { #ignore
		name = agot_filler_kingslanding.0005.a
	}

	option = { #buy armor
		name = agot_filler_kingslanding.0005.b
		trigger_event = agot_filler_kingslanding.0006
		remove_short_term_gold = 50
	}

	option = { #take to top of steel street
		name = agot_filler_kingslanding.0005.c
		trigger = {
			has_trait = generous
		}
		remove_short_term_gold = 150
		trigger_event = agot_filler_kingslanding.0006
		hidden_effect = {
			scope:agot_filler_steelstreet_knight = {
				add_trait = strong
			}
		}
	}
}

agot_filler_kingslanding.0006 = { #training
	type = character_event
	title = agot_filler_kingslanding.0006.t
	desc = agot_filler_kingslanding.0006.desc

	theme = crown
	override_background = {
		reference = market
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}

	right_portrait = {
		character = scope:agot_filler_steelstreet_knight
		animation = personality_honorable
	}

	option = { #good luck
		name = agot_filler_kingslanding.0006.a
		trigger_event = agot_filler_kingslanding.0007
	}

	option = { #train him
		name = agot_filler_kingslanding.0006.b
		trigger = {
				has_trait = education_martial_prowess_1
			}
		scope:agot_filler_steelstreet_knight = {
			add_trait = education_martial_prowess_1
		}
		trigger_event = agot_filler_kingslanding.0007
	}

	option = { #train him
		name = agot_filler_kingslanding.0006.b
		trigger = {
				has_trait = education_martial_prowess_2
			}
		hidden_effect = {
			random_list = {
				50 = {
					scope:agot_filler_steelstreet_knight = {
						add_trait = education_martial_prowess_1
					}
				}
				50 = {
					scope:agot_filler_steelstreet_knight = {
						add_trait = education_martial_prowess_2
					}
				}
			}
		}
		trigger_event = agot_filler_kingslanding.0007
	}

	option = { #train him
		name = agot_filler_kingslanding.0006.b
		trigger = {
				has_trait = education_martial_prowess_3
		}
		hidden_effect = {
			random_list = {
				50 = {
					scope:agot_filler_steelstreet_knight = {
						add_trait = education_martial_prowess_1
					}
				}
				25 = {
					scope:agot_filler_steelstreet_knight = {
						add_trait = education_martial_prowess_2
					}
				}
				25 = {
					scope:agot_filler_steelstreet_knight = {
						add_trait = education_martial_prowess_3
					}
				}
			}
		}
		trigger_event = agot_filler_kingslanding.0007
	}

	option = { #train him
		name = agot_filler_kingslanding.0006.b
		trigger = {
			has_trait = education_martial_prowess_4
		}
		hidden_effect = {
			random_list = {
				25 = {
					scope:agot_filler_steelstreet_knight = {
						add_trait = education_martial_prowess_1
					}
				}
				25 = {
					scope:agot_filler_steelstreet_knight = {
						add_trait = education_martial_prowess_2
					}
				}
				25 = {
					scope:agot_filler_steelstreet_knight = {
						add_trait = education_martial_prowess_3
					}
				}
				25 = {
					scope:agot_filler_steelstreet_knight = {
						add_trait = education_martial_prowess_4
					}
				}
			}
		}
		trigger_event = agot_filler_kingslanding.0007
	}

		option = { #train him
		name = agot_filler_kingslanding.0006.b
		trigger = {
				has_trait = education_martial_prowess_5
		}
		hidden_effect = {
			random_list = {
				25 = {
					scope:agot_filler_steelstreet_knight = {
						add_trait = education_martial_prowess_2
					}
				}
				25 = {
					scope:agot_filler_steelstreet_knight = {
						add_trait = education_martial_prowess_3
					}
				}
				25 = {
					scope:agot_filler_steelstreet_knight = {
						add_trait = education_martial_prowess_4
					}
				}
			}
		}
		trigger_event = agot_filler_kingslanding.0007
	}
}

agot_filler_kingslanding.0007 = { #advice
	type = character_event
	title = agot_filler_kingslanding.0007.t
	desc = agot_filler_kingslanding.0007.desc

	theme = crown
	override_background = {
		reference = market
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}

	right_portrait = {
		character = scope:agot_filler_steelstreet_knight
		animation = personality_honorable
	}

	option = { #good luck
		name = agot_filler_kingslanding.0007.a
	}

	option = { #be brave
		name = agot_filler_kingslanding.0007.b
		trigger = {
				has_trait = brave
			}
		scope:agot_filler_steelstreet_knight = {
			if = {
				limit = {
					number_of_personality_traits < personality_trait_limit
				}
				add_trait = brave
			}
		}
		trigger_event = agot_filler_kingslanding.0008
	}

	option = { #be deceitful
		name = agot_filler_kingslanding.0007.c
		trigger = {
				has_trait = deceitful
		}
		scope:agot_filler_steelstreet_knight = {
			if = {
				limit = {
					number_of_personality_traits < personality_trait_limit
				}
				add_trait = deceitful
			}
		}
		trigger_event = agot_filler_kingslanding.0008
	}

	option = { #be stuborn
		name = agot_filler_kingslanding.0007.d
		trigger = {
				has_trait = stubborn
		}
		scope:agot_filler_steelstreet_knight = {
			if = {
				limit = {
					number_of_personality_traits < personality_trait_limit
				}
				add_trait = stubborn
			}
		}
		trigger_event = agot_filler_kingslanding.0008
	}

	option = { #be warthful
		name = agot_filler_kingslanding.0007.e
		trigger = {
				has_trait = wrathful
		}
		scope:agot_filler_steelstreet_knight = {
			if = {
				limit = {
					number_of_personality_traits < personality_trait_limit
				}
				add_trait = wrathful
			}
		}
		trigger_event = agot_filler_kingslanding.0008
	}
}

agot_filler_kingslanding.0008 = { #end of tourney - end
	type = character_event
	title = agot_filler_kingslanding.0008.t
	desc = agot_filler_kingslanding.0008.desc

	theme = crown
	override_background = {
		reference = throne_room
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}

	right_portrait = {
		character = scope:agot_filler_steelstreet_knight
		animation = war_over_win
	}

	option = { #Knight Joins
		name = agot_filler_kingslanding.0008.a
		hidden_effect = {
			random_list = {
				25 = {
					add_gold = 200
				}
				25 = {
					add_gold = 100
				}
				25 = {
					add_gold = 50
				}
				25 = {
					add_gold = 25
				}
			}
		}

		root = {
			add_courtier = scope:agot_filler_steelstreet_knight
			reverse_add_opinion = {
				modifier = grateful_opinion
				target = scope:agot_filler_steelstreet_knight
				opinion = 100
			}
		}
	}

	option = { #take just gold
		name = agot_filler_kingslanding.0008.b
		random_list = {
			25 = {
				add_gold = 200
			}
			25 = {
				add_gold = 100
			}
			25 = {
				add_gold = 50
			}
			25 = {
				add_gold = 25
			}
		}
		hidden_effect = {
			scope:agot_filler_steelstreet_knight = {
				death = { death_reason = death_vanished }
			}
		}
	}
}

####################################
# 		  The Ratpit:Brawlers      #
#          ZombieSchrodCat		   #
#            0009-0012             #
####################################

agot_filler_kingslanding.0009 = { #start
	type = character_event
	title = agot_filler_kingslanding.0009.t
	desc = agot_filler_kingslanding.0009.desc

	theme = corruption
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = scope:agot_filler_ratpit_fighter_1
		animation = rage
	}

	right_portrait = {
		character = scope:agot_filler_ratpit_fighter_2
		animation = personality_bold
	}

	trigger = {
		is_landed = yes
		is_available_adult = yes
		has_title = title:c_kings_landing
		NOR = {
			has_character_flag = agot_filler_kingslanding_ratpit
			has_character_flag = agot_closed_pits
		}
	}

	immediate = {
		hidden_effect = {
			create_character = {
				location = root.capital_province
				age = { 20 40 }
				gender = male
				faith = this.faith
				trait = strong
				culture = culture:crownlander
				save_scope_as = agot_filler_ratpit_fighter_1
			}
			create_character = {
				location = root.capital_province
				age = { 20 40 }
				gender = male
				faith = this.faith
				trait = strong
				culture = culture:crownlander
				save_scope_as = agot_filler_ratpit_fighter_2
			}
		}
		add_character_flag = {
			flag = agot_filler_kingslanding_ratpit
			years = 5
		}
	}

	option = {
		name = agot_filler_kingslanding.0009.a
		add_character_flag = {
			flag = agot_filler_ratpit_1
			years = 1
		}
		trigger_event = agot_filler_kingslanding.0010
		remove_short_term_gold = 10
	}

	option = {
		name = agot_filler_kingslanding.0009.b
		add_character_flag = {
			flag = agot_filler_ratpit_2
			years = 1
		}
		trigger_event = agot_filler_kingslanding.0010
		remove_short_term_gold = 10
	}

	option = {
		name = agot_filler_kingslanding.0009.c
		trigger = {
			has_trait = drunkard
		}
		trigger_event = agot_filler_kingslanding.0013
	}

	option = {#shut it down!
		name = agot_filler_kingslanding.0009.d
		add_character_modifier = {
			modifier = agot_filler_closed_pits
			years = 10
		}
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
			}
			random = {
				chance = 10
				add_trait = paranoid
			}
		}
		add_character_flag = {
			flag = agot_closed_pits
			years = 100
		}
	}
}

agot_filler_kingslanding.0010 = {
	type = character_event
	title = agot_filler_kingslanding.0010.t
	desc = agot_filler_kingslanding.0010.desc

	theme = corruption
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = scope:agot_filler_ratpit_fighter_1
		animation = rage
	}

	right_portrait = {
		character = scope:agot_filler_ratpit_fighter_2
		animation = rage
	}

	option = {
		name = agot_filler_kingslanding.0010.a
		hidden_effect = {
		scope:agot_filler_ratpit_fighter_1 = {
			duel = {
				skill = prowess
				target = scope:agot_filler_ratpit_fighter_2

				50 = {#fighter 1 wins
					compare_modifier = {
						value = scope:duel_value
						multiplier = 3.5
						min = -49
					}

					send_interface_toast = {
						root = {
							trigger_event = agot_filler_kingslanding.0011
						}
					}
				}
				50 = { #fighter 2 wins
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
						min = -49
					}
					send_interface_toast = {
						root = {
							trigger_event = agot_filler_kingslanding.0012
						}
					}
				}
			}
		}
		}
	}
}

agot_filler_kingslanding.0011 = { #fighter 1 wins
	type = character_event
	title = agot_filler_kingslanding.0011.t
	desc = agot_filler_kingslanding.0011.desc

	theme = corruption
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = scope:agot_filler_ratpit_fighter_1
		animation = war_over_win
	}

	right_portrait = {
		character = scope:agot_filler_ratpit_fighter_2
		animation = severelywounded
	}

	option = {
		name = agot_filler_kingslanding.0011.a
		trigger = {
			root = {
				has_character_flag = agot_filler_ratpit_1
			}
		}
		add_gold = 50
	}

	option = {
		name = agot_filler_kingslanding.0011.b
		trigger = {
			root = {
				has_character_flag = agot_filler_ratpit_2
			}
		}
		add_prestige = minor_prestige_loss
	}

	after = {
		hidden_effect = {
			scope:agot_filler_ratpit_fighter_1 = {
				death = { death_reason = death_vanished }
			}
			scope:agot_filler_ratpit_fighter_2 = {
				death = { death_reason = death_vanished }
			}
		}
	}
}

agot_filler_kingslanding.0012 = { #fighter 2 wins
	type = character_event
	title = agot_filler_kingslanding.0012.t
	desc = agot_filler_kingslanding.0012.desc

	theme = corruption
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = scope:agot_filler_ratpit_fighter_1
		animation = severelywounded
	}

	right_portrait = {
		character = scope:agot_filler_ratpit_fighter_2
		animation = war_over_win
	}

	option = {
		name = agot_filler_kingslanding.0012.a
		trigger = {
			root = {
				has_character_flag = agot_filler_ratpit_2
			}
		}
		add_gold = 50
	}

	option = {
		name = agot_filler_kingslanding.0012.b
		trigger = {
			root = {
				has_character_flag = agot_filler_ratpit_1
			}
		}
		add_prestige = minor_prestige_loss
	}

	after = {
		hidden_effect = {
			scope:agot_filler_ratpit_fighter_1 = {
				death = { death_reason = death_vanished }
			}
			scope:agot_filler_ratpit_fighter_2 = {
				death = { death_reason = death_vanished }
			}
		}
	}
}

agot_filler_kingslanding.0013 = {
	type = character_event
	title = agot_filler_kingslanding.0013.t
	desc = agot_filler_kingslanding.0013.desc

	theme = corruption
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = root
		animation = rage
	}

	right_portrait = {
		character = scope:agot_filler_ratpit_fighter_1
		animation = rage
	}

	option = {
		name = agot_filler_kingslanding.0013.a
			duel = {
				skill = prowess
				target = scope:agot_filler_ratpit_fighter_1

			50 = {#fighter 1 wins
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}

				send_interface_toast = {
				title = agot_filler_kingslanding.0013.success_title
					trigger_event = agot_filler_kingslanding.0014
				}
			}
			50 = { #
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
				title = agot_filler_kingslanding.0013.failure_title
					add_prestige = minor_prestige_loss
					trigger_event = agot_filler_kingslanding.0017
				}
			}
		}
	}
}

agot_filler_kingslanding.0014 = { #drunk win round 1
	type = character_event
	title = agot_filler_kingslanding.0014.t
	desc = agot_filler_kingslanding.0014.desc

	theme = corruption
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = root
		animation = war_over_win
	}

	right_portrait = {
		character = scope:agot_filler_ratpit_fighter_1
		animation = severelywounded
	}

	option = {
		name = agot_filler_kingslanding.0014.a
		trigger_event = agot_filler_kingslanding.0015
	}
}

agot_filler_kingslanding.0015 = {
	type = character_event
	title = agot_filler_kingslanding.0015.t
	desc = agot_filler_kingslanding.0015.desc

	theme = corruption
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = root
		animation = rage
	}

	right_portrait = {
		character = scope:agot_filler_ratpit_fighter_2
		animation = rage
	}

	option = {
		name = agot_filler_kingslanding.0015.a
			duel = {
				skill = prowess
				target = scope:agot_filler_ratpit_fighter_2

			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}

				send_interface_toast = {
				title = agot_filler_kingslanding.0015.success_title
					root = {
						trigger_event = agot_filler_kingslanding.0016
					}
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
				title = agot_filler_kingslanding.0015.failure_title
					add_prestige = minor_prestige_loss
					trigger_event = agot_filler_kingslanding.0017
				}
			}
		}
	}
}

agot_filler_kingslanding.0016 = { #drunk win round 2
	type = character_event
	title = agot_filler_kingslanding.0016.t
	desc = agot_filler_kingslanding.0016.desc

	theme = corruption
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = root
		animation = war_over_win
	}

	right_portrait = {
		character = scope:agot_filler_ratpit_fighter_2
		animation = severelywounded
	}

	option = {
		name = agot_filler_kingslanding.0016.a
		add_prestige = medium_prestige_gain
		set_nickname_effect = { NICKNAME = nick_the_brawler }
	}

	after = {
		hidden_effect = {
			scope:agot_filler_ratpit_fighter_1 = {
				death = { death_reason = death_vanished }
			}
			scope:agot_filler_ratpit_fighter_2 = {
				death = { death_reason = death_vanished }
			}
		}
	}
}

agot_filler_kingslanding.0017 = { #lose bad night - end
	type = character_event
	title = agot_filler_kingslanding.0017.t
	desc = agot_filler_kingslanding.0017.desc

	theme = corruption
	override_background = {
		reference = alley_night
	}
	left_portrait = {
		character = root
		animation = severelywounded
	}

	option = {
		name = agot_filler_kingslanding.0017.a
		remove_short_term_gold = 50
		add_prestige = medium_prestige_loss
	}

	after = {
		hidden_effect = {
			scope:agot_filler_ratpit_fighter_1 = {
				death = { death_reason = death_vanished }
			}
			scope:agot_filler_ratpit_fighter_2 = {
				death = { death_reason = death_vanished }
			}
		}
	}
}

####################################
# 		  Potshop: Sellsword       #
#          ZombieSchrodCat		   #
#            0018-0021             #
####################################

agot_filler_kingslanding.0018 = { #start
	type = character_event
	title = agot_filler_kingslanding.0018.t
	desc = agot_filler_kingslanding.0018.desc

	theme = corruption
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = scope:agot_filler_potshop_sellsword
		animation = personality_bold
	}

	right_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		is_landed = yes
		is_available_adult = yes
		has_title = title:c_kings_landing
		NOT = {
			has_character_flag = agot_filler_kingslanding_potshop_sellsword
		}
	}

	immediate = {
		hidden_effect = {
			create_character = {
				location = root.capital_province
				age = { 20 40 }
				gender = male
				faith = this.faith
				trait = cynical
				trait = arrogant
				trait = education_martial_prowess_2
				culture = culture:crownlander
				save_scope_as = agot_filler_potshop_sellsword
			}
		}
		add_character_flag = {
			flag = agot_filler_kingslanding_potshop_sellsword
			years = 5
		}
	}

	option = { #ignore sellsword warning
		name = agot_filler_kingslanding.0018.a
		trigger_event = agot_filler_kingslanding.0019

	}

	option = { #challenge the sellsword
		name = agot_filler_kingslanding.0018.b
		trigger = {
			has_trait = wrathful
		}
		trigger_event = agot_filler_kingslanding.0021

	}

	option = { #ask sellsword why he is eating
		name = agot_filler_kingslanding.0018.c
		trigger_event = agot_filler_kingslanding.0020

	}
}

agot_filler_kingslanding.0019 = { #suprise in bowl of brown
	type = character_event
	title = agot_filler_kingslanding.0019.t
	desc = agot_filler_kingslanding.0019.desc

	theme = skull
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = scope:agot_filler_potshop_sellsword
		animation = disgust
	}

	right_portrait = {
		character = root
		animation = disgust
	}

	option = {
		name = agot_filler_kingslanding.0019.a
		hidden_effect = {
			random_list = {
				70 = {
					add_prestige = minor_prestige_loss
				}
				30 = {
					add_prestige = minor_prestige_loss
					add_trait = ill
				}
			}
		}
	}

	after = {
		hidden_effect = {
			scope:agot_filler_potshop_sellsword = {
				death = { death_reason = death_vanished }
			}
		}
	}
}

agot_filler_kingslanding.0020 = { #sellsword is for hire
	type = character_event
	title = agot_filler_kingslanding.0020.t
	desc = agot_filler_kingslanding.0020.desc

	theme = corruption
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = scope:agot_filler_potshop_sellsword
		animation = personality_bold
	}

	right_portrait = {
		character = root
		animation = personality_bold
	}

	option = {
		name = agot_filler_kingslanding.0020.a
		root = {
			add_courtier = scope:agot_filler_potshop_sellsword
		}
		remove_short_term_gold = 15
	}
	option = {
		name = agot_filler_kingslanding.0020.b
		add_prestige = minor_prestige_gain
	}
}

agot_filler_kingslanding.0021 = { #end
	type = character_event
	title = agot_filler_kingslanding.0021.t
	desc = agot_filler_kingslanding.0021.desc

	theme = corruption
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = root
		animation = rage
	}

	right_portrait = {
		character = scope:agot_filler_potshop_sellsword
		animation = rage
	}

	option = {
		name = agot_filler_kingslanding.0021.a
			duel = {
				skill = prowess
				target = scope:agot_filler_potshop_sellsword

			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}

				send_interface_toast = {
				title = agot_filler_kingslanding.0021.success_title
					root = {
						add_prestige = medium_prestige_gain
					}
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
				title = agot_filler_kingslanding.0021.failure_title
					add_prestige = minor_prestige_loss
					hidden_effect = {
						random_list = {
							50 = {
								add_trait = wounded_1
								add_prestige = minor_prestige_loss
							}
							50 = {
								add_prestige = minor_prestige_loss
							}
						}
					}
				}
			}
		}
	}
}

####################################
#   Cobbler's Square: The Septon   #
#          ZombieSchrodCat		   #
#            0022-0025             #
####################################

agot_filler_kingslanding.0022 = { #start
	type = character_event
	title = agot_filler_kingslanding.0022.t
	desc = agot_filler_kingslanding.0022.desc

	theme = faith
	override_background = {
		reference = market
	}
	right_portrait = {
		character = scope:agot_filler_square_septon
		animation = personality_zealous
	}

	trigger = {
		is_landed = yes
		is_available_adult = yes
		has_title = title:c_kings_landing
		NOT = {
			has_character_flag = agot_filler_kingslanding_square_septon
		}
	}

	immediate = {
		hidden_effect = {
			create_character = {
				location = root.capital_province
				age = { 40 60 }
				gender = male
				faith = faith:fots_seven
				trait = zealous
				culture = culture:crownlander
				save_scope_as = agot_filler_square_septon
			}
		}
		add_character_flag = {
			flag = agot_filler_kingslanding_square_septon
			years = 5
		}
	}

	option = { #debate
		name = agot_filler_kingslanding.0022.a
		trigger = {
			faith = faith:fots_seven
			NOT = {
				has_trait = cynical
			}
		}
		trigger_event = agot_filler_kingslanding.0023

	}

	option = { #give lesson
		name = agot_filler_kingslanding.0022.b
		trigger = {
			has_trait = theologian
		}
		trigger_event = agot_filler_kingslanding.0024

	}

	option = { #ignore
		name = agot_filler_kingslanding.0022.c

	}

	option = { #throw food
		name = agot_filler_kingslanding.0022.d
		trigger = {
			has_trait = cynical
		}
		trigger_event = agot_filler_kingslanding.0025
		remove_short_term_gold = 1

	}
}

agot_filler_kingslanding.0023 = {
	type = character_event
	title = agot_filler_kingslanding.0023.t
	desc = agot_filler_kingslanding.0023.desc

	theme = faith
	override_background = {
		reference = market
	}
	left_portrait = {
		character = root
		animation = personality_zealous
	}

	right_portrait = {
		character = scope:agot_filler_square_septon
		animation = personality_zealous
	}

	option = {
		name = agot_filler_kingslanding.0023.a
			duel = {
				skill = learning
				target = scope:agot_filler_square_septon

			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}

				send_interface_toast = {
				title = agot_filler_kingslanding.0023.success_title
					root = {
						add_piety = medium_piety_gain
					}
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
				title = agot_filler_kingslanding.0023.failure_title
					root = {
						add_piety = medium_piety_loss
					}
				}
			}
		}
	}
}

agot_filler_kingslanding.0024 = { #theologian
	type = character_event
	title = agot_filler_kingslanding.0024.t
	desc = agot_filler_kingslanding.0024.desc

	theme = faith
	override_background = {
		reference = market
	}
	left_portrait = {
		character = root
		animation = personality_zealous
	}

	right_portrait = {
		character = scope:agot_filler_square_septon
		animation = personality_content
	}

	option = {
		name = agot_filler_kingslanding.0024.a
		add_prestige = minor_prestige_gain
		add_piety = major_piety_gain
	}
}

agot_filler_kingslanding.0025 = { #throw food - end
	type = character_event
	title = agot_filler_kingslanding.0025.t
	desc = agot_filler_kingslanding.0025.desc

	theme = faith
	override_background = {
		reference = market
	}
	left_portrait = {
		character = root
		animation = ecstasy
	}

	right_portrait = {
		character = scope:agot_filler_square_septon
		animation = shock
	}

	option = {
		name = agot_filler_kingslanding.0025.a
		add_stress = minor_stress_loss
		add_piety = minor_piety_loss
	}
}

####################################
#   The Baker and the Apprentice   #
#          ZombieSchrodCat		   #
#            0026-0028             #
####################################

agot_filler_kingslanding.0026 = { #start
	type = character_event
	title = agot_filler_kingslanding.0026.t
	desc = agot_filler_kingslanding.0026.desc

	theme = intrigue
	override_background = {
		reference = market
	}
	right_portrait = {
		character = scope:agot_filler_apprentice
		animation = personality_zealous
	}

	left_portrait = {
		character = scope:agot_filler_baker
		animation = personality_zealous
	}

	trigger = {
		is_landed = yes
		is_available_adult = yes
		has_title = title:c_kings_landing
		NOT = {
			has_character_flag = agot_filler_kingslanding_baker_apprentice
		}
	}

	immediate = {
		hidden_effect = {
			create_character = {
				location = root.capital_province
				age = { 18 20 }
				gender = male
				faith = faith:fots_seven
				trait = zealous
				culture = culture:crownlander
				save_scope_as = agot_filler_apprentice
			}

			create_character = {
				location = root.capital_province
				age = { 50 60 }
				gender = male
				faith = faith:fots_seven
				trait = zealous
				culture = culture:crownlander
				save_scope_as = agot_filler_baker
			}
		}
		add_character_flag = {
			flag = agot_filler_kingslanding_baker_apprentice
			years = 5
		}
	}

	option = { #let City watch deal with them
		name = agot_filler_kingslanding.0026.a
		trigger = {
			NOT = {
				has_trait = wrathful
				has_trait = just
				has_trait = paranoid
			}
		}
		add_prestige = minor_prestige_gain
	}

	option = { #wrathful
		name = agot_filler_kingslanding.0026.b
		trigger = {
			has_trait = wrathful
		}
		trigger_event = agot_filler_kingslanding.0027
	}

	option = { #law clearly states
		name = agot_filler_kingslanding.0026.c
		trigger = {
			has_trait = just
		}
		trigger_event = agot_filler_kingslanding.0028
	}

	option = { #imprison them
		name = agot_filler_kingslanding.0026.d
		trigger = {
			has_trait = paranoid
		}
		root = {
			imprison = {
				target = scope:agot_filler_baker
				type = dungeon
			}
		}
		root = {
			imprison = {
				target = scope:agot_filler_apprentice
				type = dungeon
			}
		}
	}
}

agot_filler_kingslanding.0027 = { #destroy cart
	type = character_event
	title = agot_filler_kingslanding.0027.t
	desc = agot_filler_kingslanding.0027.desc

	theme = intrigue
	override_background = {
		reference = market
	}
	right_portrait = {
		character = scope:agot_filler_apprentice
		animation = fear
	}

	left_portrait = {
		character = scope:agot_filler_baker
		animation = fear
	}

	option = {
		name = agot_filler_kingslanding.0027.a
		add_gold = 50
		add_dread = medium_dread_gain
		add_prestige = medium_prestige_loss
	}

	after = {
		hidden_effect = {
			scope:agot_filler_baker = {
				death = { death_reason = death_vanished }
			}
			scope:agot_filler_apprentice = {
				death = { death_reason = death_vanished }
			}
		}
	}
}

agot_filler_kingslanding.0028 = { #just - end
	type = character_event
	title = agot_filler_kingslanding.0028.t
	desc = agot_filler_kingslanding.0028.desc

	theme = intrigue
	override_background = {
		reference = market
	}
	right_portrait = {
		character = scope:agot_filler_apprentice
		animation = personality_zealous
	}

	left_portrait = {
		character = scope:agot_filler_baker
		animation = personality_zealous
	}

	option = {
		name = agot_filler_kingslanding.0028.a
		random_list = {
			50 = {
				add_gold = 25
			}
			50 = {
				add_dread = minor_dread_gain
			}
		}
	}

	after = {
		add_prestige = medium_prestige_gain
		hidden_effect = {
			scope:agot_filler_baker = {
				death = { death_reason = death_vanished }
			}
			scope:agot_filler_apprentice = {
				death = { death_reason = death_vanished }
			}
		}
	}
}

####################################
#   Street of Silk: Blackmail	   #
#          ZombieSchrodCat		   #
#            0029-0030             #
####################################

agot_filler_kingslanding.0029 = { #start
	type = character_event
	title = agot_filler_kingslanding.0029.t
	desc = agot_filler_kingslanding.0029.desc

	theme = intrigue
	override_background = {
		reference = alley_night
	}
	right_portrait = {
		character = scope:agot_filler_blackmailer
		animation = personality_zealous
	}

	trigger = {
		is_landed = yes
		is_available_adult = yes
		has_title = title:c_kings_landing
		has_trait = lustful
		NOT = {
			has_character_flag = agot_filler_kingslanding_blackmailer
		}
	}

	immediate = {
		hidden_effect = {
			create_character = {
				location = root.capital_province
				age = {25 35 }
				gender = male
				faith = faith:fots_seven
				trait = deceitful
				culture = culture:crownlander
				save_scope_as = agot_filler_blackmailer
			}
		}
		add_character_flag = {
			flag = agot_filler_kingslanding_blackmailer
			years = 5
		}
	}

	option = { #pay bribe
		name = agot_filler_kingslanding.0029.a
		remove_short_term_gold = 50
	}

	option = { #don't pay
		name = agot_filler_kingslanding.0029.b
		if = {
			limit ={
				is_married = yes
			}
			add_trait = adulterer
		}
		if = {
			limit ={
				is_married = no
			}
			add_trait = fornicator
		}
	}

	option = { #wrathful
		name = agot_filler_kingslanding.0029.c
		trigger = {
			has_trait = wrathful
		}
		add_secret = {
			type = secret_murder
			target = root
		}
		unknown_murder_effect = {
			VICTIM = scope:agot_filler_blackmailer
			MURDERER = ROOT
			REASON = death_murder
		}
	}

	option = { #I want in
		name = agot_filler_kingslanding.0029.d
		trigger = {
			has_trait = deceitful
		}
		trigger_event = agot_filler_kingslanding.0030
	}

}

agot_filler_kingslanding.0030 = { #spy ring - end
	type = character_event
	title = agot_filler_kingslanding.0030.t
	desc = agot_filler_kingslanding.0030.desc

	theme = intrigue
	override_background = {
		reference = alley_night
	}
	right_portrait = {
		character = scope:agot_filler_blackmailer
		animation = fear
	}

	option = {
		name = agot_filler_kingslanding.0030.a
		ROOT = {
			add_character_modifier = {
				modifier = agot_filler_kingslanding_brothel_spys
				years = 5
			}
		}
	}
}

####################################
#       The Redkeep: The Rats 	   #
#          ZombieSchrodCat		   #
#            0031-0038             #
####################################

agot_filler_kingslanding.0031 = { #start
	type = character_event
	title = agot_filler_kingslanding.0031.t
	desc = agot_filler_kingslanding.0031.desc

	theme = intrigue
	override_background = {
		reference = throne_room
	}
	left_portrait = {
		character = root
		animation = disgust
	}

	trigger = {
		is_landed = yes
		is_available_adult = yes
		has_title = title:c_kings_landing
		NOT = {
			has_character_flag = agot_filler_kingslanding_redkeep_rat
		}
	}

	immediate = {
		add_character_flag = {
			flag = agot_filler_kingslanding_redkeep_rat
			years = 20
		}
	}

	option = { #explore tunnel
		name = agot_filler_kingslanding.0031.a
		hidden_effect = {
			random_list = {
				25 = {
					trigger_event = agot_filler_kingslanding.0032
				}
				25 = {
					trigger_event = agot_filler_kingslanding.0033
				}
				25 = {
					trigger_event = agot_filler_kingslanding.0034
				}
				25 = {
					trigger_event = agot_filler_kingslanding.0035
				}
			}
		}

	}

	option = { #patch
		name = agot_filler_kingslanding.0031.b
		remove_short_term_gold = 10
	}
}

agot_filler_kingslanding.0032 = { #narrow bridge
	type = character_event
	title = agot_filler_kingslanding.0032.t
	desc = agot_filler_kingslanding.0032.desc

	theme = intrigue
	override_background = {
		reference = dungeon
	}
	right_portrait = {
		character = root
		animation = fear
	}

	option = { #go across
		name = agot_filler_kingslanding.0032.a
		trigger = {
			NOT = {
				has_trait = craven
			}
		}
		hidden_effect = {
			random_list = {
				30 = {
					trigger_event = agot_filler_kingslanding.0036
				}
				30 = {
					trigger_event = agot_filler_kingslanding.0037
				}
				40 = {
					trigger_event = agot_filler_kingslanding.0038
				}
			}
		}
		random = {
			chance = 5
			root = {
				death = { death_reason = death_vanished }
			}
		}
	}

	option = { #flee
		name = agot_filler_kingslanding.0032.b
		trigger = {
			has_trait = craven
		}
		add_prestige = minor_prestige_loss
	}

	option = { #rope
		name = agot_filler_kingslanding.0032.c
		trigger = { learning >= 8 }
		hidden_effect = {
			random_list = {
				30 = {
					trigger_event = agot_filler_kingslanding.0036
				}
				30 = {
					trigger_event = agot_filler_kingslanding.0037
				}
				40 = {
					trigger_event = agot_filler_kingslanding.0038
				}
			}
		}
	}
}

agot_filler_kingslanding.0033 = { #pendulum
	type = character_event
	title = agot_filler_kingslanding.0033.t
	desc = agot_filler_kingslanding.0033.desc

	theme = intrigue
	override_background = {
		reference = dungeon
	}
	right_portrait = {
		character = root
		animation = fear
	}

	option = { #go across
		name = agot_filler_kingslanding.0033.a
		trigger = {
			NOT = {
				has_trait = craven
			}
		}
		hidden_effect = {
			random_list = {
				30 = {
					trigger_event = agot_filler_kingslanding.0033
				}
				70 = {
					random_list = {
						30 = {
							trigger_event = agot_filler_kingslanding.0036
						}
						30 = {
							trigger_event = agot_filler_kingslanding.0037
						}
						40 = {
							trigger_event = agot_filler_kingslanding.0038
						}
					}
				}
			}
		}
		random_list = {
			40 = {
				add_trait = wounded_1
			}
			30 = {
				add_trait = wounded_2
			}
			30 = {
				add_trait = wounded_3
			}
		}
	}

	option = { #flee
		name = agot_filler_kingslanding.0033.b
		trigger = {
			has_trait = craven
		}
		add_prestige = minor_prestige_loss
	}

	option = {
		name = agot_filler_kingslanding.0033.c
		trigger = {
			has_trait = calm
		 }
		hidden_effect = {
			random_list = {
				30 = {
					trigger_event = agot_filler_kingslanding.0036
				}
				30 = {
					trigger_event = agot_filler_kingslanding.0037
				}
				40 = {
					trigger_event = agot_filler_kingslanding.0038
				}
			}
		}
	}

	option = {
		name = agot_filler_kingslanding.0033.d
		trigger = {
			has_trait = patient
		}
		hidden_effect = {
			random_list = {
				30 = {
					trigger_event = agot_filler_kingslanding.0036
				}
				30 = {
					trigger_event = agot_filler_kingslanding.0037
				}
				40 = {
					trigger_event = agot_filler_kingslanding.0038
				}
			}
		}
	}
}

agot_filler_kingslanding.0034 = { #assassin body
	type = character_event
	title = agot_filler_kingslanding.0034.t
	desc = agot_filler_kingslanding.0034.desc

	theme = intrigue
	override_background = {
		reference = dungeon
	}
	right_portrait = {
		character = root
		animation = fear
	}

	option = {
		name = agot_filler_kingslanding.0034.a
		add_stress = minor_stress_gain
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
			}
			random = {
				chance = 10
				add_trait = paranoid
			}
		}
	}
}

agot_filler_kingslanding.0035 = { #gold!
	type = character_event
	title = agot_filler_kingslanding.0035.t
	desc = agot_filler_kingslanding.0035.desc

	theme = intrigue
	override_background = {
		reference = dungeon
	}
	right_portrait = {
		character = root
		animation = ecstasy
	}

	option = {
		name = agot_filler_kingslanding.0035.a
		add_gold = 100
		add_prestige = medium_prestige_gain
	}
}

agot_filler_kingslanding.0036 = { #brothel
	type = character_event
	title = agot_filler_kingslanding.0036.t
	desc = agot_filler_kingslanding.0036.desc

	theme = intrigue
	override_background = {
		reference = tavern
	}
	right_portrait = {
		character = root
		animation = ecstasy
	}

	option = {
		name = agot_filler_kingslanding.0036.a
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
			}
			random = {
				chance = 10
				add_trait = lustful
			}
		}
		add_prestige = medium_prestige_gain
	}

	option = {
		name = agot_filler_kingslanding.0036.b
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
			}
			random = {
				chance = 10
				add_trait = chaste
			}
		}
		add_piety = medium_piety_gain
	}
}

agot_filler_kingslanding.0037 = { #sept of baelor
	type = character_event
	title = agot_filler_kingslanding.0037.t
	desc = agot_filler_kingslanding.0037.desc

	theme = intrigue
	override_background = {
		reference = dungeon
	}
	right_portrait = {
		character = root
		animation = personality_zealous
	}

	option = {
		name = agot_filler_kingslanding.0037.a
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
			}
			random = {
				chance = 10
				add_trait = zealous
			}
		}
		add_piety = medium_piety_gain
	}

	option = {
		name = agot_filler_kingslanding.0037.b
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
			}
			random = {
				chance = 10
				add_trait = cynical
			}
		}
		add_piety = medium_piety_loss
	}
}

agot_filler_kingslanding.0038 = { #tavern - end
	type = character_event
	title = agot_filler_kingslanding.0038.t
	desc = agot_filler_kingslanding.0038.desc

	theme = intrigue
	override_background = {
		reference = tavern
	}
	right_portrait = {
		character = root
		animation = ecstasy
	}

	option = {
		name = agot_filler_kingslanding.0038.a
		random = {
			chance = 10
			add_trait = drunkard
			modifier = {
				factor = 5
				has_character_modifier = patron_drunken_god_modifier
			}
		}
		add_prestige = medium_prestige_gain
	}

	option = {
		name = agot_filler_kingslanding.0038.b
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
			}
			random = {
				chance = 10
				add_trait = gluttonous
			}
		}
		add_prestige = medium_prestige_gain
	}

	option = {
		name = agot_filler_kingslanding.0038.c
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
			}
			random = {
				chance = 10
				add_trait = temperate
			}
		}
		add_prestige = medium_prestige_gain
	}
}

####################################
#       	The Dragonpit		   #
#          ZombieSchrodCat		   #
#            0039-0043             #
####################################

agot_filler_kingslanding.0039 = { #start
	type = character_event
	title = agot_filler_kingslanding.0039.t
	desc = agot_filler_kingslanding.0039.desc

	theme = intrigue
	override_background = {
		reference = market
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		is_landed = yes
		is_available_adult = yes
		has_title = title:c_kings_landing
		title:c_kings_landing.title_province = {
			OR = {
				has_building = dragonpit_ruins_01
				has_building = dragonpit_ruins_02
			}
		}
		NOT = {
			has_character_flag = agot_filler_kingslanding_the_dragonpit
		}
	}

	immediate = {
		add_character_flag = {
			flag = agot_filler_kingslanding_the_dragonpit
			years = 10
		}
	}

	option = { #vist dragon pit - male
		name = agot_filler_kingslanding.0039.a
		trigger = {
			is_male = yes
		}
		hidden_effect = {
			random_list = {
				25 = {
					trigger_event = agot_filler_kingslanding.0040
				}
				25 = {
					trigger_event = agot_filler_kingslanding.0041
				}
				25 = {
					trigger_event = agot_filler_kingslanding.0042
				}
				25 = {
					trigger_event = agot_filler_kingslanding.0043
				}
			}
		}
	}

	option = { #vist dragon pit - female
		name = agot_filler_kingslanding.0039.a
		trigger = {
			is_male = no
		}
		hidden_effect = {
			random_list = {
				30 = {
					trigger_event = agot_filler_kingslanding.0040
				}
				30 = {
					trigger_event = agot_filler_kingslanding.0042
				}
				40 = {
					trigger_event = agot_filler_kingslanding.0043
				}
			}
		}
	}

	option = { #leave
		name = agot_filler_kingslanding.0039.b
	}
}

agot_filler_kingslanding.0040 = { #collapsing floor
	type = character_event
	title = agot_filler_kingslanding.0040.t
	desc = agot_filler_kingslanding.0040.desc

	theme = death
	override_background = {
		reference = dungeon
	}
	right_portrait = {
		character = root
		animation = fear
	}

	option = {
		name = agot_filler_kingslanding.0040.a
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
			}
			random = {
				chance = 10
				add_trait = craven
			}
		}
		add_prestige = medium_prestige_loss
	}
}

agot_filler_kingslanding.0041 = { #prostitute
	type = character_event
	title = agot_filler_kingslanding.0041.t
	desc = agot_filler_kingslanding.0041.desc

	theme = love
	override_background = {
		reference = dungeon
	}
	right_portrait = {
		character = scope:dragonpit_lover
		animation = flirtation
	}
	left_portrait = {
		character = root
		animation = flirtation
	}

	immediate = {
		random_dummy_gender_mystic_effect = yes

		create_character = {
			location = root.capital_province
			age = { 21 26 }
			gender = scope:dummy_mystic_gender
			faith = this.faith
			trait = beauty_good_2
			culture = culture:crownlander
			save_scope_as = dragonpit_lover
		}
	}

	option = {
		name = agot_filler_kingslanding.0041.a
		hidden_effect ={
			random_list = {
				70 = {
					random_list = {
						50 = {
							modifier = {
								add = 25
								fertility >= high_fertility
							}
							scope:dragonpit_lover = {
								make_pregnant = {
									father = root
								}
							}
						}
						50 = {
							modifier = {
								add = 25
								fertility <= low_fertility
							}
						}
					}
				}
				20 = {
					if = {
						limit ={
							is_married = yes
						}
						add_trait = adulterer
						add_prestige = medium_prestige_loss
					}
					if = {
						limit ={
							is_married = no
						}
						add_trait = fornicator
						add_prestige = medium_prestige_loss
					}
				}
				10 = {
					add_trait = lovers_pox
					add_prestige = minor_prestige_loss
				}
			}
		}
	}

	option = {
		name = agot_filler_kingslanding.0041.b
		add_prestige = minor_prestige_gain
	}
}

agot_filler_kingslanding.0042 = { #inspired by dragonpit
	type = character_event
	title = agot_filler_kingslanding.0042.t
	desc = agot_filler_kingslanding.0042.desc

	theme = stewardship
	override_background = {
		reference = dungeon
	}
	right_portrait = {
		character = root
		animation = fear
	}

	option = {
		name = agot_filler_kingslanding.0042.a
		trigger = {
			NOT = {
				has_trait = ambitious
			}
		}
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
			}
			random = {
				chance = 10
				add_trait = ambitious
			}
		}
		add_prestige = medium_prestige_gain
	}

	option = {
		name = agot_filler_kingslanding.0042.b
		trigger = {
			NOT = {
				has_trait = diligent
			}
		}
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
			}
			random = {
				chance = 10
				add_trait = diligent
			}
		}
		add_prestige = medium_prestige_gain
	}

	option = {
		name = agot_filler_kingslanding.0042.c
		add_stress = minor_stress_loss
	}
}

agot_filler_kingslanding.0043 = { #begger - end
	type = character_event
	title = agot_filler_kingslanding.0043.t
	desc = agot_filler_kingslanding.0043.desc

	theme = death
	override_background = {
		reference = dungeon
	}
	right_portrait = {
		character = root
		animation = personality_bold
	}

	left_portrait = {
		character = scope:agot_filler_begger_dragonpit
		animation = beg
	}

	immediate = {
		hidden_effect = {
			create_character = {
				location = root.capital_province
				age = { 20 65 }
				gender = male
				dynasty = none
				faith = this.faith
				culture = culture:crownlander #fleabottom
				intrigue = { 10 15 }
				save_scope_as = agot_filler_begger_dragonpit
			}
		}
	}

	option = {
		name = agot_filler_kingslanding.0043.a
		if = {
			limit = {
				has_trait = greedy
			}
			add_stress = minor_stress_gain
		}
		remove_short_term_gold = 10
		add_piety = medium_piety_gain
	}

	option = {
		name = agot_filler_kingslanding.0043.b
		if = {
			limit = {
				number_of_personality_traits < personality_trait_limit
			}
			random = {
				chance = 10
				add_trait = greedy
			}
		}
		add_gold = 15
		add_dread = minor_dread_gain
		add_prestige = minor_prestige_loss
	}

	option = { #ignore
		name = agot_filler_kingslanding.0043.c
		if = {
			limit = {
				OR = {
					has_trait = generous
					has_trait = compassionate
				}
			}
			add_stress = minor_stress_gain
		}
		add_piety = minor_piety_loss
	}
		option = { #cruel
		name = agot_filler_kingslanding.0043.d
		trigger = {
			OR = {
				has_trait = sadistic
				has_trait = cannibal
				has_trait = torturer
			}
		}
		unknown_murder_effect = {
			VICTIM = scope:agot_filler_begger_dragonpit
			MURDERER = ROOT
			REASON = death_murder
		}
		add_gold = 15
		add_dread = major_dread_gain
		add_piety = minor_piety_loss
	}
}

# Balerion the cat causes chaos
agot_filler_kingslanding.0044 = {
	type = character_event
	title = agot_filler_kingslanding.0044.t
	desc = agot_filler_kingslanding.0044.desc

	trigger = {
		is_available = yes
		game_start_date >= 8282.1.1
		current_date >= 8283.1.1
		current_date < 8307.1.1
		has_cat_trigger = no
		character:Targaryen_10 = {
			is_alive = no
		}
		capital_county ?= title:c_kings_landing
	}

	theme = court
	right_portrait = {
		character = root
	}
	lower_right_portrait = {
		character = scope:giving_cat_child
	}

	immediate = {
		random_child = {
			limit = {
				can_gain_pet_trigger = yes
				is_ai = yes
			}
			save_scope_as = giving_cat_child
		}
	}

	option = { # Taming
		name = agot_filler_kingslanding.0044.a
		flavor = agot_filler_kingslanding.0044.a.f
		trigger = {
			can_gain_pet_trigger = yes
		}
		start_cat_story_cycle_effect = yes
		add_character_flag = owns_cat_balerion
		set_variable = {
			name = story_cycle_cat_name
			value = flag:custom
		}
		random_owned_story = {
			limit = {
				story_type = story_cycle_pet_cat
			}
			set_variable = {
				name = cat_fur_color
				value = flag:black
			}
			set_variable = {
				name = cat_eye_color
				value = flag:yellow
			}
			set_variable = {
				name = cat_gender
				value = flag:male
			}
		}
	}

	option = { # Be Joffery
		name = agot_filler_kingslanding.0044.b
		flavor = agot_filler_kingslanding.0044.b.f
		trigger = {
			has_trait = sadistic
		}

		stress_impact = {
			sadistic = medium_stress_loss
			lunatic_1 = minor_stress_loss
			lunatic_genetic = minor_stress_loss
			just = minor_stress_gain
			zealous = minor_stress_gain
		}

		add_character_modifier = {
			modifier = agot_cat_vivisection_modifier
			days = 365
		}
	}

	option = { # Kick the cat
		name = agot_filler_kingslanding.0044.c
		flavor = agot_filler_kingslanding.0044.c.f
		trigger = {
			OR = {
				has_trait = wrathful
				has_trait = sadistic
				has_trait = callous
				has_trait = vengeful
			}
		}

		stress_impact = {
			sadistic = minor_stress_loss
			wrathful = minor_stress_loss
			callous = minor_stress_loss
			vengeful = minor_stress_loss
			compassionate = medium_stress_gain
			calm = medium_stress_gain
		}
	}

	option = { # Pet the cat
		name = agot_filler_kingslanding.0044.d
		flavor = agot_filler_kingslanding.0044.d.f
		trigger = {
			NOT = { has_trait = callous }
		}

		stress_impact = {
			sadistic = medium_stress_gain
		}
		add_stress = minor_stress_loss
	}

	option = { # Give to child
		name = agot_filler_kingslanding.0044.e
		flavor = agot_filler_kingslanding.0044.e.f
		trigger = {
			exists = scope:giving_cat_child
		}

		scope:giving_cat_child = {
			start_cat_story_cycle_effect = yes
			add_character_flag = owns_cat_balerion
			set_variable = {
				name = story_cycle_cat_name
				value = flag:custom
			}
			random_owned_story = {
				limit = {
					story_type = story_cycle_pet_cat
				}
				set_variable = {
					name = cat_fur_color
					value = flag:black
				}
				set_variable = {
					name = cat_eye_color
					value = flag:yellow
				}
				set_variable = {
					name = cat_gender
					value = flag:male
				}
			}
		}
	}
}
