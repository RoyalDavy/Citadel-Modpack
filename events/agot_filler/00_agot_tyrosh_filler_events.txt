namespace = agot_filler_tyrosh

# 0001-0010 by Dylan

scripted_trigger available_for_tyrosh_events = {
	is_landed = yes
	is_available_adult = yes
	any_held_county = {
		title_province = { geographical_region = world_essos_tyrosh }
	}
}

# Dye Merchants Hound You
agot_filler_tyrosh.0001 = {
	type = character_event
	title = agot_filler_tyrosh.0001.t
	desc = agot_filler_tyrosh.0001.desc

	theme = stewardship_wealth_focus

	override_background = {
		reference = market
	}

	left_portrait = {
		character = root
		animation = idle
	}

	trigger = {
		available_for_tyrosh_events = yes
		NOT = {
			has_character_flag = agot_filler_tyrosh_dye_merchants_hound_you
		}
	}

	immediate = {
		add_character_flag = { flag = agot_filler_tyrosh_dye_merchants_hound_you years = 15 }
	}

	# Green Dye
	option = {
		name = agot_filler_tyrosh.0001.a
		remove_short_term_gold = tiny_gold_value
		create_artifact = {
			name = agot_green_dye
			description = agot_green_dye_description
			type = miscellaneous
			visuals = flask
			modifier = artifact_attraction_opinion_2_modifier
			creator = root
			rarity = famed
			save_scope_as = agot_green_dye
		}
		stress_impact = {
			compassionate = minor_stress_loss
			greedy = minor_stress_gain
		}
		ai_chance = {
			base = 25
		}
	}

	# Purple Dye
	option = {
		name = agot_filler_tyrosh.0001.b
		remove_short_term_gold = minor_gold_value
		create_artifact = {
			name = agot_purple_dye
			description = agot_purple_dye_description
			type = miscellaneous
			visuals = flask
			modifier = artifact_monthly_minor_prestige_2_modifier
			creator = root
			rarity = famed
			save_scope_as = perfume_bottle
		}
		stress_impact = {
			generous = minor_stress_loss
			greedy = minor_stress_gain
		}
		ai_chance = {
			base = 25
		}
	}

	# Vermilion Dye
	option = {
		name = agot_filler_tyrosh.0001.c
		remove_short_term_gold = tiny_gold_value
		create_artifact = {
			name = agot_vermilion_dye
			description = agot_vermilion_dye_description
			type = miscellaneous
			visuals = flask
			modifier = artifact_stress_gain_2_modifier
			creator = root
			rarity = famed
			save_scope_as = perfume_bottle
		}
		stress_impact = {
			generous = minor_stress_loss
			greedy = minor_stress_gain
		}
		ai_chance = {
			base = 25
		}
	}

	# I don't want any!
	option = {
		name = agot_filler_tyrosh.0001.d
		stress_impact = {
			generous = minor_stress_gain
			fickle = minor_stress_loss
			greedy = minor_stress_loss
		}
		ai_chance = {
			base = 25
			modifier = {
				short_term_gold < tiny_gold_value
				add = 100
			}
		}
	}
}

# Competing  Inventors
agot_filler_tyrosh.0002 = {
	type = character_event
	title = agot_filler_tyrosh.0002.t
	desc = agot_filler_tyrosh.0002.desc

	theme = stewardship_wealth_focus

	override_background = {
		reference = study
	}

	left_portrait = {
		character = scope:torturer_inventor
		animation = spymaster
	}

	right_portrait = {
		character = scope:construction_inventor
		animation = worry
	}

	lower_center_portrait = {
		character = root
	}

	trigger = {
		available_for_tyrosh_events = yes
		NOT = {
			has_character_flag = agot_filler_tyrosh_competing_inventors
		}
	}

	immediate = {
		add_character_flag = { flag = agot_filler_tyrosh_competing_inventors years = 15 }
		create_character = {
			culture = root.capital_county.title_province.culture
			faith = root.capital_county.title_province.faith
			gender_female_chance = 50
			location = root.capital_province
			save_scope_as = torturer_inventor
			trait = education_stewardship_3
			trait = torturer
			learning = 15
			after_creation = {
				add_character_modifier = azure_crown_hair_dye
			}
		}
		create_character = {
			culture = root.capital_county.title_province.culture
			faith = root.capital_county.title_province.faith
			gender_female_chance = 50
			location = root.capital_province
			save_scope_as = construction_inventor
			trait = education_stewardship_3
			trait = architect
			learning = 15
			after_creation = {
				add_character_modifier = dragons_breath_hair_dye
			}
		}

	}

	# Inventor 1's work seems worthwhile
	option = {
		name = agot_filler_tyrosh.0002.a
		remove_short_term_gold = medium_gold_value
		add_courtier = scope:torturer_inventor
		add_character_modifier = {
			modifier = agot_sponsored_torturer_inventor_modifier
			years = 5
		}
		stress_impact = {
			compassionate = minor_stress_loss
			generous = minor_stress_loss
			greedy = minor_stress_gain
		}
		hidden_effect = {
			scope:construction_inventor = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		ai_chance = {
			base = 25
			modifier = {
				OR = {
					has_trait = sadistic
					has_trait = vengeful
					has_trait = torturer
				}
				add = 75
			}
		}
	}

	# Inventor 2's work seems worthwhile
	option = {
		name = agot_filler_tyrosh.0002.b
		add_courtier = scope:construction_inventor
		remove_short_term_gold = medium_gold_value
		add_character_modifier = {
			modifier = agot_sponsored_construction_inventor_modifier
			years = 5
		}
		stress_impact = {
			compassionate = minor_stress_loss
			generous = minor_stress_loss
			greedy = minor_stress_gain
		}
		hidden_effect = {
			scope:torturer_inventor = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		ai_chance = {
			base = 25
			modifier = {
				OR = {
					has_trait = temperate
					has_trait = architect
					has_trait = gregarious
				}
				add = 75
			}
		}
	}

	# Neither work interests me
	option = {
		name = agot_filler_tyrosh.0002.c
		stress_impact = {
			generous = minor_stress_gain
		}
		hidden_effect = {
			scope:torturer_inventor = {
				death = {
					death_reason = death_vanished
				}
			}
			scope:construction_inventor = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		ai_chance = {
			base = 25
			modifier = {
				OR = {
					has_trait = lazy
					has_trait = greedy
					learning <= average_skill_rating
				}
				add = 50
			}
			modifier = {
				short_term_gold < medium_gold_value
				add = 300
			}
		}
	}
}

# Ship Leaves Port Event
agot_filler_tyrosh.0003 = {
	type = character_event
	title = agot_filler_tyrosh.0003.t
	desc = agot_filler_tyrosh.0003.desc

	theme = healthcare

	override_background = {
		reference = docks
	}

	left_portrait = {
		character = root
		animation = idle
	}

	trigger = {
		available_for_tyrosh_events = yes
		any_held_county = {
			is_coastal_county = yes
		}
		NOT = {
			has_character_flag = agot_filler_ship_leaves_tyroshi_port
		}
	}

	immediate = {
		add_character_flag = { flag = agot_filler_ship_leaves_tyroshi_port years = 10 }
	}

	# Slaves
	option = {
		name = agot_filler_tyrosh.0003.a
		trigger = { has_realm_law = slavery_allowed_law }
		add_character_modifier = {
			modifier = agot_generic_daydreaming_modifier
			years = 1
		}
		stress_impact = {
			compassionate = minor_stress_gain
			honest = minor_stress_loss
			avaricious = minor_stress_loss
		}
		ai_chance = {
			base = 33
		}
	}

	# Dyes
	option = {
		add_character_modifier = {
			modifier = agot_generic_daydreaming_modifier
			years = 1
		}
		name = agot_filler_tyrosh.0003.b
		stress_impact = {
			shrewd = minor_stress_loss
			avaricious = minor_stress_loss
		}
		ai_chance = {
			base = 33
		}
	}

	# We'll never know...
	option = {
		name = agot_filler_tyrosh.0003.c
		stress_impact = {
			content = minor_stress_loss
			fickle = minor_stress_gain
		}
		ai_chance = {
			base = 33
			modifier = {
				add = 50
				OR = {
					has_trait = content
					has_trait = lazy
					has_trait = calm
				}
			}
		}
	}

}

# Honeyfingers Event
agot_filler_tyrosh.0004 = {
	type = character_event
	title = agot_filler_tyrosh.0004.t
	desc = agot_filler_tyrosh.0004.desc

	theme = party

	override_background = {
		reference = feast
	}

	left_portrait = {
		character = root
		animation = personality_greedy
	}

	trigger = {
		available_for_tyrosh_events = yes
		NOT = {
			has_character_flag = agot_filler_tyrosh_honeyfingers_flag
			has_trait = inappetetic
		}
	}

	immediate = {
		add_character_flag = { flag = agot_filler_tyrosh_honeyfingers_flag years = 20 }
	}

	# Buy a boxfull
	option = {
		name = agot_filler_tyrosh.0004.a
		remove_short_term_gold = tiny_gold_value
		change_current_weight = 1
		add_character_modifier = {
			modifier = agot_delicious_food_modifier
			months = 1
		}
		stress_impact = {
			greedy = minor_stress_loss
			comfort_eater = major_stress_loss
			temperate = minor_stress_gain
		}
		ai_chance = {
			base = 25
		}
	}

	# Buy the day's entire stock
	option = {
		name = agot_filler_tyrosh.0004.b
		remove_short_term_gold = minor_gold_value
		add_character_modifier = {
			modifier = agot_delicious_food_modifier
			months = 6
		}
		change_current_weight = 5
		stress_impact = {
			greedy = major_stress_loss
			comfort_eater = major_stress_loss
			temperate = minor_stress_gain
		}
		ai_chance = {
			base = 25
		}
	}

	# I'll hire the baker!
	option = {
		name = agot_filler_tyrosh.0004.c
		remove_short_term_gold = medium_gold_value
		change_current_weight = 1
		add_character_modifier = {
			modifier = agot_delicious_food_modifier
			months = 12
		}
		stress_impact = {
			greedy = minor_stress_loss
			shrewd = minor_stress_loss
			comfort_eater = minor_stress_loss
			temperate = minor_stress_gain
		}
		ai_chance = {
			base = 25
			modifier = {
				has_trait = shrewd
				add = 25
			}
		}
	}

	# Actually, I should resist temptation
	option = {
		name = agot_filler_tyrosh.0004.d
		stress_impact = {
			greedy = major_stress_gain
			temperate = minor_stress_loss
		}
		ai_chance = {
			base = 50
			modifier = {
				has_trait = content
				add = 25
			}
			modifier = {
				short_term_gold < medium_gold_value
				add = 200
			}
		}
	}
}

# Stolen Ornate Helmet
agot_filler_tyrosh.0005 = {
	type = character_event
	title = agot_filler_tyrosh.0005.t
	desc = agot_filler_tyrosh.0005.desc

	theme = unfriendly

	override_background = {
		reference = alley_day
	}

	left_portrait = {
		character = root
		animation = disgust
	}

	trigger = {
		available_for_tyrosh_events = yes
		NOT = {
			has_character_flag = agot_filler_stolen_tyroshi_helmet_flag
		}
	}

	immediate = {
		add_character_flag = { flag = agot_filler_stolen_tyroshi_helmet_flag years = 25 }
	}

	# Force the boys to return the helmet
	option = {
		name = agot_filler_tyrosh.0005.a
		stress_impact = {
			just = major_stress_loss
		}
		ai_chance = {
			base = 25
			modifier = {
				has_trait = just
				add = 50
			}
		}
	}

	# Suggest they split the profits
	option = {
		name = agot_filler_tyrosh.0005.b
		add_character_modifier = {
			modifier = agot_quick_thinking_intrigue_modifier
			years = 1
		}
		trigger = {
			NOT = {
				has_trait = just
			}
		}
		stress_impact = {
			just = major_stress_gain
			deceitful = major_stress_loss
		}
		ai_chance = {
			base = 25
			modifier = {
				has_trait = deceitful
				add = 50
			}
		}
	}

	# Inform the guards
	option = {
		name = agot_filler_tyrosh.0005.c
		stress_impact = {
			just = major_stress_loss
		}
		ai_chance = {
			base = 25
			modifier = {
				has_trait = honest
				add = 25
			}
		}
	}

	# Ignore them
	option = {
		name = agot_filler_tyrosh.0005.d
		stress_impact = {
			just = major_stress_gain
			content = minor_stress_loss
			craven = major_stress_loss
			lazy = minor_stress_loss
		}
		ai_chance = {
			base = 25
			modifier = {
				OR = {
					has_trait = lazy
					has_trait = content
				}
				add = 50
			}
		}
	}
}

# (Don't Cry Over) Spilt Pear Brandy
agot_filler_tyrosh.0006 = {
	type = character_event
	title = agot_filler_tyrosh.0006.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_realm_law = slavery_allowed_law
				}
				desc = agot_filler_tyrosh.0006.slavery_desc
			}
			triggered_desc = {
				trigger = {
					NOT = { has_realm_law = slavery_allowed_law }
				}
				desc = agot_filler_tyrosh.0006.no_slavery_desc
			}
		}
	}

	theme = dread

	override_background = {
		reference = market
	}

	left_portrait = {
		character = root
		animation = eavesdrop
	}

	right_portrait = {
		character = scope:overseer
		animation = anger
		hide_info = yes
	}

	lower_center_portrait = {
		character = scope:slave
		animation = fear
		outfit_tags = { beggar_rags }
		hide_info = yes
	}

	trigger = {
		available_for_tyrosh_events = yes
		NOT = {
			has_character_flag = agot_filler_tyrosh_slave_spilt_brandy_flag
		}
	}

	immediate = {
		add_character_flag = { flag = agot_filler_tyrosh_slave_spilt_brandy_flag years = 25 }

		create_character = {
			culture = root.capital_county.title_province.culture
			faith = root.capital_county.title_province.faith
			gender_female_chance = 50
			location = root.capital_province
			save_scope_as = overseer
		}
		create_character = {
			culture = root.capital_county.title_province.culture
			faith = root.capital_county.title_province.faith
			gender_female_chance = 50
			location = root.capital_province
			trait = slave
			dynasty = none
			save_scope_as = slave
		}
	}

	# Keep Walking, it's not your problem
	option = {
		name = agot_filler_tyrosh.0006.a
		stress_impact = {
			compassionate = minor_stress_gain
			arrogant = minor_stress_loss
		}
		ai_chance = {
			base = 75
		}
	}

	# Lie to the slave master and say it wasn't the slaves fault
	option = {
		name = agot_filler_tyrosh.0006.b
		add_character_modifier = {
			modifier = agot_quick_thinking_intrigue_modifier
			years = 1
		}
		stress_impact = {
			sadistic = massive_stress_gain
			callous = massive_stress_gain
			compassionate = massive_stress_loss
			honest = major_stress_gain
		}
		ai_chance = {
			base = 25
			modifier = {
				has_trait = deceitful
				add = 25
			}
		}
	}

	# Lie to the slave master and say it WAS the slaves fault
	option = {
		name = agot_filler_tyrosh.0006.c
		add_dread = minor_dread_gain
		stress_impact = {
			sadistic = massive_stress_loss
			callous = massive_stress_loss
			compassionate = massive_stress_gain
			honest = major_stress_gain
		}
		ai_chance = {
			base = 25
			modifier = {
				has_trait = deceitful
				add = 25
			}
			modifier = {
				has_trait = sadistic
				add = 50
			}
		}
	}

	after = {
		hidden_effect = {
			scope:overseer = {
				death = {
					death_reason = death_drowned
				}
			}
			scope:slave = {
				death = {
					death_reason = death_drowned
				}
			}
		}
	}
}

# Snail Breeding Industry Suffers
agot_filler_tyrosh.0007 = {
	type = character_event
	title = agot_filler_tyrosh.0007.t
	desc = agot_filler_tyrosh.0007.desc

	theme = stewardship_wealth_focus

	override_background = {
		reference = throne_room
	}

	left_portrait = {
		character = root
		animation = boredom
	}

	right_portrait = {
		character = scope:snail_breeder_rep
		animation = stress
		hide_info = yes
	}

	trigger = {
		available_for_tyrosh_events = yes
		NOT = {
			has_character_flag = agot_filler_tyroshi_snail_disease_flag
		}
	}

	immediate = {
		add_character_flag = { flag = agot_filler_tyroshi_snail_disease_flag years = 30 }
		random_held_county = {
			save_scope_as = owned_county
		}
		create_character = {
			gender_female_chance = 50
			culture = root.capital_county.title_province.culture
			faith = root.capital_county.title_province.faith
			location = root.capital_province
			save_scope_as = snail_breeder_rep
		}
	}

	# Grant the snail breeders relief
	option = {
		name = agot_filler_tyrosh.0007.a
		remove_short_term_gold = major_gold_value
		stress_impact = {
			generous = minor_stress_loss
			greedy = major_stress_gain
		}
		ai_chance = {
			base = 50
		}
	}

	# They should have been more careful
	option = {
		name = agot_filler_tyrosh.0007.b
		scope:owned_county = {
			add_county_modifier = {
				modifier = agot_diseased_snail_industry_modifier
				years = 5
			}
		}
		stress_impact = {
			generous = minor_stress_gain
			greedy = major_stress_loss
		}
		ai_chance = {
			base = 25
			modifier = {
				OR = {
					has_trait = greedy
					has_trait = arrogant
					has_trait = callous
				}
				add = 50
			}
		}
	}

	after = {
		hidden_effect = {
			scope:snail_breeder_rep = {
				death = {
					death_reason = death_drowned
				}
			}
		}
	}
}

# Tyroshi Merchant Talk Event
agot_filler_tyrosh.0008 = {
	type = character_event
	title = agot_filler_tyrosh.0008.t
	desc = agot_filler_tyrosh.0008.desc

	theme = stewardship_wealth_focus

	override_background = {
		reference = market
	}

	left_portrait = {
		character = root
		animation = throne_room_conversation_2
	}

	trigger = {
		available_for_tyrosh_events = yes
		has_realm_law = slavery_allowed_law
		NOT = {
			has_character_flag = agot_filler_tyroshi_merchant_conversation_flag
		}
	}

	immediate = {
		add_character_flag = { flag = agot_filler_tyroshi_merchant_conversation_flag years = 20 }
	}

	# I've found the slaving industry to be profitable
	option = {
		name = agot_filler_tyrosh.0008.a
		add_character_modifier = {
			modifier = agot_supports_tyroshi_slave_industry_modifier
			years = 5
		}
		stress_impact = {
			sadistic = minor_stress_loss
			compassionate = minor_stress_gain
		}
		ai_chance = {
			base = 25
		}
	}

	# The dye industry cannot be matched
	option = {
		name = agot_filler_tyrosh.0008.b
		add_character_modifier = {
			modifier = agot_supports_tyroshi_dye_industry_modifier
			years = 5
		}
		stress_impact = {
			shrewd = minor_stress_loss
			lazy = minor_stress_gain
		}
		ai_chance = {
			base = 25
		}
	}

	# Pleasure houses are reliable, and "everyone" loves them
	option = {
		name = agot_filler_tyrosh.0008.c
		add_character_modifier = {
			modifier = agot_supports_tyroshi_sex_industry_modifier
			years = 5
		}
		stress_impact = {
			lustful = minor_stress_loss
		}
		ai_chance = {
			base = 25
		}
	}

	# Only a merchant's abilities matter, not the industry
	option = {
		name = agot_filler_tyrosh.0008.d
		add_prestige = minor_prestige_gain
		stress_impact = {
			shrewd = minor_stress_loss
			lazy = major_stress_gain
			arrogant = major_stress_loss
		}
		ai_chance = {
			base = 25
			modifier = {
				has_trait = shrewd
				add = 25
			}
		}
	}
}

# Admiring Tyroshi Hair and Beards
agot_filler_tyrosh.0009 = {
	type = character_event
	title = agot_filler_tyrosh.0009.t
	desc = agot_filler_tyrosh.0009.desc

	theme = stewardship_wealth_focus

	override_background = {
		reference = alley_day
	}

	left_portrait = {
		character = root
		animation = flirtation
	}

	trigger = {
		available_for_tyrosh_events = yes
		NOT = {
			has_character_flag = agot_filler_tyrosh_admirable_hairstyles_flag
		}
	}

	immediate = {
		add_character_flag = { flag = agot_filler_tyrosh_admirable_hairstyles_flag years = 10 }
		create_character = {
			culture = root.capital_county.title_province.culture
			faith = root.capital_county.title_province.faith
			location = root.capital_province
			save_scope_as = admirable_tyroshi
			gender_female_chance = 50
			after_creation = {
				add_character_modifier = lord_of_the_seas_hair_dye
			}
		}
	}

	# Strike up a conversation about their hairstyle
	option = {
		name = agot_filler_tyrosh.0009.a
		stress_impact = {
			gregarious = minor_stress_loss
			shy = minor_stress_gain
		}
		ai_chance = {
			base = 25
		}
	}

	# Compliment them
	option = {
		name = agot_filler_tyrosh.0009.b
		stress_impact = {
			gregarious = minor_stress_loss
			generous = major_stress_loss
			arrogant = major_stress_gain
		}
		ai_chance = {
			base = 25
		}
	}

	# Admire them from afar
	option = {
		name = agot_filler_tyrosh.0009.c
		stress_impact = {
			content = minor_stress_loss
			gregarious = miniscule_stress_gain
		}
		ai_chance = {
			base = 25
		}
	}

	after = {
		hidden_effect = {
			scope:admirable_tyroshi = {
				death = {
					death_reason = death_drowned
				}
			}
		}
	}
}

# Destitute Sellsword Begs for Work
agot_filler_tyrosh.0010 = {
	type = character_event
	title = agot_filler_tyrosh.0010.t
	desc = agot_filler_tyrosh.0010.desc

	theme = stewardship_wealth_focus

	override_background = {
		reference = alley_night
	}

	left_portrait = {
		character = root
		animation = idle
	}

	right_portrait = {
		character = scope:tyroshi_sellsword
		animation = beg
	}

	trigger = {
		available_for_tyrosh_events = yes
		NOT = {
			has_character_flag = agot_filler_tyrosh_sellsword_beggar_flag
		}
	}

	immediate = {
		add_character_flag = { flag = agot_filler_tyrosh_sellsword_beggar_flag years = 30 }
		create_character = {
			location = root.capital_province
			culture = culture:braavosi
			faith = faith:fc_pan_tyrosh
			gender = male
			save_scope_as = tyroshi_sellsword
		}
		add_courtier = scope:tyroshi_sellsword
	}

	# Throw some coins his way
	option = {
		name = agot_filler_tyrosh.0010.a
		remove_short_term_gold = tiny_gold_value
		hidden_effect = {
			scope:tyroshi_sellsword = {
				death = {
					death_reason = death_drowned
				}
			}
		}
		stress_impact = {
			greedy = major_stress_gain
			compassionate = minor_stress_loss
			generous = major_stress_loss
		}
		ai_chance = {
			base = 25
		}
	}

	# Ignore him
	option = {
		name = agot_filler_tyrosh.0010.b
		hidden_effect = {
			scope:tyroshi_sellsword = {
				death = {
					death_reason = death_drowned
				}
			}
		}
		stress_impact = {
			compassionate = minor_stress_gain
			callous = major_stress_loss
			arrogant = minor_stress_loss
		}
		ai_chance = {
			base = 50
			modifier = {
				has_trait = greedy
				add = 25
			}
			modifier = {
				has_trait = arrogant
				add = 25
			}
			modifier = {
				short_term_gold < tiny_gold_value
				add = 200
			}
		}
	}

	# Offer to hire him
	option = {
		name = agot_filler_tyrosh.0010.c
		trigger = {
			can_employ_court_position_type = bodyguard_court_position
		}
		appoint_court_position = {
			recipient = scope:tyroshi_sellsword
			court_position = bodyguard_court_position
		}
		stress_impact = {
			compassionate = major_stress_loss
			arrogant = minor_stress_gain
			paranoid = massive_stress_gain
			generous = major_stress_loss
		}
		ai_chance = {
			base = 0
			modifier = {
				has_trait = trusting
				add = 25
			}
			modifier = {
				has_trait = compassionate
				add = 25
			}
		}
	}
}