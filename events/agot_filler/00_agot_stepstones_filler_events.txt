namespace = agot_filler_stepstones

#############################
#  HURRICANE PASSES THROUGH #
#############################
#		0001-0001			#
#############################

agot_filler_stepstones.0001 = {
	type = character_event
	title = agot_filler_stepstones.0001.t
	desc = agot_filler_stepstones.0001.desc


	override_background = {
		reference = AGOT_docks_storm
	}
	override_sound = { reference = event:/SFX/Events/Themes/sfx_event_theme_type_generic }

	theme = agot_at_sea

	left_portrait = {
		character = root
		animation = fear
	}

	trigger = {
		is_available_adult = yes
		is_landed = yes
		capital_province = {
			geographical_region = world_stepstones
		}
		NOT = {
			has_character_flag = agot_filler_stepstones_hurricane_event_1
		}
	}

	immediate = {
		play_music_cue = CK3AGOT_hurricane_cue
		location.county = {
			save_scope_as = stepstonesfiller_location0001
		}
		add_character_flag = {
			flag = agot_filler_stepstones_hurricane_event_1
			years = 1
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.5
			has_lifestyle = stewardship_lifestyle
		}
	}

	#Let them in. This storm is terrible.
	option = {
		name = agot_filler_stepstones.0001.a
		custom_tooltip = agot_filler_stepstones.0001.a.tt.a #Lets just lie to the player and say something bad could happen
		stress_impact = {
			greedy = medium_stress_impact_gain
			sadistic = medium_stress_impact_gain
			#cruel = medium_stress_impact_gain #CKAGOT CRUEL TRAIT
			generous = medium_stress_impact_loss
		}
		random = {
			chance = 130
			location.county = {
				add_county_modifier = {
					modifier = agot_filler_hurricane_wrecked_stepstones
					years = 2
				}
			}
			hidden_effect = {
				send_interface_toast = {
					type = event_toast_effect_bad
					title = agot_filler_stepstones.0001.a.toast
					left_icon = ROOT

					location.county = {
						add_county_modifier = {
							modifier = agot_filler_hurricane_wrecked_stepstones
							years = 2
						}
					}
				}
			}
		}
		random = {
			chance = 50
			show_as_tooltip = {
				custom_tooltip = agot_filler_stepstones.0001.a.tt.b
			}
		}
	}

	#Not my problem.
	option = {
		name = agot_filler_stepstones.0001.b
		if = {
			limit = { has_trait = just  }
			random = {
				chance = 75
				remove_trait = just
			}
		}
		add_prestige = minor_prestige_gain
		stress_impact = {
			just = massive_stress_impact_gain
			generous = major_stress_impact_gain
			greedy = medium_stress_impact_loss
			sadistic = medium_stress_impact_loss
			#cruel = medium_stress_impact_loss #CKAGOT CRUEL TRAIT?
		}
		random = {
			chance = 30
			location.county = {
				add_county_modifier = {
					modifier = agot_filler_hurricane_wrecked_stepstones
					years = 2
				}
			}
			hidden_effect = {
				send_interface_toast = {
					type = event_toast_effect_bad
					title = agot_filler_stepstones.0001.a.toast
					left_icon = ROOT

					location.county = {
						add_county_modifier = {
							modifier = agot_filler_hurricane_wrecked_stepstones
							years = 2
						}
					}
				}
			}
		}
		location.county = {
			add_county_modifier = {
				modifier = governance_1054_upset_peasants_modifier
				years = 5
			}
		}
	}
}

######################################
#  WANDERING THROUGH OLD BATTLEFIELD #
######################################
#			 0002-0002				  #
######################################

agot_filler_stepstones.0002 = {
	type = character_event
	title = agot_filler_stepstones.0002.t
	desc = agot_filler_stepstones.0002.desc


	override_background = {
		reference = AGOT_bp1_hills
	}

	theme = agot_at_sea

	left_portrait = {
		character = root
		animation = thinking
	}

	trigger = {
		is_available_adult = yes
		is_landed = yes
		any_held_county = {
			title_province = { geographical_region = world_stepstones }
		}
		NOT = {
			has_character_flag = agot_filler_wandering_through_old_battlefield
		}
	}

	immediate = {
		add_character_flag = {
			flag = agot_filler_wandering_through_old_battlefield
			years = 15
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.5
			has_trait = athletic
		}
	}

	#Sometimes I forget that these islands are watered with blood.
	option = {
		name = agot_filler_stepstones.0002.a
		add_learning_lifestyle_xp = minor_lifestyle_experience
		stress_impact = {
			greedy = medium_stress_gain
			sadistic = medium_stress_gain
			# cruel = medium_stress_gain ####CKAGOT CRUEL TRAIT
			generous = medium_stress_loss
		}
	}
}

#################################
# STORM WASHES ARTIFACTS ASHORE #
#################################
#		 0003-0003				#
#################################

agot_filler_stepstones.0003 = {
	type = character_event
	title = agot_filler_stepstones.0003.t
	desc = agot_filler_stepstones.0003.desc


	override_background = {
		reference = AGOT_beach
	}

	theme = stewardship

	left_portrait = {
		character = root
		animation = thinking
	}

	# artifact = {
	# 	target = scope:jewelry_artifact
	# 	position = lower_right_portrait
	# }

	trigger = {
		is_available_adult = yes
		is_landed = yes
		any_held_county = {
			title_province = { geographical_region = world_stepstones }
		}
		NOT = {
			has_character_flag = agot_filler_stepstones_storm_washes_artifacts_ashore
		}
	}

	immediate = {
		add_character_flag = {
			flag = agot_filler_stepstones_storm_washes_artifacts_ashore
			years = 15
		}
		random_held_county = {
			limit = {
				title_province = { geographical_region = world_stepstones }
			}
			save_scope_as = stepstones_holding
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.7
			has_trait = greedy
		}
		modifier = {
			add = 0.5
			has_trait = athletic
		}
	}

	#Jackpot!
	option = {
		name = agot_filler_stepstones.0003.a
		random_list = {
			10 = { add_gold = 50 }
			3 = { add_gold = 75 }
			2 = { add_gold = 100 }
			2 = { add_gold = 150 }
			1 = { add_gold = 250 }
			1 = { add_gold = 300 }
			1 = {
				create_artifact = {
					name = artifact_strange_necklace_name
					description = artifact_strange_necklace_desc
					visuals = necklace
					type = necklace
					modifier = artifact_monthly_minor_prestige_4_modifier
					modifier = artifact_monthly_prestige_gain_per_dread_add_2_modifier
					modifier = artifact_stress_gain_1_penalty_modifier
					wealth = scope:wealth
					quality = scope:quality
					save_scope_as = jewelry_artifact
				}
			}
		}
		add_dread = minor_dread_gain
		stress_impact = {
			greedy = medium_stress_loss
			arrogant = minor_stress_gain
		}
	}

	#I will not stoop so low.
	option = {
		name = agot_filler_stepstones.0003.b
		add_prestige = miniscule_prestige_gain
		stress_impact = {
			 greedy = massive_stress_gain
			 arrogant = minor_stress_loss
		 }
	 }
}

###################################
# HURRICANE ANNIHLATES STEPSTONES #
###################################
#			0004-0004			  #
###################################

agot_filler_stepstones.0004 = {
	type = character_event
	title = agot_filler_stepstones.0004.t
	desc = agot_filler_stepstones.0004.desc

	override_background = {
		reference = AGOT_docks_storm
	}
	override_sound = { reference = event:/SFX/Events/Themes/sfx_event_theme_type_generic }

	theme = agot_at_sea

	left_portrait = {
		character = root
		animation = thinking
	}

	trigger = {
		is_available_adult = yes
		is_landed = yes
		any_held_county = {
			title_province = { geographical_region = world_stepstones }
		}
		AND = {
			NOT = {
				capital_province = {
					geographical_region = world_stepstones
				}
				has_character_flag = agot_filler_hurricane_damages_stepstone_demense
			}
		}
	}

	immediate = {
		play_music_cue = CK3AGOT_hurricane_cue
		add_character_flag = {
			flag = agot_filler_hurricane_damages_stepstone_demense
			years = 10
		}
		random_held_county = {
			limit = {
				title_province = { geographical_region = world_stepstones }
			}
			save_scope_as = ravaged_stepstones_holding
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.5
			stewardship >= medium_skill_rating
		}
	}

	#Boo Hoo
	option = {
		name = agot_filler_stepstones.0004.a

		scope:ravaged_stepstones_holding = {
			add_county_modifier = {
				modifier = agot_filler_hurricane_wrecked_stepstones
				years = 2
			}
		}

		stress_impact = {
			base = medium_stress_gain
			just = massive_stress_gain
			generous = massive_stress_gain
			compassionate = minor_stress_gain
		}
	}

	#I will pray for them.
	option = {
		name = {
			trigger = {
				OR = {
					piety_level <= medium_piety_level
					has_trait = zealous
				}
			}
			text = agot_filler_stepstones.0004.b.standard
		}

		name = {
			trigger = {
				OR = {
					piety_level >= medium_piety_level
					has_trait = zealous
				}
			}
			text = agot_filler_stepstones.0004.b.religious
		}

		trigger = {
			NOT = {
				piety_level = low_negative_piety_level
			}
		}

		add_piety = minor_piety_gain

		scope:ravaged_stepstones_holding = {
			add_county_modifier = {
				modifier = agot_filler_hurricane_wrecked_stepstones
				years = 3
			}
		}

		stress_impact = {
			base = medium_stress_gain
			just = medium_stress_gain
			generous = medium_stress_loss
			compassionate = minor_stress_loss
		}
	}

	#Send relief
	option = {
		name = agot_filler_stepstones.0004.c
		remove_short_term_gold = medium_gold_value
		scope:ravaged_stepstones_holding = {
			add_county_modifier = {
				modifier = agot_filler_hurricane_wrecked_stepstones
				years = 1
			}
		}
		stress_impact = {
			greedy = medium_stress_gain
			sadistic = medium_stress_gain
			#cruel = medium_stress_gain ###CKAGOT cruel trait
			generous = medium_stress_loss
			just = medium_stress_loss
		}
	 }
}

##############################################
# OLD IRONBORN REAVER CHATS YOU UP AT AN INN #
##############################################
#					 0005-0005				 #
##############################################

agot_filler_stepstones.0005 = {
	type = character_event
	title = agot_filler_stepstones.0005.t
	desc = agot_filler_stepstones.0005.desc


	override_background = {
		reference = tavern
	}

	theme = party

	left_portrait = {
		character = root
		animation = drink
	}

	right_portrait = {
		character = scope:agot_filler_stepstones_drunken_reaver
		animation = wooden_sword_coup_degrace
	}

	trigger = {
		is_available_adult = yes
		is_landed = yes
		can_employ_court_position_type = bodyguard_court_position
		NOT = {
			has_character_flag = agot_filler_stepstones_drunk_ironborn_conversation
		}
		capital_province = {
			geographical_region = world_stepstones
		}
	}

	immediate = {
		add_character_flag = {
			flag = agot_filler_stepstones_drunk_ironborn_conversation
		}
		random_held_county = {
			limit = {
				title_province = { geographical_region = world_stepstones }
			}
			save_scope_as = stepstonesfiller_location0005
		}
		create_character = {
			location = root.location
			culture = culture:ironborn #is this accurate?
			faith = faith:drowned_god
			age = 55
			gender = male
			trait = education_martial_4
			trait = gregarious
			trait = drunkard
			trait = ambitious
			save_scope_as = agot_filler_stepstones_drunken_reaver
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.6
			has_trait = gregarious
		}
		modifier = {
			add = 0.8
			has_trait = drunkard
		}
	}

	#That's all your good for now, old squid, stories!
	option = {
		name = agot_filler_stepstones.0005.a
		random_list = {
			10 = { add_prestige = 5 }
			5 = { add_prestige = 10 }
			6 = { add_prestige = 15 }
			3 = { add_prestige = 20 }
			2 = { add_prestige = 25 }
		}
		add_dread = miniscule_dread_gain
		stress_impact = {
			#base = medium_stress_gain
			callous = minor_stress_loss
			generous = minor_stress_gain
			gregarious = medium_stress_gain
			compassionate = minor_stress_gain
		}
	}


	#Say... I could use a new body guard.
	option = {
		name = agot_filler_stepstones.0005.b

		hidden_effect = { add_courtier = scope:agot_filler_stepstones_drunken_reaver }
		appoint_court_position = {
			recipient = scope:agot_filler_stepstones_drunken_reaver
			court_position = bodyguard_court_position
		}
		reverse_add_opinion = {
			target = scope:agot_filler_stepstones_drunken_reaver
			modifier = pleased_opinion
			opinion = 50
		}
		stress_impact = {
			#base = medium_stress_gain
			generous = minor_stress_loss
			gregarious = medium_stress_loss
			compassionate = minor_stress_loss
			paranoid = massive_stress_gain
		}
	}

	#make him your court jester
	option = {
		name = agot_filler_stepstones.0005.c
		trigger = {
			can_employ_court_position_type = court_jester_court_position
		}

		show_as_unavailable = {
			NOT = { can_employ_court_position_type = court_jester_court_position }
		}
		hidden_effect = { add_courtier = scope:agot_filler_stepstones_drunken_reaver }
		appoint_court_position = {
			recipient = scope:agot_filler_stepstones_drunken_reaver
			court_position = court_jester_court_position
		}
		reverse_add_opinion = {
			target = scope:agot_filler_stepstones_drunken_reaver
			modifier = hate_opinion
			opinion = -50
		}
		stress_impact = {
			generous = medium_stress_gain
			gregarious = medium_stress_gain
			compassionate = massive_stress_gain
			callous = massive_stress_gain
		}
	}
}

##############################################
# SUMMER ISLAND SHIP FIGHTING IRONBORN NERDS #
##############################################
#					 0006-0006				 #
##############################################

agot_filler_stepstones.0006 = {
	type = character_event
	title = agot_filler_stepstones.0006.t
	desc = agot_filler_stepstones.0006.desc


	override_background = {
		reference = AGOT_beach
	}

	theme = war

	left_portrait = {
		character = root
		animation = aggressive_sword
	}

	trigger = {
		is_available_adult = yes
		is_landed = yes
		NOT = {
			has_character_flag = agot_filler_stepstones_warring_ships_spotted
		}
		capital_province = {
			geographical_region = world_stepstones
		}
	}

	immediate = {
		add_character_flag = {
			flag = agot_filler_stepstones_warring_ships_spotted
			years = 25
		}
		capital_province = {
			save_scope_as = stepstonesfiller_location0006
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.5
			OR = {
				has_martial_lifestyle_trait_trigger = yes
				has_lifestyle = martial_lifestyle
			}
		}
	}

	#What are we waiting for? We can attack both the swan and the squid!
	option = {
		name = agot_filler_stepstones.0006.a
		add_internal_flag = dangerous
		duel = {
			skill = prowess
			value = medium_skill_rating
			# You wreak havoc on both ships, successfully looting from both during the chaos.
			40 = {
				compare_modifier = {
					value = scope:duel_value #compare the prowess diff
					multiplier = 3.5 #apply a multiplier to... value
					#min = -49
				}
				desc = agot_filler_stepstones.0006.a.tt_success
				send_interface_toast = {
					title = agot_filler_stepstones.0006.a.tt_success_title
					left_icon = root
					add_gold = massive_gold_value
				}
			}
			# You have difficulty fighting the crew of both ships...
			60 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					#min = -49
				}
				desc = agot_filler_stepstones.0006.a.tt_failure
				send_interface_toast = {
					title = agot_filler_stepstones.0006.a.tt_failure_title
					custom_tooltip = agot_filler_stepstones.0006.a.tt_failure_desc
					left_icon = root
					random_list = {
						99 = {
							add_trait = wounded_1
						}
						1 = {
							death = {
								death_reason = death_duel
							}
						}
					}
				}
			}
		}
		add_dread = miniscule_dread_gain
		stress_impact = {
			base = minor_stress_gain
		}
	}

	#We will scavenge what we can after the fight...
	option = {
		name = agot_filler_stepstones.0006.b

		random_list = {
			25 = {
				hidden_effect = {
					send_interface_toast = {
						type = event_toast_effect_bad
						title = agot_filler_stepstones.0006.b.0_gold
						left_icon = ROOT
					}
				}
			}
			10 = {
				add_gold = 15
				hidden_effect = {
					send_interface_toast = {
						type = event_toast_effect_bad
						title = agot_filler_stepstones.0006.b.10_gold
						left_icon = ROOT

						show_as_tooltip = {
							add_gold = 10
						}
					}
				}
			}
			3 = {
				add_gold = 25
				hidden_effect = {
					send_interface_toast = {
						type = event_toast_effect_bad
						title = agot_filler_stepstones.0006.b.25_gold
						left_icon = ROOT

						show_as_tooltip = {
							add_gold = 25
						}
					}
				}
			}
			3 = {
				add_gold = 25
				hidden_effect = {
					send_interface_toast = {
						type = event_toast_effect_bad
						title = agot_filler_stepstones.0006.b.25_gold
						left_icon = ROOT

						show_as_tooltip = {
							add_gold = 25
						}
					}
				}
			}
			2 = {
				add_gold = 50
				hidden_effect = {
					send_interface_toast = {
						type = event_toast_effect_bad
						title = agot_filler_stepstones.0006.b.50_gold
						left_icon = ROOT

						show_as_tooltip = {
							add_gold = 50
						}
					}
				}
			}
			1 = {
				add_gold = 75
				hidden_effect = {
					send_interface_toast = {
						type = event_toast_effect_bad
						title = agot_filler_stepstones.0006.b.75_gold
						left_icon = ROOT

						show_as_tooltip = {
							add_gold = 75
						}
					}
				}
			}
		}

		add_prestige = minor_prestige_loss

		stress_impact = {
			base = miniscule_stress_impact_gain
		}
	}


	#Ugh. The sun is hardly up, who cares?
	option = {
		name = agot_filler_stepstones.0006.c
		trigger = {
			has_trait = lazy
		}

		show_as_unavailable = {
			NOT = {
				has_trait = lazy
			}
		}

		add_prestige = minor_prestige_loss

		trait = lazy

		stress_impact = {
			base = miniscule_stress_impact_gain
			lazy = massive_stress_loss
		}
	}


	#Let our enemies exhaust themselves while we stay strong.
	option = {
		name = agot_filler_stepstones.0006.d

		add_prestige = miniscule_prestige_gain

		stress_impact = {
			base = miniscule_stress_impact_gain
			strategist = minor_stress_loss
		}
	}
}

################################################
# A SUMMER ISLAND SHIP WANTS TO TRADE; PARROT? #
################################################
#					 0007-0007					#
################################################

agot_filler_stepstones.0007 = {
	type = character_event
	title = agot_filler_stepstones.0007.t
	desc = agot_filler_stepstones.0007.desc


	override_background = {
		reference = docks
	}

	theme = stewardship

	left_portrait = {
		character = root
		animation = thinking
	}

	right_portrait = {
		character = scope:summer_islander_pirate
		animation = steward
	}

	trigger = {
		is_available_adult = yes
		is_landed = yes
		NOT = {
			has_character_flag = agot_filler_stepstones_summer_islander_trade
		}
		OR = {
			capital_province = {
				geographical_region = world_stepstones
			}
			capital_province = {
				geographical_region = world_essos_free_cities
			}
		}
	}

	# So we don't have too many Stepstone people with them
	weight_multiplier = {
		base = 0.5
		modifier = { #More likely to trigger if you're part of the gender minority
			add = -5
			OR = {
				AND = {
					capital_province = {
						geographical_region = world_stepstones
					}
					any_county_in_region = {
						region = world_stepstones
						holder = {
							has_character_modifier = agot_owns_pet_parrot
						}
					}
				}
				AND = {
					capital_province = {
						geographical_region = world_essos_free_cities
					}
					any_county_in_region = {
						region = world_essos_free_cities
						holder = {
							has_character_modifier = agot_owns_pet_parrot
						}
					}
				}
			}
		}
	}

	immediate = {
		capital_province = {
			save_scope_as = location
		}
		add_character_flag = {
			flag = agot_filler_stepstones_summer_islander_trade
			years = 10
		}
		create_character = {
			location = root.location
			template = agot_summer_islander_character
			save_scope_as = summer_islander_pirate
		}
	}

	#I will take the parrot.
	option = {
		name = agot_filler_stepstones.0007.a
		add_prestige = minor_prestige_gain
		pay_short_term_gold = {
			target = scope:summer_islander_pirate
			gold = 100
		}
		add_character_modifier = {
			modifier = agot_owns_pet_parrot
			years = 35
		}
		stress_impact = {
			greedy = minor_stress_loss
			diligent = minor_stress_loss
			compassionate = minor_stress_loss
			stubborn = minor_stress_gain
		}
	}

	#I will take the spices.
	option = {
		name = agot_filler_stepstones.0007.b
		add_prestige = minor_prestige_gain
		pay_short_term_gold = {
			target = scope:summer_islander_pirate
			gold = 50
		}
		add_character_modifier = {
			modifier = agot_owns_unique_spices
			years = 10
		}
		stress_impact = {
			greedy = minor_stress_loss
			diligent = minor_stress_gain
			compassionate = minor_stress_gain
		}
	}

	#I will take nothing.
	option = {
		name = agot_filler_stepstones.0007.c
		add_prestige = minor_prestige_loss
	}
}