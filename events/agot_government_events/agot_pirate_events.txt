namespace = agot_pirate_events

# agot_pirate_convert_whole_realm_to_feudalism_decision
agot_pirate_events.0001 = {
	type = character_event
	title = agot_pirate_events.0001.t
	desc = agot_pirate_events.0001.desc
	theme = stewardship

	left_portrait = {
		character = root
		animation = personality_rational
	}

	immediate = {
		show_as_tooltip = {
			agot_pirate_convert_whole_realm_to_feudalism_effect = yes
		}
		hidden_effect = {
			if = {
				limit = {
					OR = {
						agot_is_valid_lp_feudal_government_target = yes
						any_liege_or_above = { agot_is_valid_lp_feudal_government_target = yes }
					}
					NOT = {
						any_liege_or_above = { has_trait = nightswatch }
					}
				}
				every_liege_or_above = {
					limit = {
						NOT = { is_independent_ruler = yes }
					}
					send_interface_message = {
						type = event_stewardship_neutral_with_text
						title = msg_vassal_lp_feudalised
						desc = msg_vassal_lp_feudalised_desc
						right_icon = root
					}
				}
			}
			else = {
				every_liege_or_above = {
					limit = {
						NOT = { is_independent_ruler = yes }
					}
					send_interface_message = {
						type = event_stewardship_neutral_with_text
						title = msg_vassal_common_feudalised
						desc = msg_vassal_common_feudalised_desc
						right_icon = root
					}
				}
			}
		}
	}

	option = {
		name = agot_pirate_events.0001.a
	}
}

agot_pirate_events.0002 = {
	type = letter_event
	opening = agot_pirate_events.0002.opening
	desc = agot_pirate_events.0001.desc
	sender = {
		character = scope:actor
		animation = personality_rational
	}

	immediate = {
		show_as_tooltip = {
			if = {
				limit = {
					OR = {
						agot_is_valid_lp_feudal_government_target = yes
						any_liege_or_above = { agot_is_valid_lp_feudal_government_target = yes }
					}
					NOT = {
						any_liege_or_above = { has_trait = nightswatch }
					}
				}
				change_government = lp_feudal_government
			}
			else = {
				change_government = feudal_government
			}
		}
	}

	option = {
		name = agot_pirate_events.0001.a
	}
}